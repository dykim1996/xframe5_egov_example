/* 2020-10-30 18:04 */ function XF_SCHEDULE(a,b){this._init(a,b),this._prop(b),this._box(),null==this.xf_parent.xf_screen&&this._create()}XF_SCHEDULE.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_SCHEDULE,b),this.schedule_map={},this.datestyle_map={},this.dateprop_map={},this.itemboxstyle_map={},factory_xf_param.CALENDAR_TODAY?this.today_date=_xfu.date(factory_xf_param.CALENDAR_TODAY):this.today_date=_xfu.today(),this.today_yyyymmdd=_xfp.date(this.today_date,"yyyyMMdd"),factory_xf_param.CALENDAR_TODAY?this.curr_date=_xfu.date(factory_xf_param.CALENDAR_TODAY):this.curr_date=_xfu.today(),this.curr_yyyymm=_xfp.date(this.curr_date,"yyyyMM"),this.css_td="",this.css_daytd="",this.css_daybox="",this.css_datetd="",this.css_datebox="",this.css_today="",this.css_itemtd="",this.css_itembox="",this.css_item="",this.css_itemimage="",this.css_itemstyle="",this.css_itemextender="",this.itembox_height=-1,this.itembox_itemcount=0,this.xf_item_drag=null,this.xf_item_resize=null,this.event_item_info=null,this.xf_item_mousehover=null,this.xf_itemresize_mousehover=null,this.select_range_info={xf_start_td:null,xf_end_td:null,start_date:"",end_date:""},this.xf_selectborder_td=null,this.xf_item_context=null,this.xf_td_context=null},XF_SCHEDULE.prototype._prop=function(a){this.xf_prop={border:1,border_color:[180,180,180],border_radius:"0",border_ex:"",boxshadow_type:0,cell_linecolor:[235,235,235],cell_line_vertstyle:1,cell_line_horzstyle:1,day_font:["굴림체",9,0,0,0,0],day_height:20,day_forecolor:[0,0,0],day_backcolor:[255,255,255],day_horzalign:1,day_textmargin:[2,2,0,0],day_gradient_effect:0,day_gradient_startcolor:[255,255,255],day_gradient_endcolor:[225,225,225],day_bottom_borderwidth:1,day_bottom_bordercolor:[210,210,210],date_font:["굴림체",9,0,0,0,0],date_height:20,date_forecolor:[0,0,0],date_backcolor:[255,255,255],date_horzalign:1,date_itembadge_pos:0,date_userbtn0_pos:0,date_userbtn0_image:"",date_userbtn0_width:9,date_userbtn0_right:2,date_userbtn0_left:2,date_userbtn1_pos:0,date_userbtn1_image:"",date_userbtn1_width:9,date_userbtn1_right:13,date_userbtn1_left:13,date_textmargin:[2,2,0,0],date_gradient_effect:0,date_gradient_startcolor:[255,255,255],date_gradient_endcolor:[225,225,225],date_bottom_borderwidth:0,date_bottom_bordercolor:[235,235,235],date_dividerowcount:0,date_dividecolor:[250,250,250],today_font:["굴림체",9,0,0,0,0],today_forecolor:[0,0,0],today_backcolor:[255,255,255],today_backcolor_opacity:10,today_transparent:!0,today_border:1,today_bordercolor:[65,105,225],today_borderradius:"4",today_datebackcolor_show:!1,today_datebackcolor:[255,255,255],today_itemboxbackcolor_show:!1,today_itemboxbackcolor:[255,255,255],itembox_padding:[0,0,0,0],itembox_overflow:0,itembox_backcolor:[255,255,255],itembox_dividerowcount:0,itembox_dividecolor:[250,250,250],itembox_selectcolor:[240,240,240],item_font:["굴림체",9,0,0,0,0],item_height:20,item_forecolor:[0,0,0],item_backcolor:[255,255,255],item_textmargin:[2,2,0,0],item_imagemargin:[0,2,0,0],item_style:0,item_border:0,item_bordercolor:[65,105,225],item_borderradius:"0",item_borderwidth:1,item_vertgap:0,item_imagedatatype:0,item_dragable:!0,item_extendable:!0,item_imagelist:"",itemextender_right:1,itemextender_bottom:1,itemextender_width:6,itemextender_height:6,itemextender_color:[148,148,148],selectborder_show:!0,selectborder_color:[210,210,210],selectborder_edgeshow:!0,selectborder_width:1,hidden:!1,shownextdate:!0,popupmenu_show:!0,is_nofocus:!1},this.event_name_arr=["on_dateclick","on_itemclick","on_hiddencountclick","on_daterclick","on_itemrclick","on_hiddencountrclick","on_begindrag","on_enddrag","on_selectdate","on_itemselectdate","on_menudaydelete","on_menuitemadd","on_menuitemedit","on_menuitemdelete","on_dateuserbtnclick","on_dateuserbtnclick"],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),0==this.xf_prop.item_imagelist.length?this.xf_prop.item_imagelist=[]:this.xf_prop.item_imagelist=this.xf_prop.item_imagelist.split(","),this._css(a),this._css_td(a),this._css_daytd(a),this._css_daybox(a),this._css_datetd(a),this._css_datebox(a),this._css_today(a),this._css_itemtd(a),this._css_itembox(a),this._css_item(a),this._css_itemimage(a),this._css_itemstyle(),this._css_itemextender(a)},XF_SCHEDULE.prototype._css=function(a){1!=_xf_htmlready_mode&&(_xfx.propcss(this,a,this.css_arr,["position","hidden","border_radius"]),_xfx.bordercss(this,a,this.css_arr))},XF_SCHEDULE.prototype._css_td=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("border_color",a.cell_linecolor,!1,null)),0==this.xf_prop.cell_line_horzstyle&&(b.push("border-top:0px none;"),b.push("border-bottom:0px none;")),0==this.xf_prop.cell_line_vertstyle&&(b.push("border-left:0px none;"),b.push("border-right:0px none;")),this.css_td=b.join(""))},XF_SCHEDULE.prototype._css_daytd=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("font",a.day_font,!1,null)),b.push(_xfc.basic("fore_color",a.day_forecolor,!1,null)),b.push(_xfc.basic("back_color",a.day_backcolor,!1,null)),_xfc.gradient(null,this.xf_prop.day_gradient_effect,this.xf_prop.day_gradient_startcolor,this.xf_prop.day_gradient_endcolor,"",b),a.day_bottom_borderwidth>0&&b.push("border-bottom:"+this.xf_prop.day_bottom_borderwidth+"px solid "+_xfu.rgbfunc(this.xf_prop.day_bottom_bordercolor)+";"),this.css_daytd=b.join(""))},XF_SCHEDULE.prototype._css_daybox=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.justifycontent(null,a.day_horzalign)),b.push(_xfc.basic("text_margin",a.day_textmargin,!1,null)),this.css_daybox=b.join(""))},XF_SCHEDULE.prototype._css_datetd=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("font",a.date_font,!1,null)),b.push(_xfc.basic("fore_color",a.date_forecolor,!1,null)),b.push(_xfc.basic("back_color",a.date_backcolor,!1,null)),_xfc.gradient(null,this.xf_prop.date_gradient_effect,this.xf_prop.date_gradient_startcolor,this.xf_prop.date_gradient_endcolor,"",b),a.date_bottom_borderwidth>0&&b.push("border-bottom:"+this.xf_prop.date_bottom_borderwidth+"px solid "+_xfu.rgbfunc(this.xf_prop.date_bottom_bordercolor)+";"),this.css_datetd=b.join(""))},XF_SCHEDULE.prototype._css_datebox=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.justifycontent(null,a.date_horzalign)),b.push(_xfc.basic("text_margin",a.date_textmargin,!1,null)),this.css_datebox=b.join(""))},XF_SCHEDULE.prototype._css_today=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("font",a.today_font,!1,null)),b.push(_xfc.basic("fore_color",a.today_forecolor,!1,null)),b.push(_xfc.backcolor(null,this.xf_prop.today_transparent,this.xf_prop.today_backcolor,this.xf_prop.today_backcolor_opacity)),b.push(_xfc.basic("border",a.today_border,!1,null)),b.push(_xfc.basic("border_color",a.today_bordercolor,!1,null)),b.push(_xfc.basic("border_radius",a.today_borderradius,!1,null)),this.css_today=b.join(""))},XF_SCHEDULE.prototype._css_itemtd=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("back_color",a.itembox_backcolor,!1,null)),this.css_itemtd=b.join(""))},XF_SCHEDULE.prototype._css_itembox=function(a){var b;1!=_xf_htmlready_mode&&(b=[],1==a.itembox_overflow&&b.push("overflow:hidden;"),b.push(_xfc.basic("padding",a.itembox_padding,!1,null)),this.css_itembox=b.join(""))},XF_SCHEDULE.prototype._css_item=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("font",a.item_font,!1,null)),b.push(_xfc.basic("fore_color",a.item_forecolor,!1,null)),b.push(_xfc.basic("text_margin",a.item_textmargin,!1,null)),b.push(_xfc.basic("height",a.item_height,!1,null)),b.push(_xfc.basic("border_radius",a.item_borderradius,!1,null)),a.item_vertgap&&b.push(_xfc.css("margin-bottom",_xfu.px(a.item_vertgap),!1,null)),this.css_item=b.join(""))},XF_SCHEDULE.prototype._css_itemimage=function(a){var b;1!=_xf_htmlready_mode&&(b=[],b.push(_xfc.basic("text_margin",a.item_imagemargin,!1,null)),this.css_itemimage=b.join(""))},XF_SCHEDULE.prototype._css_itemextender=function(a){var b;1!=_xf_htmlready_mode&&(b=[],a.itemextender_color&&(b.push("border-right-color:"+_xfu.rgbfunc(a.itemextender_color)+";"),b.push("border-bottom-color:"+_xfu.rgbfunc(a.itemextender_color)+";")),a.itemextender_right&&b.push("right:"+_xfu.px(a.itemextender_right)+";"),a.itemextender_bottom&&b.push("bottom:"+_xfu.px(a.itemextender_bottom)+";"),a.itemextender_width&&(b.push("border-left-width:"+_xfu.px(a.itemextender_width/2)+";"),b.push("border-right-width:"+_xfu.px(a.itemextender_width/2)+";")),a.itemextender_height&&(b.push("border-top-width:"+_xfu.px(a.itemextender_height/2)+";"),b.push("border-bottom-width:"+_xfu.px(a.itemextender_height/2)+";")),this.css_itemextender=b.join(""))},XF_SCHEDULE.prototype._css_itemstyle=function(){var a;1!=_xf_htmlready_mode&&(a=[],1==this.xf_prop.item_style?(a.push(_xfc.basic("back_color",this.xf_prop.item_backcolor,!1,null)),1==this.xf_prop.item_border&&a.push("border: "+this.xf_prop.item_borderwidth+"px solid "+_xfu.rgbfunc(this.xf_prop.item_bordercolor)+";")):2==this.xf_prop.item_style&&a.push("border-left: 4px solid "+_xfu.rgbfunc(this.xf_prop.item_backcolor)+";"),this.css_itemstyle=a.join(""))},XF_SCHEDULE.prototype._box=function(){var a;0!=_xf_htmlready_mode&&null!=this.xf_parent.xf_screen||(a=[],a.push("<div"),a.push(' id="'+this.xf_prop.internal_name+'"'),a.push(' class="'+_xfx.propclass(this,this.xf_prop,"_xf_schedule")+'"'),a.push(' style="'),a.push(this.css_arr.join("")),_xfx.sizeposcss(this,this.xf_prop,a),a.push('">'),a.push('<table class="_xf_schedule_table">'),a.push(this._theadhtml()),a.push("<tbody></tbody>"),a.push("</table>"),a.push("</div>")),_xfx.register(this,!1,a)},XF_SCHEDULE.prototype._dom=function(){this.xf_table=this.xf_object.children("._xf_schedule_table"),this.xf_tbody=this.xf_table.children("tbody"),this._context_date(),this._context_item()},XF_SCHEDULE.prototype._context_date=function(){var a,b;a={id:this.xf_prop.internal_name+"_context_date",menu_width:60,callback:$.proxy(this.on_context_click,this)},this.xf_context_date=new XF_CONTEXT(this,a),b=[],b.push(this.xf_context_date.newmenu({id:"item_add",icon:"add",label:"추가"})),b.push(this.xf_context_date.newmenu({id:"day_delete",icon:"trash",label:"삭제"})),b.push(this.xf_context_date.newmenu({type:"separator"})),b.push(this.xf_context_date.newmenu({id:"close",icon:"close",label:"취소"})),this.xf_context_date.setmenu(b)},XF_SCHEDULE.prototype._context_item=function(){var a,b;a={id:this.xf_prop.internal_name+"_context_item",menu_width:60,callback:$.proxy(this.on_context_click,this)},this.xf_context_item=new XF_CONTEXT(this,a),b=[],b.push(this.xf_context_item.newmenu({id:"item_edit",icon:"edit",label:"변경"})),b.push(this.xf_context_item.newmenu({id:"item_delete",icon:"trash",label:"삭제"})),b.push(this.xf_context_item.newmenu({type:"separator"})),b.push(this.xf_context_item.newmenu({id:"close",icon:"close",label:"취소"})),this.xf_context_item.setmenu(b)},XF_SCHEDULE.prototype._data=function(){},XF_SCHEDULE.prototype._offevent=function(){_xfj.offevent(this.xf_table,["click","dragstart","drop","dragover"]),_xfj.offevent(this.xf_table,["contextmenu","mousedown","mouseup","mousemove"])},XF_SCHEDULE.prototype._event=function(){this.xf_table.on("click",$.proxy(this.on_table_click,this)),this.xf_table.on("dragstart",$.proxy(this.on_object_dragstart,this)),this.xf_table.on("drop",$.proxy(this.on_object_drop,this)),this.xf_table.on("dragover",$.proxy(this.on_object_dragover,this)),this.xf_table.on("contextmenu",$.proxy(this.on_table_contextmenu,this)),this.xf_table.on("mousedown",$.proxy(this.on_object_mousedown,this)),this.xf_table.on("mouseup",$.proxy(this.on_object_mouseup,this)),this.xf_table.on("mousemove",$.proxy(this.on_object_mousemove,this))},XF_SCHEDULE.prototype._create=function(){this._dom(),this._data(),this._event(),0!=_xf_htmlready_mode&&null!=this.xf_parent.xf_screen||this._showschedule(this.curr_date.year,this.curr_date.month,this.curr_date.day)},XF_SCHEDULE.prototype._schedulekey=function(a){return"schedule_"+a},XF_SCHEDULE.prototype._scheduledate=function(a){return a.substr("schedule_".length)},XF_SCHEDULE.prototype._stylekey=function(a){return"style_"+a},XF_SCHEDULE.prototype._propkey=function(a){return"prop_"+a},XF_SCHEDULE.prototype._styledate=function(a){return a.substr("style_".length)},XF_SCHEDULE.prototype._isitemboxdividerow=function(a){return 0==this.xf_prop.itembox_dividerowcount?!1:isNaN(a)||0>a?!1:parseInt(a/this.xf_prop.itembox_dividerowcount)%2==1},XF_SCHEDULE.prototype._isdatedividerow=function(a){return 0==this.xf_prop.date_dividerowcount?!1:isNaN(a)||0>a?!1:parseInt(a/this.xf_prop.date_dividerowcount)%2==1},XF_SCHEDULE.prototype._itemtdbackcolorbytd=function(a){var b,c;return b=a.data("week"),b=_xfu["int"](b),c=a.data("date"),this._itemtdbackcolor(b,c)},XF_SCHEDULE.prototype._itemtdbackcolor=function(a,b){var c,d;return d=this._itemboxstylebydate(b),d&&d.itembox_backcolor?d.itembox_backcolor:b==this.today_yyyymmdd&&this.xf_prop.today_datebackcolor_show?this.xf_prop.today_datebackcolor:(c=this._isitemboxdividerow(a),c?this.xf_prop.itembox_dividecolor:this.xf_prop.itembox_backcolor)},XF_SCHEDULE.prototype._datetdbackcolor=function(a,b){var c,d;return d=this._datestylebydate(b),d&&d.date_backcolor?d.date_backcolor:b==this.today_yyyymmdd&&this.xf_prop.today_itemboxbackcolor_show?this.xf_prop.today_itemboxbackcolor:(c=this._isdatedividerow(a),c?this.xf_prop.date_dividecolor:this.xf_prop.date_backcolor)},XF_SCHEDULE.prototype._updateitemcountbadge=function(a){var b,c;return b=this._getitemcount(this._schedulekey(a))-this.itembox_itemcount,c=this.xf_tbody.find('._xf_schedule_td_badge[data-date="'+a+'"]'),0==c.length?!1:(0==this.xf_prop.itembox_overflow||1>b?c.css("display","none"):(c.css("display","block"),c.text("+"+b)),!0)},XF_SCHEDULE.prototype._datestylebydate=function(a){return this.datestyle_map[this._stylekey(a)]},XF_SCHEDULE.prototype._itemboxstylebydate=function(a){return this.itemboxstyle_map[this._stylekey(a)]},XF_SCHEDULE.prototype._updateiteminfo=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n;if(null!=b&&(a.key=b),null!=c&&(a.title=c),null!=d&&(a.memo=d),null!=e&&(a.image=e),null!=f&&(a.fore_rgb=f),null!=g&&(a.back_rgb=g),null!=h){if(h=_xfu.intval(h,0,2),h===!1)return!1;a.horz_align=h}if(i===!1)return!0;if(l=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a.date+'"]'),0!=l.length){if(n=[],m=this._schedulekey(a.date),$.isArray(this.schedule_map[m]))for(k=this.schedule_map[m].length,j=0;k>j;j++)n.push(this._getscheduleitemhtml(this.schedule_map[m][j]));return l[0].innerHTML=n.join(""),!0}},XF_SCHEDULE.prototype._hideselectdaterange=function(a){var b,c,d,e,f;for(b=this.xf_tbody.find("._xf_schedule_itemtd_selected"),b.removeClass("_xf_schedule_itemtd_selected"),e=b.length,d=0;e>d;d++)c=$(b[d]),f=this._itemtdbackcolorbytd(c),c.css("background-color",_xfu.rgbfunc(f));a&&(this.select_range_info={xf_start_td:null,xf_end_td:null,start_date:"",end_date:""})},XF_SCHEDULE.prototype._showselectdaterange=function(a,b){var c,d,e;if(a=_xfu["int"](a),b=_xfu["int"](b),(this.select_range_info.start_date!=a||this.select_range_info.end_date!=b)&&(this.select_range_info.start_date=a,this.select_range_info.end_date=b,this._hideselectdaterange(!1),this.select_range_info.start_date!=this.select_range_info.end_date))for(a>b&&(d=a,a=b,b=d),c=a;b>=c;c++)e=this.xf_tbody.find('._xf_schedule_itemtd[data-date="'+c+'"]'),0!=e.length&&(e.addClass("_xf_schedule_itemtd_selected"),e.css("background-color",_xfu.rgbfunc(this.xf_prop.itembox_selectcolor)))},XF_SCHEDULE.prototype._deteleiteminfo=function(a,b){var c,d,e;for(e=this.schedule_map[a],d=e.length,c=d-1;c>=0;c--)if(b==e[c].key)return e.splice(c,1),!0;return!1},XF_SCHEDULE.prototype._showitemresize=function(a){var b,c;b=a.children("._xf_schedule_td_item_resize"),c=b.css("display"),this.xf_table.find("._xf_schedule_td_item_resize").hide(),"block"==c?b.hide():b.show()},XF_SCHEDULE.prototype._findtdbyevent=function(a){var b,c;return c=$(a.target),b=c.closest("._xf_schedule_td"),b.length>0?b:null},XF_SCHEDULE.prototype._gettdinfo=function(a){return a.length>0?{date:_xfu.str(a.data("date"))}:null},XF_SCHEDULE.prototype._getiteminfobyobject=function(a){var b,c,d,e;return a.length>0?(c=a.data("key"),d=a.index(),b=this._schedulekey(a.data("date")),e=this._getiteminfobyindex(b,d),null!=e&&(e.index=d),e):null},XF_SCHEDULE.prototype._getiteminfobyindex=function(a,b){var c;return c=this.schedule_map[a],c?c[b]:null},XF_SCHEDULE.prototype._getiteminfobydatekey=function(a,b){var c,d,e;if(e=this.schedule_map[a],!e)return null;for(d=e.length,c=d-1;c>=0;c--)if(b==e[c].key)return e[c];return null},XF_SCHEDULE.prototype._getiteminfobykey=function(a){var b,c;for(b in this.schedule_map)if(c=this._getiteminfobydatekey(b,a))return c;return null},XF_SCHEDULE.prototype._getitemcount=function(a){var b;return b=this.schedule_map[a],b?b.length:0},XF_SCHEDULE.prototype._theadhtml=function(){var a,b;if(b=[],b.push("<thead>"),b.push('<tr class="_xf_schedule_tr"'),b.push(' style="'),b.push("height:"+this.xf_prop.day_height+"px;"),b.push('">'),1===factory_xf_param.FIRSTDAY_OF_WEEK)for(a=0;7>a;a++)b.push('<th class="_xf_schedule_th"'),b.push(' style="'),b.push(this.css_td),b.push(this.css_daytd),4>a?(b.push('">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a+1]),b.push("</div>")):4==a?(b.push("color:"+_xfu.rgbfunc(factory_xf_param.FRIDAY_COLOR)+";"),b.push('">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a+1]),b.push("</div>")):5==a?(b.push("color:"+_xfu.rgbfunc(factory_xf_param.SATURDAY_COLOR)+";"),b.push('">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a+1]),b.push("</div>")):6==a&&(b.push("color:"+_xfu.rgbfunc(factory_xf_param.SUNDAY_COLOR)+'">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[0]),b.push("</div>"),b.push("</th>")),b.push("</th>");else for(a=0;7>a;a++)b.push('<th class="_xf_schedule_th"'),b.push(' style="'),b.push(this.css_td),b.push(this.css_daytd),0==a?(b.push("color:"+_xfu.rgbfunc(factory_xf_param.SUNDAY_COLOR)+'">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a]),b.push("</div>")):6==a?(b.push("color:"+_xfu.rgbfunc(factory_xf_param.SATURDAY_COLOR)+'">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a]),b.push("</div>")):5==a?(b.push("color:"+_xfu.rgbfunc(factory_xf_param.FRIDAY_COLOR)+'">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a]),b.push("</div>")):(b.push('">'),b.push('<div class="_xf_schedule_td_daybox" style="'+this.css_daybox+'">'),b.push(factory_xf_param.SCHEDULE_DAYNAME_OF_WEEK[a]),b.push("</div>")),b.push("</th>");return b.push("</tr>"),b.push("</thead>"),b.join("")},XF_SCHEDULE.prototype._refreshitemboxheight=function(){var a,b,c;a=this.xf_object.innerHeight(),b=a-this.xf_prop.day_height,b-=6*this.xf_prop.date_height,c=b/6-1,this.itembox_height=Math.floor(c),this.itembox_itemcount=Math.floor(this.itembox_height/(this.xf_prop.item_height+this.xf_prop.item_vertgap)),this.itembox_itemcount=Math.max(this.itembox_itemcount,0)},XF_SCHEDULE.prototype._showschedule=function(a,b,c){var d,e,f,g,h;for(this._refreshitemboxheight(),a=_xfu["int"](a),b=_xfu["int"](b),c=_xfu["int"](c),this.xf_tbody.empty(),e=0,h=this._getdayinfoarr(a,b,c),d=[],f=0;6>f;f++){for(d.push('<tr class="_xf_schedule_tr" style="height:'+this.xf_prop.date_height+'px;">'),g=0;7>g;g++)d.push(h[e].html),e++;for(d.push("</tr>"),e-=7,d.push('<tr class="_xf_schedule_tr">'),g=0;7>g;g++)d.push(this._getdateitemhtml(f,h[e])),e++;d.push("</tr>")}this.xf_tbody.get(0).innerHTML=d.join("")},XF_SCHEDULE.prototype._getdateitemhtml=function(a,b){var c,d,e,f;if(c=[],c.push('<td class="_xf_schedule_td _xf_schedule_itemtd"'),b.date&&c.push(' data-date="'+b.date+'"'),c.push(' data-week="'+a+'"'),c.push(' style="'),c.push(this.css_td),c.push(this.css_itemtd),c.push("background-color: "+_xfu.rgbfunc(this._itemtdbackcolor(a,b.date))+";"),c.push('">'),c.push('<div class="_xf_schedule_td_itembox"'),b.date&&c.push(' data-date="'+b.date+'"'),c.push(' style="'),c.push(this.css_itembox),c.push("height:"+_xfu.px(this.itembox_height)+";"),c.push('">'),f=this._schedulekey(b.date),$.isArray(this.schedule_map[f]))for(e=this.schedule_map[f].length,d=0;e>d;d++)c.push(this._getscheduleitemhtml(this.schedule_map[f][d]));return c.push("</div"),c.push("</td>"),c.join("")},XF_SCHEDULE.prototype._getscheduleitemhtml=function(a){var b,c,d;return b=[],b.push('<div class="_xf_schedule_td_item"'),b.push(' title="'+a.title+'"'),b.push(' data-date="'+a.date+'"'),b.push(' data-key="'+a.key+'"'),b.push(' data-image="'+a.image+'"'),b.push(' data-extendable="'+this.xf_prop.item_extendable===!1?"0":'1"'),this.xf_prop.item_dragable?b.push(' draggable="true"'):b.push(' draggable="false"'),b.push(' style="'),b.push(this.css_item),b.push(this.css_itemstyle),$.isArray(a.fore_rgb)&&b.push("color:"+_xfu.rgbfunc(a.fore_rgb)+";"),$.isArray(a.back_rgb)&&(1==this.xf_prop.item_style?b.push("background-color:"+_xfu.rgbfunc(a.back_rgb)+";"):2==this.xf_prop.item_style&&b.push("border-left-color:"+_xfu.rgbfunc(a.back_rgb)+";")),0!=a.horz_align&&b.push(_xfc.justifycontent(null,a.horz_align)),b.push('">'),0==this.xf_prop.item_imagedatatype?d=a.image:1==this.xf_prop.item_imagedatatype&&(c=_xfu["int"](a.image),d=this.xf_prop.item_imagelist[c]),void 0!==d&&d.length>0&&(b.push('<img draggable="false" class="_xf_schedule_td_item_img" src="'+_xfx.imageurl(d)+'"'),b.push(' style="'),b.push(this.css_itemimage),b.push('"/>')),b.push('<span draggable="false" class="_xf_schedule_td_item_title">'+a.title+"</span>"),this.xf_prop.item_extendable&&(b.push("<div"),b.push(' draggable="true"'),b.push(' class="_xf_schedule_td_item_resize" style="'),b.push("display:none;"),b.push(this.css_itemextender),b.push('"></div>')),b.push("</div>"),b.join("")},XF_SCHEDULE.prototype._getdatepropvalue=function(a,b){var c,d;return c=this._propkey(a),d=this.dateprop_map[c],void 0===d?this.xf_prop[b]:void 0===d[b]?this.xf_prop[b]:d[b]},XF_SCHEDULE.prototype._getdayinfoarr=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(d=new Date(a+"-"+(10>b?"0"+b:b)).getDay(),1===factory_xf_param.FIRSTDAY_OF_WEEK&&(0==d?d=6:d-=1),e=_xfu.lastday(a,b),g=_xfu.gapdate("month",-1,a,b),i=_xfu.gapdate("month",1,a,b),h=_xfu.lastday(g.year,g.month),c>e&&(c=e),k=[],p=0;d>p;p++)f=h-d+(p+1),k.push(this._getprevnextdayinfo("prev",g.year,g.month,f));for(f=1,p=d;42>p;p++)j=parseInt(p/7,10),e>=f?(m="",q="1",n={date:_xfp.date(a,b,f,""),yyyymm:_xfp.date(a,b,""),day_type:"curr",html:""},o=factory._getmatchholidayinfo(a,b,f),o.is_holiday?m="_xf_schedule_holiday":(s=p%7,m=1===factory_xf_param.FIRSTDAY_OF_WEEK?4==s?"_xf_schedule_friday":5==s?"_xf_schedule_saturday":6==s?"_xf_schedule_sunday":"_xf_schedule_weekday":5==s?"_xf_schedule_friday":6==s?"_xf_schedule_saturday":0==s?"_xf_schedule_sunday":"_xf_schedule_weekday"),l=[],l.push("<td"),l.push(' data-type="day"'),l.push(' data-date="'+n.date+'"'),l.push(' data-date_type="curr"'),o.title.length>0&&l.push(' title="'+o.title+'"'),l.push(' class="_xf_schedule_td _xf_schedule_datetd '+m),l.push('"'),l.push(' style="'),l.push(this.css_td),l.push(this.css_datetd),l.push("background-color: "+_xfu.rgbfunc(this._datetdbackcolor(j,n.date))+";"),t=this._datestylebydate(n.date),t&&t.date_font&&l.push(_xfc.font(null,t.date_font)),"_xf_schedule_friday"==m?l.push("color:"+_xfu.rgbfunc(factory_xf_param.FRIDAY_COLOR)+";"):"_xf_schedule_saturday"==m?l.push("color:"+_xfu.rgbfunc(factory_xf_param.SATURDAY_COLOR)+";"):"_xf_schedule_sunday"==m?l.push("color:"+_xfu.rgbfunc(factory_xf_param.SUNDAY_COLOR)+";"):"_xf_schedule_holiday"==m&&l.push("color:"+_xfu.rgbfunc(factory_xf_param.HOLIDAY_COLOR)+";"),l.push('">'),l.push('<div class="_xf_schedule_td_datebox"'),l.push(' style="'),l.push(this.css_datebox),l.push('">'),l.push("<span"),a==this.today_date.year&&b==this.today_date.month&&f==this.today_date.day&&(l.push(' class="_xf_schedule_date_curr"'),l.push(' style="'),l.push(this.css_today),l.push('"')),l.push(">"),l.push(f+"</span>"),r=this._getitemcount(this._schedulekey(n.date))-this.itembox_itemcount,l.push('<div class="_xf_schedule_td_badge '),0==this.xf_prop.date_itembadge_pos?0==this.xf_prop.date_itembadge_pos?1==this.xf_prop.date_horzalign?l.push('_xf_schedule_td_badge_left"'):l.push('_xf_schedule_td_badge_right"'):1==this.xf_prop.date_itembadge_pos?l.push('_xf_schedule_td_badge_right"'):2==this.xf_prop.date_itembadge_pos&&l.push('_xf_schedule_td_badge_left"'):1==this.xf_prop.date_itembadge_pos?l.push('_xf_schedule_td_badge_left"'):l.push('_xf_schedule_td_badge_right"'),l.push(' data-date="'+n.date+'"'),l.push(' style="'),(0==this.xf_prop.itembox_overflow||1>r)&&l.push("display:none;"),l.push('">'),l.push("+"+r),l.push("</div>"),u=this._propkey(n.date),l.push('<div class="_xf_schedule_td_dateuserbtn _xf_schedule_td_dateuserbtn_0"'),l.push(' data-date="'+n.date+'"'),l.push(' data-button_index="0"'),l.push(' style="'),v=this._getdatepropvalue(n.date,"date_userbtn0_pos"),w=this._getdatepropvalue(n.date,"date_userbtn0_image"),x=this._getdatepropvalue(n.date,"date_userbtn0_width"),0==v&&l.push("display:none;"),l.push("width:"+_xfu.px(x)+";"),1==v?l.push("left:"+_xfu.px(this.xf_prop.date_userbtn0_left)+";"):2==v&&l.push("right:"+_xfu.px(this.xf_prop.date_userbtn0_right)+";"),w.length>0&&l.push("background-image:"+_xfx.imageurlfunc(w)+";"),l.push('">'),l.push("</div>"),l.push('<div class="_xf_schedule_td_dateuserbtn _xf_schedule_td_dateuserbtn_1"'),l.push(' data-date="'+n.date+'"'),l.push(' data-button_index="1"'),l.push(' style="'),v=this._getdatepropvalue(n.date,"date_userbtn1_pos"),w=this._getdatepropvalue(n.date,"date_userbtn1_image"),x=this._getdatepropvalue(n.date,"date_userbtn1_width"),0==v&&l.push("display:none;"),l.push("width:"+_xfu.px(x)+";"),1==v?l.push("left:"+_xfu.px(this.xf_prop.date_userbtn1_left)+";"):2==v&&l.push("right:"+_xfu.px(this.xf_prop.date_userbtn1_right)+";"),w.length>0&&l.push("background-image:"+_xfx.imageurlfunc(w)+";"),l.push('">'),l.push("</div>"),l.push("</div>"),l.push("</td>"),n.html=l.join(""),k.push(n)):k.push(this._getprevnextdayinfo("next",i.year,i.month,f-e,j)),f++;return k},XF_SCHEDULE.prototype._refreshselectborder=function(){this._showselectborder(this.xf_selectborder_td)},XF_SCHEDULE.prototype._hideselectborder=function(){this.xf_object.find("._xf_schedule_selectborder").remove(),this.xf_selectborder_td=null},XF_SCHEDULE.prototype._showselectborder=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(this._hideselectborder(),a){if(h=a.parent("tr").index(),f=a.index(),a.hasClass("_xf_schedule_itemtd"))d=a,g=this.xf_tbody.find("tr").eq(h-1),e=g.find("td").eq(f);else{if(!a.hasClass("_xf_schedule_datetd"))return;e=a,g=this.xf_tbody.find("tr").eq(h+1),d=g.find("td").eq(f)}this.xf_selectborder_td=a,b=e.outerHeight(),b+=d.outerHeight()+1,c=e.outerWidth()+1,k=this.xf_table.offset(),l=e.offset(),i=l.left-k.left-1,j=l.top-k.top-1,1==this.xf_prop.selectborder_edgeshow&&(0==f?(i+=1,c-=1):6==f&&i+c>this.xf_object.innerWidth()&&(c=this.xf_object.innerWidth()-i),h>=10&&j+b>this.xf_object.innerHeight()&&(b=this.xf_object.innerHeight()-j)),this.xf_object.append($(this._selectborderhtml(j,i,this.xf_prop.selectborder_width,b))),this.xf_object.append($(this._selectborderhtml(j,i+c-this.xf_prop.selectborder_width,this.xf_prop.selectborder_width,b))),this.xf_object.append($(this._selectborderhtml(j,i,c,this.xf_prop.selectborder_width))),this.xf_object.append($(this._selectborderhtml(j+b-this.xf_prop.selectborder_width,i,c,this.xf_prop.selectborder_width)))}},XF_SCHEDULE.prototype._selectborderhtml=function(a,b,c,d){var e;return e=[],e.push("<div "),e.push('class="_xf_schedule_selectborder" '),e.push('style="'),e.push("position:absolute;"),e.push("top:"+_xfu.px(a)+";"),e.push("left:"+_xfu.px(b)+";"),e.push("height:"+_xfu.px(d)+";"),e.push("width:"+_xfu.px(c)+";"),e.push("background-color:"+_xfu.rgbfunc(this.xf_prop.selectborder_color)+";"),e.push('">'),e.push("</div>"),e.join("")},XF_SCHEDULE.prototype._getprevnextdayinfo=function(a,b,c,d,e){var f,g,h;return f={date:_xfp.date(b,c,d,""),yyyymm:_xfp.date(b,c,""),day_type:a,html:""},g=[],g.push("<td"),g.push(' data-type="day"'),g.push(' data-date="'+_xfp.date(b,c,d,"")+'"'),g.push(' data-date_type="'+a+'"'),g.push(' class="_xf_schedule_td _xf_schedule_datetd _xf_schedule_td_date"'),g.push(' style="'),g.push(this.css_td),g.push(this.css_datetd),g.push("background-color: "+_xfu.rgbfunc(this._datetdbackcolor(e,f.date))+";"),h=this._datestylebydate(f.date),h&&h.date_font&&g.push(_xfc.font(null,h.date_font)),g.push('">'),g.push('<div class="_xf_schedule_td_datebox"'),g.push(' style="'),g.push(this.css_datebox),g.push('">'),this.xf_prop.shownextdate?g.push('<span class="_xf_schedule_date_next">'+d+"</span>"):g.push('<span class="_xf_schedule_date_next"></span>'),g.push("</div>"),g.push("</td>"),f.html=g.join(""),f},XF_SCHEDULE.prototype.additem=function(a,b,c,d,e,f,g,h){return this.additemex(a,b,c,d,e,f,g,0,h)},XF_SCHEDULE.prototype.additemex=function(a,b,c,d,e,f,g,h,i){var j,k,l,m;return h=_xfu.intval(h,0,2),h===!1?!1:(a=_xfu.str(a),8!=a.length?-1:(j=a.substr(0,6),j!=this.curr_yyyymm?-1:(k=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a+'"]'),0==k.length?-1:(m=this._schedulekey(a),void 0===this.schedule_map[m]&&(this.schedule_map[m]=[]),l={date:a,key:b,title:c,memo:d,image:e,fore_rgb:f,back_rgb:g,horz_align:h,extendable:!0},this.schedule_map[m].push(l),(void 0===i||i)&&(k.append(this._getscheduleitemhtml(l)),this._updateitemcountbadge(l.date)),this.schedule_map[m].length-1))))},XF_SCHEDULE.prototype.getitemstyle=function(){return this.xf_prop.item_style},XF_SCHEDULE.prototype.setitemstyle=function(a){return a=_xfu.intval(a,0,2),a===!1?!1:(this.xf_prop.item_style=a,this._css_itemstyle(),this.refresh(),!0)},XF_SCHEDULE.prototype.deteleallitem=function(){var a;return this.schedule_map={},a=this.xf_tbody.find("._xf_schedule_td_itembox"),a.empty(),!0},XF_SCHEDULE.prototype.deleteitembydate=function(a){var b;return b=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a+'"]'),0==b.length?!1:(this.schedule_map[this._schedulekey(a)]=[],b.empty(),this._updateitemcountbadge(a),!0)},XF_SCHEDULE.prototype.deleteitembydatekey=function(a,b){var c,d;return c=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a+'"]'),0==c.length?!1:(d=c.children('._xf_schedule_td_item[data-key="'+b+'"]'),0==d.length?!1:(d.remove(),this._deteleiteminfo(this._schedulekey(a),b),this._updateitemcountbadge(a),!0))},XF_SCHEDULE.prototype.deleteitembykey=function(a){var b,c,d;if(a.length<=0)return!1;if(b=this.xf_tbody.find('._xf_schedule_td_item[data-key="'+a+'"]'),0==b.length)return!1;b.remove();for(c in this.schedule_map)d=this._deteleiteminfo(c,a),d&&this._updateitemcountbadge(this._scheduledate(c));return!0},XF_SCHEDULE.prototype.deleteitembyindex=function(a,b){var c,d;return b=_xfu.intval(b,0,XFD_MAX_VALUE),b===!1?!1:(c=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a+'"]'),0==c.length?!1:(d=c.children("._xf_schedule_td_item"),void 0===d[b]?!1:($(d[b]).remove(),this.schedule_map[this._schedulekey(a)].splice(b,1),this._updateitemcountbadge(a),!0)))},XF_SCHEDULE.prototype.getallitemcount=function(){var a,b;a=0;for(b in this.schedule_map)a+=this._getitemcount(b);return a},XF_SCHEDULE.prototype.getitemcount=function(a){return this._getitemcount(this._schedulekey(a))},XF_SCHEDULE.prototype.refresh=function(){this._showschedule(this.curr_date.year,this.curr_date.month,this.curr_date.day)},XF_SCHEDULE.prototype.getitembykey=function(a){var b;return b=this._getiteminfobykey(a),b?$.extend({},b):null},XF_SCHEDULE.prototype.setitembykey=function(a,b,c,d,e,f,g){return this.setitembykeyex(a,b,c,d,e,f,null,g);
},XF_SCHEDULE.prototype.setitembykeyex=function(a,b,c,d,e,f,g,h){var i;return i=this._getiteminfobykey(a),i?this._updateiteminfo(i,a,b,c,d,e,f,g,h):!1},XF_SCHEDULE.prototype.getitembydatekey=function(a,b){var c;return c=this._getiteminfobydatekey(this._schedulekey(a),b),c?$.extend({},c):null},XF_SCHEDULE.prototype.setitembydatekey=function(a,b,c,d,e,f,g,h){return this.setitembydatekeyex(a,b,c,d,e,f,g,null,h)},XF_SCHEDULE.prototype.setitembydatekeyex=function(a,b,c,d,e,f,g,h,i){var j;return j=this._getiteminfobydatekey(this._schedulekey(a),b),j?this._updateiteminfo(j,b,c,d,e,f,g,h,i):!1},XF_SCHEDULE.prototype.getitembyindex=function(a,b){var c;return c=this._getiteminfobyindex(this._schedulekey(a),b),c?$.extend({},c):null},XF_SCHEDULE.prototype.setitembyindex=function(a,b,c,d,e,f,g,h,i){return this.setitembyindexex(a,b,c,d,e,f,g,h,null,i)},XF_SCHEDULE.prototype.setitembyindexex=function(a,b,c,d,e,f,g,h,i,j){var k;return k=this._getiteminfobyindex(this._schedulekey(a),b),k?this._updateiteminfo(k,c,d,e,f,g,h,i,j):!1},XF_SCHEDULE.prototype.setdate=function(a){var b;return 6!=a.length?!1:(b=a+"01",_xfu.isdate(b)?(this.curr_date=_xfu.date(b),this.curr_yyyymm=a,this.schedule_map={},this.datestyle_map={},this.dateprop_map={},this.itemboxstyle_map={},this._hideselectborder(),void this._showschedule(this.curr_date.year,this.curr_date.month,this.curr_date.day)):!1)},XF_SCHEDULE.prototype.setdatefont=function(a,b,c,d,e,f,g){var h,i,j,k,l,m;if(h=[],h[0]=a,h[1]=_xfu["int"](b),h[2]=c,h[3]=d,h[4]=e,h[5]=f,void 0===g||0==g.length)this.xf_prop.date_font=h,i=_xfc.cssinfo(this.css_datetd),m="none",h[5]===!0?m="line-through":h[4]===!0&&(m="underline"),i["font-family"]=h[0],i["font-size"]=_xfu.pt(h[1]),i["font-weight"]=h[2]?"bold":"normal",i["font-style"]=h[3]?"italic":"normal",i["text-decoration"]=m,this.css_datetd=_xfc.cssstr(i),this.refresh();else{if(8!=g.length)return!1;if(j=this._stylekey(g),k=this.datestyle_map[j],void 0===k&&(k={},this.datestyle_map[j]=k),k.date_font=h,l=this.xf_tbody.find('._xf_schedule_datetd[data-date="'+g+'"]'),0==l.length)return!1;_xfc.font(l,h)}return!0},XF_SCHEDULE.prototype.getdateuserbtnimage=function(a,b){return this._getdateuserbtnprop(a,"image",b)},XF_SCHEDULE.prototype.setdateuserbtnimage=function(a,b,c,d){if(void 0===c)c=-1;else if(c=_xfu.intval(c),c===!1)return!1;return-1!=c&&this._setdateuserbtnprop(a,"width",c,d),this._setdateuserbtnprop(a,"image",b,d)},XF_SCHEDULE.prototype.getdateuserbtnpos=function(a,b){return this._getdateuserbtnprop(a,"pos",b)},XF_SCHEDULE.prototype.setdateuserbtnpos=function(a,b,c){return b=_xfu.intval(b,0,2),b===!1?!1:this._setdateuserbtnprop(a,"pos",b,c)},XF_SCHEDULE.prototype.getdateuserbtnwidth=function(a,b){return this._getdateuserbtnprop(a,"width",b)},XF_SCHEDULE.prototype.setdateuserbtnwidth=function(a,b,c){return b=_xfu.intval(b),b===!1?!1:this._setdateuserbtnprop(a,"width",b,c)},XF_SCHEDULE.prototype.getdateuserbtnleft=function(a,b){return this._getdateuserbtnprop(a,"left",b)},XF_SCHEDULE.prototype.setdateuserbtnleft=function(a,b,c){return b=_xfu.intval(b),b===!1?!1:this._setdateuserbtnprop(a,"left",b,c)},XF_SCHEDULE.prototype.getdateuserbtnright=function(a,b){return this._getdateuserbtnprop(a,"right",b)},XF_SCHEDULE.prototype.setdateuserbtnright=function(a,b,c){return b=_xfu.intval(b),b===!1?!1:this._setdateuserbtnprop(a,"right",b,c)},XF_SCHEDULE.prototype._getdateuserbtnprop=function(a,b,c){var d;return a=_xfu.intval(a,0,1),a===!1?-1:(d="date_userbtn"+a+"_"+b,void 0===c||0==c.length?this.xf_prop[d]:8!=c.length?-1:this._getdatepropvalue(c,d))},XF_SCHEDULE.prototype._setdateuserbtnprop=function(a,b,c,d){var e,f,g,h,i;if(a=_xfu.intval(a,0,1),a===!1)return-1;if(e="date_userbtn"+a+"_"+b,void 0===d||0==d.length)this.xf_prop[e]=c,this.refresh();else{if(8!=d.length)return!1;if(f=this._propkey(d),g=this.dateprop_map[f],void 0===g&&(g={},this.dateprop_map[f]=g),g[e]=c,h=this.xf_tbody.find("._xf_schedule_td_dateuserbtn_"+a+'[data-date="'+d+'"]'),0==h.length)return!1;"left"==b?h.css({left:_xfu.px(c),right:"auto"}):"right"==b?h.css({left:"auto",right:_xfu.px(c)}):"width"==b?h.css("width",_xfu.px(c)):"pos"==b?(i={display:"block",left:"auto",right:"auto"},0==c?i.display="none":1==c?i.left=_xfu.px(this.xf_prop.date_userbtn1_left):2==c&&(i.right=_xfu.px(this.xf_prop.date_userbtn1_right)),h.css(i)):"image"==b&&h.css("background-image",_xfx.imageurlfunc(c))}return!0},XF_SCHEDULE.prototype.setdatebackcolor=function(a,b,c,d){var e,f,g,h,i;if(h=_xfu.rgb(a,b,c),void 0===d||0==d.length)this.xf_prop.date_backcolor=h,e=_xfc.cssinfo(this.css_datetd),e["background-color"]=_xfu.rgbfunc(this.xf_prop.date_backcolor),this.css_datetd=_xfc.cssstr(e),this.refresh();else{if(8!=d.length)return!1;if(f=this._stylekey(d),g=this.datestyle_map[f],void 0===g&&(g={},this.datestyle_map[f]=g),g.date_backcolor=h,i=this.xf_tbody.find('._xf_schedule_datetd[data-date="'+d+'"]'),0==i.length)return!1;i.css("background-color",_xfu.rgbfunc(h))}return!0},XF_SCHEDULE.prototype.getselectdate=function(){var a;return null==this.xf_selectborder_td?"":(a=this.xf_selectborder_td.data("date"),a?_xfu.str(a):"")},XF_SCHEDULE.prototype.setselectdate=function(a){var b;return 0==a.length?(this._hideselectborder(),void(this.xf_selectborder_td=null)):(b=this.xf_tbody.find('._xf_schedule_datetd[data-date="'+a+'"]'),0==b.length?!1:(this._showselectborder(b),!0))},XF_SCHEDULE.prototype.setitemboxbackcolor=function(a,b,c,d){var e,f,g,h,i;if(h=_xfu.rgb(a,b,c),void 0===d||0==d.length)this.xf_prop.itembox_backcolor=h,e=_xfc.cssinfo(this.css_itemtd),e["background-color"]=_xfu.rgbfunc(this.xf_prop.itembox_backcolor),this.css_itemtd=_xfc.cssstr(e),this.refresh();else{if(8!=d.length)return!1;if(f=this._stylekey(d),g=this.itemboxstyle_map[f],void 0===g&&(g={},this.itemboxstyle_map[f]=g),g.itembox_backcolor=h,i=this.xf_tbody.find('._xf_schedule_itemtd[data-date="'+d+'"]'),0==i.length)return!1;i.css("background-color",_xfu.rgbfunc(h))}return!0},XF_SCHEDULE.prototype.setitemboxbackimage=function(a,b){var c,d,e,f;if(void 0===b||0==b.length)this.xf_prop.itembox_backimage=a,c=_xfc.cssinfo(this.css_itemtd),c["background-image"]=_xfx.imageurlfunc(a),this.css_itemtd=_xfc.cssstr(c),this.refresh();else{if(8!=b.length)return!1;if(d=this._stylekey(b),e=this.itemboxstyle_map[d],void 0===e&&(e={},this.itemboxstyle_map[d]=e),e.itembox_backimage=a,f=this.xf_tbody.find('._xf_schedule_itemtd[data-date="'+b+'"]'),0==f.length)return!1;f.css("background-image",_xfx.imageurlfunc(a))}return!0},XF_SCHEDULE.prototype.setitemextendablebydate=function(a,b){var c,d,e,f,g,h;for(e=this._schedulekey(a),f=this.schedule_map[e],h=f.length,g=0;h>g;g++)f[g].extendable=b;return c=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a+'"]'),0==c.length?!1:(d=c.children("._xf_schedule_td_item"),0==d.length?!1:(d.data("extendable",b?"1":"0"),!0))},XF_SCHEDULE.prototype.setitemextendablebydatekey=function(a,b,c){var d,e,f,g;return f=this._schedulekey(a),g=this._getiteminfobydatekey(f,b),null==g?!1:(g.extendable=c,d=this.xf_tbody.find('._xf_schedule_td_itembox[data-date="'+a+'"]'),0==d.length?!1:(e=d.children('._xf_schedule_td_item[data-key="'+b+'"]'),0==e.length?!1:(e.data("extendable",c?"1":"0"),!0)))},XF_SCHEDULE.prototype.setitemextendablebykey=function(a,b){var c,d;return a.length<=0?!1:(d=this._getiteminfobykey(a),null==d?!1:(d.extendable=b,c=this.xf_tbody.find('._xf_schedule_td_item[data-key="'+a+'"]'),0==c.length?!1:(c.data("extendable",b?"1":"0"),!0)))},XF_SCHEDULE.prototype.settoday=function(a){return 8!=a.length?!1:_xfu.isdate(a)?(this.today_date=_xfu.date(a),!0):!1},XF_SCHEDULE.prototype.on_object_resize=function(a){this._refreshselectborder()},XF_SCHEDULE.prototype.on_object_mousedown=function(a){var b,c;factory.registermouseevent(this,a),this.xf_item_resize=null,this.select_range_info.xf_start_td=null,0==a.button&&(b=$(a.target),b.hasClass("_xf_schedule_td_item_resize")&&(this.xf_item_resize=b.closest("._xf_schedule_td_item"),this.xf_table.find("._xf_schedule_td").css("cursor","nw-resize")),this.select_range_info.xf_start_td=this._findtdbyevent(a),null!=this.select_range_info.xf_start_td&&(c=this._gettdinfo(this.select_range_info.xf_start_td),null!=c&&(this.select_range_info.start_date=c.date,this.select_range_info.xf_end_td=null,this.select_range_info.end_date="")))},XF_SCHEDULE.prototype.on_object_mouseup=function(a){var b,c;this.xf_table.find("._xf_schedule_td").css("cursor","default"),this.xf_item_drag||(factory.registermouseevent(this,a),this.select_range_info.start_date!=this.select_range_info.end_date&&(this.xf_item_resize?(b=this._getiteminfobyobject(this.xf_item_resize),c={xf_component:this,event_name:"on_itemselectdate",is_fire_async:!0},factory._fireevent(c,this,_xfu.str(this.select_range_info.start_date),_xfu.str(this.select_range_info.end_date),b.date,b.index,b.key,b.title,b.memo,b.image)):(c={xf_component:this,event_name:"on_selectdate",is_fire_async:!0},factory._fireevent(c,this,_xfu.str(this.select_range_info.start_date),_xfu.str(this.select_range_info.end_date)))),this._hideselectdaterange(!0))},XF_SCHEDULE.prototype.on_object_mousemove=function(a){var b,c,d,e;if(null!=this.select_range_info.xf_start_td)b=this._findtdbyevent(a),b&&(c=this._gettdinfo(b),this._showselectdaterange(this.select_range_info.start_date,c.date));else if(d=$(a.target),e=d.closest("._xf_schedule_td_item"),e!==this.xf_item_mousehover){if(this.xf_item_mousehover&&this.xf_itemresize_mousehover.hide(),"0"===e.data("extendable"))return;this.xf_item_mousehover=e,this.xf_itemresize_mousehover=this.xf_item_mousehover.children("._xf_schedule_td_item_resize"),this.xf_itemresize_mousehover.show()}},XF_SCHEDULE.prototype.on_table_click=function(a){return this._on_table_click(a,!1)},XF_SCHEDULE.prototype._on_table_click=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;return factory.registermouseevent(this,a),c=$(a.target),e=c.closest("._xf_schedule_td"),e.length>0&&this.xf_prop.selectborder_show&&this._showselectborder(e),d=c.closest("._xf_schedule_td_item"),d.length>0?(f=this._getiteminfobyobject(d),m="on_itemclick",b&&(m="on_itemrclick"),void factory._fireevent({xf_component:this,event_name:m,is_fire_async:!0},this,f.date,f.index,f.key,f.title,f.memo,f.image)):(h=c.closest("._xf_schedule_td_badge"),h.length>0?(k=_xfu.str(h.data("date")),l=_xfu["int"](h.text()),m="on_hiddencountclick",b&&(m="on_hiddencountrclick"),void factory._fireevent({xf_component:this,event_name:m,is_fire_async:!0},this,k,l)):(i=c.closest("._xf_schedule_td_dateuserbtn"),i.length>0?(k=_xfu.str(i.data("date")),j=_xfu["int"](i.data("button_index")),m="on_dateuserbtnclick",b&&(m="on_dateuserbtnclick"),void factory._fireevent({xf_component:this,event_name:m,is_fire_async:!0},this,k,j)):void(e.length>0&&(g=this._gettdinfo(e),m="on_dateclick",b&&(m="on_daterclick"),factory._fireevent({xf_component:this,event_name:m,is_fire_async:!0},this,g.date)))))},XF_SCHEDULE.prototype.on_table_contextmenu=function(a){var b,c,d;a.preventDefault(),this._on_table_click(a,!0),this.xf_prop.popupmenu_show&&(b=$(a.target),c=b.closest("._xf_schedule_td_item"),c.length>0?(this.xf_item_context=c,this.xf_td_context=b.closest("._xf_schedule_td"),this.xf_context_date.hide(),this.xf_context_item.show(a.originalEvent.pageX,a.originalEvent.pageY,a)):(this.xf_item_context=null,d=b.closest("._xf_schedule_td"),d.length>0&&(this.xf_td_context=b.closest("._xf_schedule_td"),this.xf_context_item.hide(),this.xf_context_date.show(a.originalEvent.pageX,a.originalEvent.pageY,a))))},XF_SCHEDULE.prototype.on_context_click=function(a){var b,c;switch(a){case"day_delete":b=this._gettdinfo(this.xf_td_context),factory._fireevent({xf_component:this,event_name:"on_menudaydelete",is_fire_async:!0},this,b.date);break;case"item_add":b=this._gettdinfo(this.xf_td_context),factory._fireevent({xf_component:this,event_name:"on_menuitemadd",is_fire_async:!0},this,b.date);break;case"item_edit":c=this._getiteminfobyobject(this.xf_item_context),factory._fireevent({xf_component:this,event_name:"on_menuitemedit",is_fire_async:!0},this,c.date,c.index,c.key,c.title,c.memo,c.image);break;case"item_delete":c=this._getiteminfobyobject(this.xf_item_context),factory._fireevent({xf_component:this,event_name:"on_menuitemdelete",is_fire_async:!0},this,c.date,c.index,c.key,c.title,c.memo,c.image)}},XF_SCHEDULE.prototype.on_object_dragstart=function(a){var b,c,d,e;return e=$(a.target),e.hasClass("_xf_schedule_td_item_resize")?!1:(d=e.closest("._xf_schedule_td_item"),0==d.length?!1:(this.xf_item_drag=d,this.event_item_info=this._getiteminfobyobject(d),this._hideselectdaterange(!0),c={xf_component:this,event_name:"on_begindrag"},b=factory._fireevent(c,this,this.event_item_info.date,this.event_item_info.index,this.event_item_info.key,this.event_item_info.title,this.event_item_info.memo,this.event_item_info.image),0==b?!1:void 0))},XF_SCHEDULE.prototype.on_object_dragover=function(a){var b,c,d;this.xf_item_drag&&(b=$(a.target),c=b.closest("._xf_schedule_td"),0!=c.length&&(d=this._gettdinfo(c),d.date!=this.event_item_info.date&&a.preventDefault()))},XF_SCHEDULE.prototype.on_object_drop=function(a){var b,c,d,e;a.preventDefault(),this.xf_item_drag&&(b=$(a.target),d=b.closest("._xf_schedule_td"),0!=d.length&&(e=this._gettdinfo(d),c={xf_component:this,event_name:"on_enddrag"},factory._fireevent(c,this,e.date,this.event_item_info.date,this.event_item_info.index,this.event_item_info.key,this.event_item_info.title,this.event_item_info.memo,this.event_item_info.image),this.xf_item_drag=null,this.event_item_info=null))};