/* 2020-10-30 18:04 */ function XF_NUMBER(a,b){this._init(a,b),_xfx.islistviewtemplate(this,b)||(this._prop(b),this._box(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this._create())}XF_NUMBER.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_FIELD,b),this.control_field_kind=XFD_CTRLKIND_FIELD_NUMERIC,this.data_type=XFD_DATA_NUMBER,this.is_edit_cancel=!1,this.event_keydown=null,this.count_keydown=0,this.value="",this.fmt_value_buffer=[],this.value_on_focus="",this.cursor_on_blur=-1,this.focused_by=0,this.cursor_pos_setvalue=-1,this.cursor_pos_keydown=0,this.is_intvalue_keydown=!0,this.int_value_length=0,this.float_value_length=0,this.int_value_max_length=0,this.xf_selectbox=null,this.pattern="",this.pattern_type=XFD_PATTERN_TYPE_NONE,this.xf_regexp=null,this.number_pattern_info=null,this.decimal_separator_expr=null,this.pattern_front_symbol_length=0,this.pattern_rear_symbol_length=0,this.before_key_event={},this.is_input_fillzero=!1,this.is_validalertbox_show=!0},XF_NUMBER.prototype._prop=function(a){this.xf_prop={style:"",custom_input_attr:"",custom_input_class:"",font:["굴림체",9,0,0,0,0],fore_color:[0,0,0],back_color:[255,255,255],back_color_opacity:10,transparent:!1,border:1,border_radius:"0",border_color:[180,180,180],border_ex:"",disable_style_use:!1,fore_color_disable:[0,0,0],back_color_disable:[255,255,255],border_color_disable:[180,180,180],focus_style_use:!1,fore_color_focus:[0,0,0],back_color_focus:[255,255,255],border_color_focus:[180,180,180],back_image:"",back_imagesize:0,back_imagefillstyle:0,back_imagehorzalign:0,back_imagevertalign:0,apply_inputtypecolor:!0,image:"",mousehover:!1,mousehover_forecolor:[0,0,255],mousehover_backcolor:[255,255,255],mousehover_gradienteffect:0,mousehover_gradientstartcolor:[255,255,255],mousehover_gradientendcolor:[225,225,225],box_shadow_effect:!0,button_size:17,resize_dir:0,mouse_cursor:1,max_length:15,max_length_includedot:!0,min_length:0,meta_maxlength:0,max_value:XFD_MAX_VALUE,min_value:XFD_MIN_VALUE,input_fillzero:0,pattern:"",pattern_mask:"",pattern_front_symbol:"",pattern_rear_symbol:"",patternapply_blank:0,horz_align:0,vert_align:1,text_margin:[1,1,1,1],dup_name:"",allow_dup:!1,auto_dup:!1,auto_skip:!0,auto_complete:!1,input_type:0,inputtype_optionkind:0,enable:!0,hidden:!1,default_value:"",default_value_usage:0,hint_text:"",enterstop:!0,tabstop:!0,focus_select:0,tooltip:"",round_type:0,keyinstart_intpart:!0,print_prefix:"",popupmenu_show:!0,text_wordellipsis:!1,mobile_keyboard:0,decimal_separator:factory_xf_param.USER_DECIMAL_SEPARATOR,thousands_separator:factory_xf_param.USER_THOUSANDS_SEPARATOR},this.event_name_arr=["on_prekeydown","on_keydown","on_change","on_focusout","on_focusin","on_validation","on_click","on_dblclick","on_rclick","on_changed"],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),_xfx.xdataset(this,!0),this._css(a),this._pattern(),0==this.xf_prop.focus_select&&(void 0===factory_xf_param.FOCUS_SELECT_FIELD?this.xf_prop.focus_select=1:this.xf_prop.focus_select=factory_xf_param.FOCUS_SELECT_FIELD)},XF_NUMBER.prototype._pattern=function(){var a;this.pattern=this.xf_prop.pattern,this.pattern_type=XFD_PATTERN_TYPE_NONE,this.xf_regexp=null,this.number_pattern_info={fill_zero_count:0,blank_is_zero:!1,zero_is_blank:!1,places:0,allow_minus:!1},this.int_value_pattern_max_length=0,0!=factory_xf_param.INVALID_VALUE_BY_API&&this.xf_prop.pattern.length>0&&(a=_xfu.numberpatterninfo(this.xf_prop.pattern),this.int_value_pattern_max_length=a.int_max_length,a.max_length>0&&(this.xf_prop.max_length=a.max_length)),""==this.pattern?(this.pattern=_xfu.numberpattern(this.xf_prop.max_length,factory_xf_param.BLANK_PATTERN_ALLOW_MINUS),this.pattern_type=XFD_PATTERN_TYPE_NUMBER):this.pattern.substring(0,2)=="9"+factory_xf_param.SCREEN_DECIMAL_SEPARATOR?this.pattern_type=XFD_PATTERN_TYPE_NUMBER:this.pattern_type=_xfp.type(this.pattern,XFD_PATTERN_TYPE_NUMBER,factory_xf_param.SCREEN_THOUSANDS_SEPARATOR),this.pattern_type==XFD_PATTERN_TYPE_CUSTOM?this.xf_regexp=_xfp.regexp(this.pattern):this.number_pattern_info=_xfp.numberpatterninfo(this.pattern,factory_xf_param.SCREEN_DECIMAL_SEPARATOR,factory_xf_param.SCREEN_THOUSANDS_SEPARATOR),this.pattern_front_symbol_length=this.xf_prop.pattern_front_symbol.length,this.pattern_rear_symbol_length=this.xf_prop.pattern_rear_symbol.length,"."!=this.xf_prop.decimal_separator&&(this.decimal_separator_expr=new RegExp("[\\"+this.xf_prop.decimal_separator+"]","g")),this.int_value_max_length=this.xf_prop.max_length,this.number_pattern_info.places>0&&(this.int_value_max_length=this.xf_prop.max_length-this.number_pattern_info.places-1),this.number_pattern_info.allow_minus&&factory_xf_param.BLANK_MINUS_ONE_CHAR&&this.xf_prop.pattern.length>0&&this.int_value_max_length--},XF_NUMBER.prototype._box=function(){this._input_box("_xf_number")},XF_NUMBER.prototype._dom=function(){this.xf_selectbox=xf_screen._getfieldselectbox()},XF_NUMBER.prototype._offevent=function(){this._input_offevent("_xf_number"),_xfj.offevent(this.xf_object,["paste"])},XF_NUMBER.prototype._event=function(){this._input_event("_xf_number"),this.xf_object.on("paste",$.proxy(this.on_input_paste,this)),this.xf_prop.xf_button&&_xfj.offevent(this.xf_prop.xf_button,["mousedown","click"]),this.xf_prop.xf_button&&(this.xf_prop.xf_button.on("mousedown",$.proxy(this.on_button_mousedown,this)),this.xf_prop.xf_button.on("click",$.proxy(this.on_button_click,this)))},XF_NUMBER.prototype._create=function(){this._input_create()},XF_NUMBER.prototype._getvalue=function(){var a,b,c;return a=-1==this.xdataset_row_index?this.xf_xdataset._getposdatabyname(this.xdataset_column_type,this.xdataset_column_id):this.xf_xdataset._getdatabyname(this.xdataset_row_index,this.xdataset_column_type,this.xdataset_column_id),0==a.length?a:(c=this._unfmt(a,factory_xf_param.VALUE_DECIMAL_SEPARATOR),b=this._fmt(c,factory_xf_param.VALUE_DECIMAL_SEPARATOR,XFD_DATA_CHANGE_BY_API),factory_xf_param.USER_DECIMAL_SEPARATOR!==factory_xf_param.VALUE_DECIMAL_SEPARATOR?(c=this._unfmt(b,factory_xf_param.USER_DECIMAL_SEPARATOR),c=c.replace(factory_xf_param.USER_DECIMAL_SEPARATOR,factory_xf_param.VALUE_DECIMAL_SEPARATOR)):c=this._unfmt(b,factory_xf_param.VALUE_DECIMAL_SEPARATOR),c)},XF_NUMBER.prototype._setvalue=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(0==factory_xf_param.INVALID_VALUE_BY_API||0!=this.int_value_pattern_max_length||b.event_type!=XFD_DATA_CHANGE_BY_API){if(void 0===b.is_fire_async&&(b.is_fire_async=!0),1==this.is_edit_cancel&&b.is_fire_editcomplete&&this.xf_prop.on_editcomplete)return this.xf_selectbox.hideselectbox(!1),void this.xf_prop.on_editcomplete(this,this.is_edit_cancel);if(this.is_input_fillzero=!1,l=0,b.is_close_selectbox&&this.xf_selectbox.hideselectbox(!1),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(c=_xfj.position(this.xf_object.get(0))),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),g=!1,d="",this.xf_object&&(d=this.xf_object.val()),a=_xfu.str(a),o=factory_xf_param.VALUE_DECIMAL_SEPARATOR,b.event_type!=XFD_DATA_CHANGE_BY_BLUR&&b.event_type!=XFD_DATA_CHANGE_BY_KEYUP||(o=this.xf_prop.decimal_separator),0==a.length&&b.event_type!==XFD_DATA_CHANGE_BY_KEYUP&&this.number_pattern_info.blank_is_zero&&this.xf_prop.patternapply_blank>0&&(a="0"),0==a.length?(e="",f=""):(factory_xf_param.INVALID_VALUE_BY_API>0&&b.event_type==XFD_DATA_CHANGE_BY_API&&(s=!1,this.int_value_pattern_max_length>0&&(r=a.split(factory_xf_param.VALUE_DECIMAL_SEPARATOR),r[0]=r[0].replace(/,/g,""),k=r[0].length,"-"==r[0].charAt(0)&&k--,k>this.int_value_pattern_max_length?s=!0:(h=parseFloat(a),isNaN(h)?s=!0:a.toLowerCase().indexOf("e")>=0?s=!0:h<this.xf_prop.min_value||h>this.xf_prop.max_value?s=!0:0==this.number_pattern_info.allow_minus&&0>h&&(s=!0))),1==s&&(a=this._invalidvaluebyapi(!0,a)),0==s&&this._invalidvaluebyapi(!1,a)),f=0!=factory_xf_param.INVALID_VALUE_BY_API&&0==this.int_value_pattern_max_length?_xfp._number(a,1e3,!0):this._unfmt(a,o),0!=factory_xf_param.INVALID_VALUE_BY_API&&0==this.int_value_pattern_max_length?e=f:(e=this._fmt(f,o,b.event_type),b.event_type!=XFD_DATA_CHANGE_BY_KEYUP&&(f=this._unfmt(e,o)))),!this.number_pattern_info.zero_is_blank||"0"!=e&&"-0"!=e||0!=this.number_pattern_info.places&&b.event_type==XFD_DATA_CHANGE_BY_KEYUP||(e=""),e.length>0&&(this.pattern_front_symbol_length>0||this.pattern_rear_symbol_length>0)&&(1==e.length&&b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(this.cursor_pos_setvalue=1+this.pattern_front_symbol_length),e="-"==e.charAt(0)?e.charAt(0)+this.xf_prop.pattern_front_symbol+e.substr(1)+this.xf_prop.pattern_rear_symbol:this.xf_prop.pattern_front_symbol+e+this.xf_prop.pattern_rear_symbol),1==_xfu.ismobile()&&1==this.xf_prop.mobile_keyboard&&b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(e=f),this.fmt_value_buffer=e.split(""),d==e&&b.event_type!=XFD_DATA_CHANGE_BY_KEYUP||(g=!0,this.xf_object&&this.xf_object.val(e)),f!=this.value&&(null!=this.decimal_separator_expr?this.value=f.replace(this.decimal_separator_expr,"."):this.value=f,this.int_value_length=this.value.length,this.float_value_length=0,this.number_pattern_info.places>0&&(m=f.split(factory_xf_param.VALUE_DECIMAL_SEPARATOR),2==m.length&&(this.int_value_length=m[0].length,this.float_value_length=m[1].length)),this.number_pattern_info.allow_minus&&factory_xf_param.BLANK_MINUS_ONE_CHAR&&this.xf_prop.pattern.length>0&&this.int_value_length>0&&"-"==this.value.charAt(0)&&this.int_value_length--,b.is_set_xdataset&&this._setxdatasetvalue(this.value),b.is_fire_event&&(factory._fireevent({xf_component:this,event_name:"on_change"},this),this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchange(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value,!0),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(q=this.value_on_focus,this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:b.is_fire_async},this,q,this.value),this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchanged(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,q,this.value,!0))),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(1==this.xf_selectbox.isshowselectbox()?this.xf_selectbox.refreshselectbox(!0):1!=b.is_close_selectbox&&this.value.length>0&&this.xf_selectbox.showselectbox(this))),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&g&&(-1!=this.cursor_pos_setvalue?c=this.cursor_pos_setvalue:this.is_input_fillzero?c="-"==e.charAt(0)?2+this.pattern_front_symbol_length:1+this.pattern_front_symbol_length:d.length<e.length&&(c+=e.length-d.length),this.pattern_rear_symbol_length>0&&c>=e.length&&(c=e.length-this.pattern_rear_symbol_length),_xfj.position(this.xf_object.get(0),c),this.cursor_pos_setvalue=-1),b.is_set_focus&&(0==this.is_has_focus?this.setfocus():b.event_type==XFD_DATA_CHANGE_BY_API&&2!=this.xf_prop.focus_select&&this.setsel(0,-1)),i=!0,this.is_validalertbox_show=!0,b.event_type==XFD_DATA_CHANGE_BY_BLUR){if(0==this.value.length?(1==this.xf_prop.input_type||3==this.xf_prop.input_type||void 0!==this.xf_prop.data_inputtype&&"1"==this.xf_prop.data_inputtype)&&(i=!1,this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:"",alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("필수 항목입니다!","Required Value!"),valid_type:"required",event_type:XFD_DATA_CHANGE_BY_BLUR,use_alertbox:!0})):(this.value.length>0&&(h=parseFloat(this.value),1==isNaN(h)&&(i=!1,this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("유효하지 않은 값입니다!","Invalid Number!"),valid_type:"invalid_number",event_type:XFD_DATA_CHANGE_BY_BLUR,use_alertbox:!0})),1==i&&(h<this.xf_prop.min_value||h>this.xf_prop.max_value)&&(i=!1,p=[],"ko"==factory_xf_param.USER_LANGUAGE?(p.push("유효하지 않은 값입니다!"),p.push("유효 값 범위: "+this.xf_prop.min_value+" ~ "+this.xf_prop.max_value)):(p.push("Invalid value!"),p.push("Value Range: "+this.xf_prop.min_value+" ~ "+this.xf_prop.max_value)),this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:factory._userlang("검증","Validation"),alert_message:p.join("\n"),valid_type:h<this.xf_prop.min_value?"value_min":"value_max",event_type:XFD_DATA_CHANGE_BY_BLUR,min_value:this.xf_prop.min_value,max_value:this.xf_prop.max_value,use_alertbox:!0}))),1==i&&this.value.length>0&&(this.value.length<this.xf_prop.min_length||this.value.length>this.xf_prop.max_length)&&(i=!1,p=[],"ko"==factory_xf_param.USER_LANGUAGE?(p.push("유효하지 않은 값입니다!"),p.push("유효 길이 범위: "+this.xf_prop.min_length+" ~ "+this.xf_prop.max_length)):(p.push("Invalid value!"),p.push("Length Range: "+this.xf_prop.min_length+" ~ "+this.xf_prop.max_length)),this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{component_value:this.value,alert_title:factory._userlang("검증","Validation"),alert_message:p.join("\n"),valid_type:this.value.length<this.xf_prop.min_length?"length_min":"length_max",event_type:XFD_DATA_CHANGE_BY_BLUR,min_length:this.xf_prop.min_length,max_length:this.xf_prop.max_length,use_alertbox:!0}))),1==i&&this.xf_prop.xf_grid&&(n=this.xf_prop.xf_grid.on_item_editvalidation(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value),0===n?(i=!1,this.is_validalertbox_show=!1):2===n&&(this.next_focus_dir=0)),0==i&&this.xf_prop.create_mode===_XFD_CREATEMODE_GRID)return 0==this.is_validalertbox_show&&(j=this,setTimeout(function(){j.xf_prop.xf_grid._setselectitem(j.xf_prop.row_index,j.xf_prop.sub_row_index,j.xf_prop.column_index,!0,!1,!1,!0),j.xf_object.css("color",_xfu.rgbfunc(j.xf_prop.fore_color)),j.setfocus()},0)),!1;1==i&&(n=factory._fireevent({xf_component:this,event_name:"on_validation"},this),0==n&&(i=!1)),1==i&&this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID&&factory._setdupdata(this,this.value),b.is_fire_event&&this.value_on_focus!=this.value&&(q=this.value_on_focus,this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:!0},this,q,this.value)),this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_focusout",is_fire_async:!0},this,this.focusout_type)}b.is_fire_editcomplete&&this.xf_prop.on_editcomplete&&this.xf_prop.on_editcomplete(this,this.is_edit_cancel),this._autoskip(this,b.event_type)}},XF_NUMBER.prototype._autoskip=function(a,b){var c,d;if(c=-1,0==a.value.length)return 0;if(b==XFD_DATA_CHANGE_BY_KEYUP||b==XFD_DATA_CHANGE_BY_API&&1==a.ishasfocus()){if(this.number_pattern_info.allow_minus&&factory_xf_param.BLANK_MINUS_ONE_CHAR&&this.xf_prop.pattern.length>0){if("-"==a.value.charAt(0)){if(a.value.length<a.xf_prop.max_length)return 0}else if(a.value.length+1<a.xf_prop.max_length)return 0}else if(a.value.length<a.xf_prop.max_length)return 0;if(1==a.xf_prop.auto_skip){if(a.xf_prop.create_mode==_XFD_CREATEMODE_GRID)return a.next_focus_dir=1,a.xf_prop.xf_grid.setfocus(),0;a.event_keydown&&b==XFD_DATA_CHANGE_BY_KEYUP&&factory._firekeyevent(a,a.event_keydown),void 0!==a.value&&void 0!==a.value_on_focus&&a.value_on_focus!==a.value&&(d=a.value_on_focus,a.value_on_focus=a.value,factory._fireevent({xf_component:a,event_name:"on_changed",is_fire_async:!0},a,d,a.value)),a.focusout_type=2,c=_xfx.focusmove(a,!0)}else c=!1,void 0!==a.value&&void 0!==a.value_on_focus&&a.value_on_focus!==a.value&&(d=a.value_on_focus,a.value_on_focus=a.value,factory._fireevent({xf_component:a,event_name:"on_changed",is_fire_async:!0},a,d,a.value));return c===!1?0:1}return c},XF_NUMBER.prototype._fillplacezero=function(a,b){var c;return 0==this.number_pattern_info.fill_zero_count?a:this.number_pattern_info.places<1?a:0==a.length?"":(c=b==XFD_DATA_CHANGE_BY_BLUR||b==XFD_DATA_CHANGE_BY_KEYUP?a.split(this.xf_prop.decimal_separator):a.split(factory_xf_param.VALUE_DECIMAL_SEPARATOR),1==c.length?a+this.xf_prop.decimal_separator+_xfu.pad("",this.number_pattern_info.fill_zero_count,"0"):2==c.length?a+_xfu.pad("",this.number_pattern_info.fill_zero_count-c[1].length,"0"):a)},XF_NUMBER.prototype._fmt=function(a,b,c){var d,e,f,g;if(g=!1,c==XFD_DATA_CHANGE_BY_KEYUP&&factory.ismobile()&&(g=!0),c==XFD_DATA_CHANGE_BY_KEYUP&&!this.xf_prop.keyinstart_intpart&&this.number_pattern_info.places>0&&(a=this._unfmtdecimalseparator(a,b)),c==XFD_DATA_CHANGE_BY_BLUR&&(a=this._fillplacezero(a,c)),c==XFD_DATA_CHANGE_BY_KEYUP&&this.xf_prop.input_fillzero>0&&(1==a.length&&"-"!=a?(a+=_xfu.pad("",this.xf_prop.input_fillzero,"0"),this.is_input_fillzero=!0):2==a.length&&"-"==a.charAt(0)&&(a+=_xfu.pad("",this.xf_prop.input_fillzero,"0"),this.is_input_fillzero=!0)),0==this.number_pattern_info.places?a=this.number_pattern_info.allow_minus&&factory_xf_param.BLANK_MINUS_ONE_CHAR&&this.xf_prop.pattern.length>0?"-"==a.charAt(0)?"-"+_xfu.trimlength(a.substr(1),this.int_value_max_length,g):_xfu.trimlength(a,this.int_value_max_length,g):_xfu.trimlength(a,this.xf_prop.max_length,g):(f=a.split(b),this.number_pattern_info.allow_minus&&factory_xf_param.BLANK_MINUS_ONE_CHAR&&this.xf_prop.pattern.length>0?"-"==a.charAt(0)?f[0]="-"+_xfu.trimlength(f[0].substr(1),this.int_value_max_length,g):f[0]=_xfu.trimlength(f[0],this.int_value_max_length,g):f[0]=_xfu.trimlength(f[0],this.xf_prop.max_length-this.number_pattern_info.places-1,g),2!=f.length||c!=XFD_DATA_CHANGE_BY_KEYUP&&this.pattern_type!=XFD_PATTERN_TYPE_CUSTOM||(f[1]=_xfu.trimlength(f[1],this.number_pattern_info.places)),a=f.join(b)),this.pattern_type==XFD_PATTERN_TYPE_NUMBER||this.pattern_type==XFD_PATTERN_TYPE_MONEY){if(c==XFD_DATA_CHANGE_BY_KEYUP?(f=a.split(this.xf_prop.decimal_separator),2==f.length&&(e=f[1].length)):e=this.number_pattern_info.fill_zero_count,e>this.number_pattern_info.places&&(e=this.number_pattern_info.places),c==XFD_DATA_CHANGE_BY_KEYUP){if(a.charAt(0)==b)return a;if("-"==a.charAt(0)&&a.charAt(1)==b)return a}this.pattern_type==XFD_PATTERN_TYPE_NUMBER?d=_xfp.number(a,this.number_pattern_info.places,this.number_pattern_info.allow_minus,e,this.xf_prop.round_type,b):this.pattern_type==XFD_PATTERN_TYPE_MONEY&&(d=_xfp.money(a,this.number_pattern_info.places,this.number_pattern_info.allow_minus,e,this.xf_prop.round_type,b,this.xf_prop.decimal_separator,this.xf_prop.thousands_separator)),c!=XFD_DATA_CHANGE_BY_KEYUP&&this.number_pattern_info.places>0&&(d=_xfp.trimlast(d,this.xf_prop.decimal_separator))}else d=this.pattern_type==XFD_PATTERN_TYPE_CUSTOM?_xfp.exp(a,this.xf_regexp):a;return!this.number_pattern_info.zero_is_blank||"0"!=d&&"-0"!=d||0!=this.number_pattern_info.places&&c==XFD_DATA_CHANGE_BY_KEYUP||(d=""),d},XF_NUMBER.prototype._unfmt=function(a,b){var c;return c=a,c=c.replace(_xfp.expr_hangul,""),c=_xfx.unpatternsymbol(this,c),this.pattern_type==XFD_PATTERN_TYPE_NUMBER?(void 0===b&&(b=factory_xf_param.VALUE_DECIMAL_SEPARATOR),c=_xfp._number(c,this.number_pattern_info.places,this.number_pattern_info.allow_minus,b)):this.pattern_type==XFD_PATTERN_TYPE_MONEY?(void 0===b&&(b=factory_xf_param.VALUE_DECIMAL_SEPARATOR),c=_xfp._money(c,this.number_pattern_info.places,this.number_pattern_info.allow_minus,b)):this.pattern_type==XFD_PATTERN_TYPE_CUSTOM&&(c=_xfp._exp(c,this.xf_regexp)),c},XF_NUMBER.prototype._unfmtdecimalseparator=function(a,b){var c;return"-"==a?(this.cursor_pos_setvalue=1+this.pattern_front_symbol_length,a):(a=a.replace(_xfp.expr_int_minus,""),1==a.length&&(c=!0),a=_xfu["float"](a),a*=Math.pow(10,-1*this.number_pattern_info.places),a=a.toFixed(this.number_pattern_info.places),a=_xfu.str(a),c&&(this.cursor_pos_setvalue=a.length),a)},XF_NUMBER.prototype._isvalidminuskeydown=function(a){var b,c,d,e;if(0==this.number_pattern_info.allow_minus)return!1;if(b=_xfj.select(this.xf_object.get(0)),c=b.end-b.start,0==c&&a.indexOf("-")>=0)return!1;for(e=0;e<b.start;e++)if("-"==this.fmt_value_buffer[e])return!1;for(d=this.fmt_value_buffer.length,e=b.end+1;d>=e;e++)if("-"==this.fmt_value_buffer[e])return!1;return!0},XF_NUMBER.prototype._isvaliddotkeydown=function(a){return(0==factory_xf_param.INVALID_VALUE_BY_API||this.int_value_pattern_max_length>0)&&this.number_pattern_info.places<1?!1:0==a.length?!1:!(a.indexOf(this.xf_prop.decimal_separator)>=0)},XF_NUMBER.prototype._isvalidzerokeydown=function(a){if(this.pattern_type==XFD_PATTERN_TYPE_MONEY)if(1==a.length){if("0"==a.charAt(0))return!1}else if(a=_xfx.unpatternsymbol(this,a),"-0"==a||"0"==a)return!1;return!0},XF_NUMBER.prototype._iskeyselectboxselect=function(a){var b;return a.which==XFD_KEY_ENTER&&1==this.xf_selectbox.isshowselectbox()?(b=this.xf_selectbox.getselecteditemtext(),void 0!==b&&b.length>0&&this._setvalue(b,{is_fire_event:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!0,is_fire_editcomplete:!0}),!0):!1},XF_NUMBER.prototype._iskeytriplezero=function(a){var b,c,d;if(!_xfx.iskeytriplezero(a,this))return!1;if(this.pattern_type==XFD_PATTERN_TYPE_CUSTOM||this.pattern_type==XFD_PATTERN_TYPE_DATE)return!1;if(d=this._deleteselectdata(),d>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this._iskeydownmaxvaluelength(!0))return!1;for(c=1==this.is_intvalue_keydown?this.int_value_max_length-this.int_value_length:this.number_pattern_info.places-this.float_value_length,c=Math.min(c,3),b=0;c>b;b++)this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,"0");return this.pattern_type==XFD_PATTERN_TYPE_MONEY&&3==c&&(this.cursor_pos_setvalue=this.cursor_pos_keydown+c+1),!0},XF_NUMBER.prototype._deleteselectdata=function(){var a,b;return a=_xfj.select(this.xf_object.get(0)),b=a.end-a.start,b>0&&this.fmt_value_buffer.splice(a.start,b),this.cursor_pos_keydown=a.start,b},XF_NUMBER.prototype._iskeyarrowupdown=function(a){return a.which==XFD_KEY_UPARROW?(1==this.xf_selectbox.isshowselectbox()&&this.xf_selectbox.movefocusitem(!0),!0):a.which==XFD_KEY_DOWNARROW?(0==this.xf_selectbox.isshowselectbox()?this.xf_selectbox.showselectbox(this):this.xf_selectbox.movefocusitem(!1),!0):!1},XF_NUMBER.prototype._keyprocess=function(a){var b,c;if(!factory.key_print_arr[a.which])return 9;if(!factory.key_float_arr[a.which])return 0;if(factory.key_zero_arr[a.which]){if(!this._isvalidzerokeydown(a.target.value))return 0;if(b=this._deleteselectdata(),b>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this._iskeydownmaxvaluelength(!0))return 0;return this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,a.key),1}if(factory.key_num_arr[a.which]){if(b=this._deleteselectdata(),b>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this._iskeydownmaxvaluelength(!0))return 0;return this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,a.key),1}if(factory.key_minus_arr[a.which]){if(!this._isvalidminuskeydown(a.target.value))return 0;if(b=this._deleteselectdata(),b>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this._iskeydownmaxvaluelength(!0,!0))return 0;return this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,"-"),1}if(c=a.key,factory.key_dot_arr[a.which]&&(c="."),c==this.xf_prop.decimal_separator){if(!this._isvaliddotkeydown(a.target.value))return 0;if(b=this._deleteselectdata(),b>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this._iskeydownmaxvaluelength(!1))return 0;return this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,c),1}return 1},XF_NUMBER.prototype._iskeydownmaxvaluelength=function(a,b){if(this.value.length>=this.xf_prop.max_length)return!0;if(0!=factory_xf_param.INVALID_VALUE_BY_API&&0==this.int_value_pattern_max_length)return!1;if(a)if(0==this.number_pattern_info.places){if(factory_xf_param.BLANK_MINUS_ONE_CHAR&&b&&this.xf_prop.pattern.length>0){if(this.int_value_length>this.int_value_max_length)return!0}else if(this.int_value_length>=this.int_value_max_length)return!0}else if(this.number_pattern_info.places>0)if(1==this.is_intvalue_keydown){if(factory_xf_param.BLANK_MINUS_ONE_CHAR&&b&&this.xf_prop.pattern.length>0){if(this.int_value_length>this.int_value_max_length)return!0}else if(this.int_value_length>=this.int_value_max_length)return!0}else if(this.float_value_length>=this.number_pattern_info.places)return!0;return!1},XF_NUMBER.prototype._iskeydelete=function(a){var b,c,d,e,f,g;if(!factory.key_del_arr[a.which])return!1;if(b=_xfj.select(this.xf_object.get(0)),c=b.end-b.start,c>0)return this.fmt_value_buffer.splice(b.start,c),this.cursor_pos_setvalue=b.start,!0;if(a.which==XFD_KEY_DELETE){if(e=this.fmt_value_buffer[this.cursor_pos_keydown],void 0===e)return!1}else{if(0==this.cursor_pos_keydown)return!1;e=this.fmt_value_buffer[this.cursor_pos_keydown-1]}if(f=!1,this.pattern_type==XFD_PATTERN_TYPE_CUSTOM?(d=$.inArray(e,this.xf_regexp.delimiter_char_arr),d>=0&&(f=!0)):this.pattern_type==XFD_PATTERN_TYPE_MONEY&&e==this.xf_prop.thousands_separator&&(f=!0),a.which!=XFD_KEY_DELETE){if(f)return this.fmt_value_buffer.splice(this.cursor_pos_keydown-2,1),this.cursor_pos_setvalue=this.cursor_pos_keydown-2,!0;if(this.fmt_value_buffer.splice(this.cursor_pos_keydown-1,1),this.cursor_pos_setvalue=this.cursor_pos_keydown-1,this.pattern_type==XFD_PATTERN_TYPE_MONEY)for(g=1;g<=this.cursor_pos_keydown;g++)if(this.fmt_value_buffer[g]==this.xf_prop.thousands_separator){if(void 0===this.fmt_value_buffer[g-2]||"-"==this.fmt_value_buffer[g-2]||this.fmt_value_buffer[g-2]==this.xf_prop.pattern_front_symbol)return this.cursor_pos_setvalue=this.cursor_pos_setvalue-1,!0;break}return!0}return f?this.fmt_value_buffer.splice(this.cursor_pos_keydown,2):this.fmt_value_buffer.splice(this.cursor_pos_keydown,1),!0},XF_NUMBER.prototype.on_input_keydown=function(a){var b,c,d;if(this.xf_prop.enable){if(this._keyarrowingrid(a,this.xf_object))return!1;if(this.count_keydown++,this.is_edit_cancel=!1,this.event_keydown=a,factory.key_hangul_arr[a.which]&&(0!=this.xf_prop.input_type&&1!=this.xf_prop.input_type||0==factory.is_ie&&0==factory.is_mobile&&(this.xf_object.prop("readOnly",!0),d=this,setTimeout(function(){d.xf_object.prop("readOnly",!1)},0))),factory.key_hangul_arr[this.before_key_event.which]&&"keydown"==this.before_key_event.type&&_xfj.positionevent(this.xf_object[0],a),this.before_key_event.type=a.type,this.before_key_event.which=a.which,b=factory._firekeyevent(this,a,!1,"on_prekeydown"),1==b)return void a.preventDefault();if(!(factory.is_mobile&&a.which!=XFD_KEY_ENTER||a.ctrlKey||a.altKey)){if(a.which==XFD_KEY_ENTER){if(!this.xf_selectbox.isshowselectbox()&&0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_object.blur(),!1}else if(0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_object.blur(),!1;if(2==this.xf_prop.input_type||3==this.xf_prop.input_type)return void(a.which==XFD_KEY_BACKSPACE&&a.preventDefault());if(this.cursor_pos_keydown=_xfj.position(this.xf_object.get(0)),this.is_intvalue_keydown=!0,this.number_pattern_info.places>0&&this.cursor_pos_keydown>0)for(c=this.cursor_pos_keydown-1;c>=0;c--)if(this.fmt_value_buffer[c]==this.xf_prop.decimal_separator){this.is_intvalue_keydown=!1;break}return this._iskeytriplezero(a)?(this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP}),!1):_xfx.iskeyinputblock(a,this)?void a.preventDefault():(b=this._keyprocess(a),1==b?(this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP}),!1):0==b?!1:this._iskeydelete(a)?(this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP}),!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||factory._firekeyevent(this,a,!1,"on_keydown",!0),!1):(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||factory._firekeyevent(this,a,!1,"on_keydown",!0),1==_xfx.iskeydupfield(a,this)?!1:(this.xf_selectbox.isshowselectbox()&&a.which==XFD_KEY_ESC&&a.stopPropagation(),1==this._iskeyarrowupdown(a)?!1:factory.key_hangul_arr[a.which]?(this.is_hangul_keydown=!0,!1):1==this._iskeyselectboxselect(a)?!1:a.which!=XFD_KEY_ENTER&&a.which!=XFD_KEY_ESC||(this.xf_selectbox.hideselectbox(),this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID)?void(_xfx.iskeyfunction(a)&&a.preventDefault()):(a.which==XFD_KEY_ESC?this.is_edit_cancel=!0:a.which==XFD_KEY_ENTER&&(this.next_focus_dir=1),this.xf_object.blur(),!1))))}}},XF_NUMBER.prototype.on_input_paste=function(a){var b;if(this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type)return b=_xfj.eventpastevalue(a),this._on_input_paste(b),!1},XF_NUMBER.prototype._on_input_paste=function(a){var b,c,d;a=_xfj.pastevalue(a,!0),0!=a.length&&(c=this.xf_prop.decimal_separator,a=this._unfmt(a,c),d=a.length,b=this._deleteselectdata(),0==b&&this.value.length==this.xf_prop.max_length||(a=this._getnumberpastevalue(a),this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,a),this.cursor_pos_setvalue=this.cursor_pos_keydown+d,this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP})))},XF_NUMBER.prototype._getnumberpastevalue=function(a){return 2!=factory_xf_param.INVALID_VALUE_BY_API?a:this.int_value_pattern_max_length>0?a:this.xf_prop.max_length<=0?a:(a=a.replace(/,/g,""),a=a.substring(0,this.xf_prop.max_length))},XF_NUMBER.prototype.on_input_keyup=function(a){if(0!=this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type){if(0==this.count_keydown)return void a.preventDefault();(factory.is_mobile||factory.key_hangul_arr[a.which]||this.is_hangul_keydown)&&(this.is_hangul_keydown=!1,this._setvalue(a.target.value,{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP})),(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE)&&factory._firekeyevent(this,a),a.preventDefault(),this.before_key_event.type=a.type,this.before_key_event.which=a.which}},XF_NUMBER.prototype.on_button_mousedown=function(a){a.preventDefault(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),0==this.is_has_focus&&(this.focused_by=1,this.xf_object.focus())},XF_NUMBER.prototype.on_button_click=function(a){this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_prop.on_popbtnclick?this.xf_prop.on_popbtnclick(this):factory._fireevent({xf_component:this,event_name:"on_buttonclick"},this)},XF_NUMBER.prototype.getmaxvalue=function(){return this.xf_prop.max_value},XF_NUMBER.prototype.setmaxvalue=function(a){return a=parseFloat(a),1==isNaN(a)?!1:void(this.xf_prop.max_value=a)},XF_NUMBER.prototype.getminvalue=function(){return this.xf_prop.min_value},XF_NUMBER.prototype.setminvalue=function(a){return a=parseFloat(a),1==isNaN(a)?!1:void(this.xf_prop.min_value=a)},XF_NUMBER.prototype.setpattern=function(a){return this._setpattern(a,!0)},XF_NUMBER.prototype._setpattern=function(a,b){return this.xf_prop.pattern=a,this._pattern(),this.xf_object.prop("maxlength",this._getinputmaxlength()),void 0!==b&&b!==!0||this.settext(this.gettext()),!0},XF_NUMBER.prototype.getallowminus=function(){return this.number_pattern_info.allow_minus},XF_NUMBER.prototype.getplaces=function(){return this.number_pattern_info.places},XF_NUMBER.prototype.getlocaleseparator=function(){return[this.xf_prop.decimal_separator,this.xf_prop.thousands_separator]},XF_NUMBER.prototype.setlocaleseparator=function(a,b){return a.length>0&&(this.xf_prop.decimal_separator=a),b.length>0&&(this.xf_prop.thousands_separator=b),this.settext(this.gettext()),
!0},XF_NUMBER.prototype.getprintprefix=function(){return this.xf_prop.print_prefix};