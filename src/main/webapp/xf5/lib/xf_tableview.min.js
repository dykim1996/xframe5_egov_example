/* 2020-10-30 18:04 */ function XF_TABLEVIEW(a,b){this._init(a,b),this._prop(b),this._box(),null==this.xf_parent.xf_screen&&this._create()}function XF_TABLEVIEW_ITEM(a,b){this._init(a),this._prop(b),this._box(),this._create()}XF_TABLEVIEW.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_TABLEVIEW,b),this.xf_item_arr_arr=[],this.column_info_arr=null,this.row_info_arr=null,this.merge_info_arr=null,this.merge_info_count=0,this.css_td=""},XF_TABLEVIEW.prototype._prop=function(a){var b;if(this.xf_prop={border:1,border_color:[180,180,180],border_radius:"0",border_ex:"",cell_line_vertcolor:[235,235,235],cell_line_horzcolor:[235,235,235],cell_line_vertstyle:1,cell_line_horzstyle:1,boxshadow_type:0,hidden:!1,click_setfocus:!1,dragable:!1,enterstop:!0,tabstop:!0,row_count:0,column_count:0,row_height:"0",column_width:"0",mergeinfo:"",inner_width_type:1,inner_height_type:1,inner_anchor:2,autoresize_column:-1,autoresize_row:-1,is_nofocus:!1},this.event_name_arr=["on_itemclick"],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),this.column_info_arr=this._sizeinfo(this.xf_prop.column_width),this.row_info_arr=this._sizeinfo(this.xf_prop.row_height),this._mergeinfo(this.xf_prop.mergeinfo),1==this.xf_prop.width_type)for(b=0;b<this.column_info_arr.length;b++)if("%"==this.column_info_arr[b].unit){this.xf_prop.width_type=0;break}if(1==this.xf_prop.height_type)for(b=0;b<this.row_info_arr.length;b++)if("%"==this.row_info_arr[b].unit){this.xf_prop.height_type=0;break}this._css(a),this._css_td(a)},XF_TABLEVIEW.prototype._css=function(a){1!=_xf_htmlready_mode&&(_xfx.propcss(this,a,this.css_arr,["position","hidden","border_radius"]),_xfx.bordercss(this,a,this.css_arr))},XF_TABLEVIEW.prototype._css_td=function(a){var b;1!=_xf_htmlready_mode&&(b=[],(a.cell_line_vertcolor||a.cell_line_horzcolor)&&b.push("border-color:"+_xfu.rgbfunc(this.xf_prop.cell_line_horzcolor)+" "+_xfu.rgbfunc(this.xf_prop.cell_line_vertcolor)+";"),0==this.xf_prop.cell_line_horzstyle&&(b.push("border-top:0px none;"),b.push("border-bottom:0px none;")),0==this.xf_prop.cell_line_vertstyle&&(b.push("border-left:0px none;"),b.push("border-right:0px none;")),this.css_td=b.join(""))},XF_TABLEVIEW.prototype._box=function(){var a,b,c;if(0==_xf_htmlready_mode||null==this.xf_parent.xf_screen){for(a=[],a.push("<div"),a.push(' id="'+this.xf_prop.internal_name+'"'),a.push(' class="'+_xfx.propclass(this,this.xf_prop,"_xf_tableview")+'"'),a.push(' style="'),a.push(this.css_arr.join("")),_xfx.sizeposcss(this,this.xf_prop,a),1==this.xf_prop.width_type&&a.push("width: fit-content;"),a.push('">'),a.push('<table class="_xf_tableview_table"'),a.push(' style="'),1==this.xf_prop.width_type&&a.push("width: fit-content;"),a.push('">'),a.push(this._colgrouphtml()),a.push("<thead>"),a.push('<tr class="_xf_tableview_tr"'),a.push(' style="'),a.push("height:0px;"),a.push('">'),c=0;c<this.xf_prop.column_count;c++)a.push("<th></th>");for(a.push("</tr>"),a.push("</thead>"),a.push("<tbody>"),b=0;b<this.xf_prop.row_count;b++){for(a.push(this._trstarthtml(b)),c=0;c<this.xf_prop.column_count;c++)a.push(this._tdhtml(b,c));a.push("</tr>")}a.push("</tbody>"),a.push("</table>"),a.push("</div>")}_xfx.register(this,!1,a),this._dom()},XF_TABLEVIEW.prototype._dom=function(){this.xf_table=this.xf_object.children("._xf_tableview_table"),this.xf_tbody=this.xf_table.children("tbody"),this.xf_colgroup=this.xf_table.children("colgroup"),this.xf_content=new XF_CONTENT(this,this.xf_object)},XF_TABLEVIEW.prototype._offevent=function(){_xfj.offevent(this.xf_table,["mousedown","click"])},XF_TABLEVIEW.prototype._event=function(){this.xf_table.on("mousedown",$.proxy(this.on_object_mousedown,this)),this.xf_table.on("click",$.proxy(this.on_object_click,this))},XF_TABLEVIEW.prototype._create=function(){this._event()},XF_TABLEVIEW.prototype._sizeinfo=function(a){var b,c,d,e,f,g;if(g=[],!(a.length<=0)){for(b=a.split(","),f=b.length,e=0;f>e;e++)c=b[e],c.length<=0||(d=c.split(":"),2==d.length&&g.push({size:_xfu["int"](d[0]),size_now:_xfu["int"](d[0]),unit:d[1],hidden:!1}));return g}},XF_TABLEVIEW.prototype._mergeinfo=function(a){var b,c,d,e,f;if(this.merge_info_arr=[],!(a.length<=0)){for(b=a.split(":"),f=b.length,e=0;f>e;e++)c=b[e],c.length<=0||(d=c.split(","),4==d.length&&this.merge_info_arr.push({start_row_index:_xfu["int"](d[0]),start_column_index:_xfu["int"](d[1]),end_row_index:_xfu["int"](d[2]),end_column_index:_xfu["int"](d[3])}));this.merge_info_count=this.merge_info_arr.length}},XF_TABLEVIEW.prototype._getmergeinfo=function(a,b,c,d){var e,f,g;for(a=_xfu["int"](a),b=_xfu["int"](b),g={is_merge:!1,is_hidden:!1,start_row_index:a,end_row_index:a,start_column_index:b,end_column_index:b,row_span:1,column_span:1},e=0;c>e;e++)if(f=d[e],!(a<f.start_row_index||a>f.end_row_index||b<f.start_column_index||b>f.end_column_index)){g.is_merge=!0,g.start_row_index=f.start_row_index,g.end_row_index=f.end_row_index,g.start_column_index=f.start_column_index,g.end_column_index=f.end_column_index,a==g.start_row_index&&b==g.start_column_index?(g.row_span=g.end_row_index-g.start_row_index+1,g.column_span=g.end_column_index-g.start_column_index+1,1==g.row_span&&1==g.column_span&&(g.is_merge=!1)):g.is_hidden=!0;break}return g},XF_TABLEVIEW.prototype._colgrouphtml=function(){var a,b,c;for(c=[],c.push("<colgroup>"),b=this.xf_prop.column_count,a=0;b>a;a++)c.push('<col style="'),this.xf_prop.autoresize_column==a?c.push("width: auto;"):c.push("width:"+this.column_info_arr[a].size+this.column_info_arr[a].unit+";"),c.push('">');return c.push("</colgroup>"),c.join("")},XF_TABLEVIEW.prototype._trstarthtml=function(a){var b;return b=[],b.push('<tr class="_xf_tableview_tr"'),b.push(' style="'),this.xf_prop.autoresize_row==a?b.push("height:auto;"):b.push("height:"+this.row_info_arr[a].size+this.row_info_arr[a].unit+";"),b.push('">'),b.join("")},XF_TABLEVIEW.prototype._tdhtml=function(a,b){var c,d;return c=[],d=this._getmergeinfo(a,b,this.merge_info_count,this.merge_info_arr),c.push('<td class="_xf_tableview_td"'),c.push(' rowspan="'+d.row_span+'"'),c.push(' colspan="'+d.column_span+'"'),c.push(' data-row="'+a+'"'),c.push(' data-column="'+b+'"'),c.push(' style="'),c.push(this.css_td),d.is_hidden&&c.push("display:none;"),c.push('">'),c.push('<div class="_xf_tableview_item"'),c.push(' style="'),c.push('">'),c.push("</div>"),c.push("</td>"),c.join("")},XF_TABLEVIEW.prototype._isvalidrow=function(a){return!(isNaN(a)||0>a||a>this.xf_prop.row_count)},XF_TABLEVIEW.prototype._isvalidcolumn=function(a){return!(isNaN(a)||0>a||a>this.xf_prop.column_count)},XF_TABLEVIEW.prototype._isvalidrowcolumn=function(a,b){return this._isvalidrow(a)?this._isvalidcolumn(b):!1},XF_TABLEVIEW.prototype._resetrowindex=function(a){var b,c,d;for(b=a;b<this.xf_prop.row_count;b++)for(c=0;c<this.xf_prop.column_count;c++)this.xf_item_arr_arr[b][c].xf_prop.row_index=b,d=this._gettd(b,c),d.attr("data-row",_xfu.str(b))},XF_TABLEVIEW.prototype._resetcolumnindex=function(a){var b,c,d,e,f;for(c=this.getrowcount(),e=this.getcolumncount(),b=0;c>b;b++)for(d=a;e>d;d++)this.xf_item_arr_arr[b][d].xf_prop.column_index=d,f=this._gettd(b,d),f.attr("data-column",_xfu.str(d))},XF_TABLEVIEW.prototype._getitem=function(a,b){var c;return this.xf_item_arr_arr[a]?(c=this.xf_item_arr_arr[a][b],c||(c=null),c):null},XF_TABLEVIEW.prototype._setitem=function(a){this.xf_item_arr_arr[a.xf_prop.row_index]||(this.xf_item_arr_arr[a.xf_prop.row_index]=[]),this.xf_item_arr_arr[a.xf_prop.row_index][a.xf_prop.column_index]=a},XF_TABLEVIEW.prototype._gettr=function(a){var b;return-1==a?this.xf_tbody.find("tr"):(b=this.xf_tbody.children("._xf_tableview_tr").get(a),b?$(b):null)},XF_TABLEVIEW.prototype._getcol=function(a){var b;return b=$(this.xf_colgroup.children("col").get(a)),b?$(b):null},XF_TABLEVIEW.prototype._gettd=function(a,b){var c,d;return(c=this._gettr(a))?(d=c.children("._xf_tableview_td").get(b),d?$(d):null):null},XF_TABLEVIEW.prototype._gettdbytr=function(a,b){var c;return c=a.children("._xf_tableview_td").get(b),c?$(c):null},XF_TABLEVIEW.prototype._getitemdiv=function(a,b){var c,d;return(c=this._gettd(a,b))?(d=c.children("div"),0==d.length?null:d):null},XF_TABLEVIEW.prototype._fitheight=function(a,b,c){var d,e;void 0!==b&&b&&(void 0===c&&(c=0),0==this.xf_prop.height_type&&b&&(d=_xfu["int"](this.xf_object.outerHeight()),this.xf_object.finish(),c>0?(e=this,this.xf_object.animate({height:_xfu.px(d+a)},c,function(){e.setheight(d+a)})):this.setheight(d+a)))},XF_TABLEVIEW.prototype._fitwidth=function(a,b,c){var d,e;void 0!==b&&b&&(void 0===c&&(c=0),0==this.xf_prop.width_type&&b&&(d=_xfu["int"](this.xf_object.outerWidth()),this.xf_object.finish(),c>0?(e=this,this.xf_object.animate({width:_xfu.px(d+a)},c,function(){e.setwidth(d+a)})):this.setwidth(d+a)))},XF_TABLEVIEW.prototype.addcolumn=function(a,b){var c;return c=this.column_info_arr.length,this.insertcolumn(c,a,b)?c:-1},XF_TABLEVIEW.prototype.insertcolumn=function(a,b,c){var d,e,f,g,h,i,j;if(a=_xfu.intval(a,0,this.column_info_arr.length),a===!1)return!1;if(i=!1,a==this.column_info_arr.length&&(i=!0),this.column_info_arr.splice(a,0,{hidden:!1,size:b,size_now:b,unit:"px"}),this.xf_prop.column_count++,h=this._getcol(a),null==h)return!1;for(d=[],d.push('<col style="width:'+b+'px;">'),i?this.xf_colgroup.append(d.join("")):h.before(d.join("")),e=0;e<this.xf_prop.row_count;e++)d=[],d.push(this._tdhtml(e,a)),f=this._gettr(e),i?f.append(d.join("")):(g=this._gettd(e,a),g.before(d.join(""))),j=this.xf_item_arr_arr[e],j.splice(a,0,new XF_TABLEVIEW_ITEM(this,{row_index:e,column_index:a}));return this._resetcolumnindex(a),this._fitwidth(b,c,0),!0},XF_TABLEVIEW.prototype.addrow=function(a,b){var c;return c=this.row_info_arr.length,this.insertrow(c,a,b)?c:-1},XF_TABLEVIEW.prototype.insertrow=function(a,b,c){var d,e,f,g,h;if(a=_xfu.intval(a,0,this.row_info_arr.length),a===!1)return!1;for(g=!1,a==this.row_info_arr.length&&(g=!0),this.row_info_arr.splice(a,0,{hidden:!1,size:b,size_now:b,unit:"px"}),this.xf_prop.row_count++,d=[],d.push(this._trstarthtml(a)),e=0;e<this.xf_prop.column_count;e++)d.push(this._tdhtml(a,e));for(d.push("</tr>"),g?this.xf_tbody.append(d.join("")):(f=this._gettr(a),f&&f.before(d.join(""))),h=[],this.xf_item_arr_arr.splice(a,0,h),e=0;e<this.xf_prop.column_count;e++)h.push(new XF_TABLEVIEW_ITEM(this,{row_index:a,column_index:e}));return this._resetrowindex(a),this._fitheight(b,c,0),!0},XF_TABLEVIEW.prototype.deleterow=function(a,b){var c,d,e;return a=_xfu["int"](a),this._isvalidrow(a)?(d=this.row_info_arr[a].size_now,e=this.row_info_arr[a].unit,this.row_info_arr.splice(a,1),this.xf_prop.row_count--,this.xf_item_arr_arr.splice(a,1),c=this._gettr(a),c&&c.remove(),this._resetrowindex(a),"px"==e&&this._fitheight(d,b),!0):!1},XF_TABLEVIEW.prototype.deleteallrow=function(a){this.xf_item_arr_arr=[],this.row_info_arr=[],this.xf_prop.row_count=0,this.xf_tbody.empty(),0==this.xf_prop.height_type&&a&&this.setheight(0)},XF_TABLEVIEW.prototype.deleteallcolumn=function(a){var b;for(b=0;b=this.xf_prop.row_count;b++)this.xf_item_arr_arr[b]=[];this.column_info_arr=[],this.xf_prop.column_count=0,this.xf_tbody.empty(),this.xf_colgroup.empty(),0==this.xf_prop.width_type&&a&&this.setwidth(0)},XF_TABLEVIEW.prototype.deletecolumn=function(a,b){var c,d,e,f,g,h;if(a=_xfu["int"](a),!this._isvalidcolumn(a))return!1;for(g=this.column_info_arr[a].size_now,h=this.column_info_arr[a].unit,f=this.getrowcount(),e=0;f>e;e++)this.column_info_arr.splice(a,1),d=this._gettd(e,a),d&&d.remove();return c=this._getcol(a),c&&c.remove(),this.xf_prop.column_count--,this._resetcolumnindex(a),"px"==h&&this._fitheight(g,b),!0},XF_TABLEVIEW.prototype.getcolumncount=function(){return this.xf_prop.column_count},XF_TABLEVIEW.prototype.getrowcount=function(){return this.xf_prop.row_count},XF_TABLEVIEW.prototype.getrowheight=function(a){var b;return a=_xfu["int"](a),this._isvalidrow(a)?(b=this._gettr(a),null==b?-1:_xfu["int"](b.outerHeight())):-1},XF_TABLEVIEW.prototype.setrowheight=function(a,b,c,d){return this._setrowheight(a,b,"px",!0,c,d)},XF_TABLEVIEW.prototype.setrowheightex=function(a,b,c,d,e){return c=_xfu.intval(c,0,1),c===!1?!1:this._setrowheight(a,b,0==c?"px":"%",!0,d,e)},XF_TABLEVIEW.prototype.ishiddenrow=function(a){return a=_xfu["int"](a),this._isvalidrow(a)?this.row_info_arr[a].hidden:!1},XF_TABLEVIEW.prototype.setrowhidden=function(a,b,c,d){return a=_xfu["int"](a),this._isvalidrow(a)?(this.row_info_arr[a].hidden=b,this._setrowheight(a,b?0:this.row_info_arr[a].size,this.row_info_arr[a].unit,!1,c,d)):!1},XF_TABLEVIEW.prototype._setrowheight=function(a,b,c,d,e,f){var g,h,i,j;return void 0===f&&(f=0),a=_xfu["int"](a),this._isvalidrow(a)?(b=_xfu.intval(b,0,XFD_MAX_VALUE),b===!1?!1:1==this.xf_prop.height_type&&"%"==c?!1:(g=this._gettr(a))?(h=this.row_info_arr[a].size_now,d&&(this.row_info_arr[a].size=b,this.row_info_arr[a].unit=c),this.row_info_arr[a].size_now=b,g.finish(),e&&"px"==c?(i=this,j=b-h,j>0?(i._fitheight(j,e,f),g.animate({height:b+c},f)):(i._fitheight(j,e,f),g.animate({height:b+c},f))):g.animate({height:b+c},f),!0):!1):!1},XF_TABLEVIEW.prototype.ishiddencolumn=function(a){return a=_xfu["int"](a),this._isvalidcolumn(a)?this.column_info_arr[a].hidden:!1},XF_TABLEVIEW.prototype.setcolumnhidden=function(a,b,c,d){return a=_xfu["int"](a),this._isvalidcolumn(a)?(this.column_info_arr[a].hidden=b,this._setcolumnwidth(a,b?0:this.column_info_arr[a].size,this.column_info_arr[a].unit,!1,c,d)):!1},XF_TABLEVIEW.prototype.getcolumnwidth=function(a){var b;return a=_xfu["int"](a),this._isvalidcolumn(a)?(b=this._gettd(0,a),_xfu["int"](b.outerWidth())):-1},XF_TABLEVIEW.prototype.setcolumnwidth=function(a,b,c,d){return this._setcolumnwidth(a,b,"px",!0,c,d)},XF_TABLEVIEW.prototype.setcolumnwidthex=function(a,b,c,d,e){return c=_xfu.intval(c,0,1),c===!1?!1:this._setcolumnwidth(a,b,0==c?"px":"%",!0,e)},XF_TABLEVIEW.prototype._setcolumnwidth=function(a,b,c,d,e,f){var g,h,i,j;return void 0===f&&(f=0),a=_xfu["int"](a),this._isvalidcolumn(a)?(b=_xfu.intval(b,0,XFD_MAX_VALUE),b===!1?!1:1==this.xf_prop.width_type&&"%"==c?!1:(g=this._getcol(a))?(i=this.column_info_arr[a].size_now,d&&(this.column_info_arr[a].size=b,this.column_info_arr[a].unit=c),this.column_info_arr[a].size_now=b,g.finish(),e&&"px"==c?(h=this,j=b-i,j>0?(h._fitwidth(j,e,f),g.animate({width:b+c},f)):(h._fitwidth(j,e,f),g.animate({width:b+c},f))):g.animate({width:b+c},f),!0):!1):!1},XF_TABLEVIEW.prototype.createobject=function(a,b,c,d,e,f,g,h){return a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?(c=_xfu["int"](c),1==isNaN(c)||0>c?null:_xfx.createobject(this.xf_parent.xf_screen,this,this.xf_item_arr_arr[a][b].xf_content,c,d,e,f,g,h)):!1},XF_TABLEVIEW.prototype.createobjectex=function(a,b,c,d){return a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?(c=_xfu["int"](c),1==isNaN(c)||0>c?null:_xfx.createobjectex(this.xf_parent.xf_screen,this,this.xf_item_arr_arr[a][b].xf_content,c,d)):!1},XF_TABLEVIEW.prototype.createshape=function(a,b,c,d,e,f,g,h){return a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?(c=_xfu["int"](c),1==isNaN(c)||0>c?null:_xfx.createshape(this.xf_parent.xf_screen,this,this.xf_item_arr_arr[a][b].xf_content,c,d,e,f,g,h)):!1},XF_TABLEVIEW.prototype.createshapeex=function(a,b,c,d){return a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?(c=_xfu["int"](c),1==isNaN(c)||0>c?null:_xfx.createshapeex(this.xf_parent.xf_screen,this,this.xf_item_arr_arr[a][b].xf_content,c,d)):!1},XF_TABLEVIEW.prototype.setfocus=function(){return this._setfocus(_XFD_FOCUSTYPE_API)},XF_TABLEVIEW.prototype._setfocus=function(a){var b;if(void 0===a&&(a=_XFD_FOCUSTYPE_API),a==_XFD_FOCUSTYPE_API||a==_XFD_FOCUSTYPE_CLICK){if(null==this.xf_content.focused_object)return void this.xf_parent.xf_screen.setcontrolfocusnext(this,!0);this.xf_content.focused_object._setfocus(a)}else a==_XFD_FOCUSTYPE_NEXT?this.xf_parent.xf_screen.setcontrolfocusnext(this,!0):a==_XFD_FOCUSTYPE_PREV?this.xf_parent.xf_screen.setcontrolfocusprev(this,!0):a==_XFD_FOCUSTYPE_FIRST?(b=this.xf_content.getcontrolfocus(XF_CONTENT.INSTANCE_POSITION_FIRST,!0,!0,null),null!=b?b._setfocus(_XFD_FOCUSTYPE_FIRST):this.xf_parent.xf_screen.setcontrolfocusnext(this,!0)):a==_XFD_FOCUSTYPE_LAST&&(b=this.xf_content.getcontrolfocus(XF_CONTENT.INSTANCE_POSITION_LAST,!0,!0,null),null!=b?b._setfocus(_XFD_FOCUSTYPE_LAST):this.xf_parent.xf_screen.setcontrolfocusprev(this,!0))},XF_TABLEVIEW.prototype.getitemspan=function(a,b){var c;return c={rowspan:-1,colspan:-1},a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?this.xf_item_arr_arr[a][b].getitemspan():c},XF_TABLEVIEW.prototype.setitemspan=function(a,b,c,d){var e,f,g;if(a=_xfu["int"](a),b=_xfu["int"](b),!this._isvalidrowcolumn(a,b))return!1;if(c=_xfu.intval(c,1,this.xf_prop.row_count),d=_xfu.intval(d,1,this.xf_prop.column_count),c===!1||d===!1)return!1;for(g=this.xf_item_arr_arr[a][b].getitemspan(),e=a+1;e<a+g.rowspan;e++)for(f=b;f<b+g.colspan;f++)this.xf_item_arr_arr[e][f].setitemhidden(!1);for(this.xf_item_arr_arr[a][b].setitemspan(c,d),e=a+1;a+c>e;e++)for(f=b+1;b+d>f;f++)this.xf_item_arr_arr[e][f].setitemhidden(!0);return!0},XF_TABLEVIEW.prototype.eventlock=function(a,b){var c,d,e,f;for(this.is_event_locked=a,b===!0&&(this.is_event_locked_subscreen=a),e=this.getrowcount(),f=this.getcolumncount(),c=0;e>c;c++)for(d=0;f>d;d++)this.xf_item_arr_arr[c][d].eventlock(a,b)},XF_TABLEVIEW.prototype.getchildcontrolcount=function(a){return this._getchildinstancecount(-1,-1,a,!1)},XF_TABLEVIEW.prototype.getitemchildcontrolcount=function(a,b,c){return this._getchildinstancecount(a,b,c,!1)},XF_TABLEVIEW.prototype.getchildshapecount=function(a,b,c){return this._getchildinstancecount(-1,-1,c,!0)},XF_TABLEVIEW.prototype.getitemchildshapecount=function(a,b,c){return this._getchildinstancecount(a,b,c,!0)},XF_TABLEVIEW.prototype._getchildinstancecount=function(a,b,c,d){return void 0===c&&(c=!1),-1==a&&-1==b?d?this.xf_content.getshapecount(c):this.xf_content.getcontrolcount(c):(a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?d?this.xf_item_arr_arr[a][b].xf_content.getshapecount(c):this.xf_item_arr_arr[a][b].xf_content.getcontrolcount(c):-1)},XF_TABLEVIEW.prototype.getchildinstanceall=function(a,b){return this._getchildinstanceall(-1,-1,a,b,!1)},XF_TABLEVIEW.prototype.getitemchildinstanceall=function(a,b,c,d){return this._getchildinstanceall(a,b,c,d,!1)},XF_TABLEVIEW.prototype.getchildshapeinstanceall=function(a,b){return this._getchildinstanceall(-1,-1,a,b,!0)},XF_TABLEVIEW.prototype.getitemchildshapeinstanceall=function(a,b,c,d){return this._getchildinstanceall(a,b,c,d,!0)},XF_TABLEVIEW.prototype._getchildinstanceall=function(a,b,c,d,e){return void 0===d&&(d=!1),-1==a&&-1==b?e?this.xf_content.getshapeinstanceall(c,d):this.xf_content.getinstanceall(c,d):(a=_xfu["int"](a),b=_xfu["int"](b),this._isvalidrowcolumn(a,b)?e?this.xf_item_arr_arr[a][b].xf_content.getshapeinstanceall(c,d):this.xf_item_arr_arr[a][b].xf_content.getinstanceall(c,d):null)},XF_TABLEVIEW.prototype.on_object_resize=function(a){var b,c,d,e;for(this.xf_prop.width=this.xf_object.outerWidth(),this.xf_prop.height=this.xf_object.outerHeight(),d=this.getrowcount(),e=this.getcolumncount(),b=0;d>b;b++)for(c=0;e>c;c++)this.xf_item_arr_arr[b][c].on_object_resize(a)},XF_TABLEVIEW.prototype.on_object_mousedown=function(a){var b;factory.registermouseevent(this,a),b=$(a.target),0!=b.hasClass("_xf_tableview_item")&&0==this.xf_prop.dragable&&0==this.xf_prop.click_setfocus&&a.preventDefault()},XF_TABLEVIEW.prototype.on_object_click=function(a){var b,c,d,e;factory.registermouseevent(this,a),b=$(a.target),0!=b.hasClass("_xf_tableview_item")&&(c=b.closest("td"),c.hasClass("_xf_tableview_td")&&(d=_xfu["int"](c.data("row")),e=_xfu["int"](c.data("column")),0==this.xf_prop.dragable&&0==this.xf_prop.click_setfocus&&this.xf_item_arr_arr[d][e].setfocus(_XFD_FOCUSTYPE_CLICK),factory._fireevent({xf_component:this,event_name:"on_itemclick"},this,d,e)))},XF_TABLEVIEW_ITEM.prototype._init=function(a){this.object_kind=XFD_OBJKIND_CONTROL,this.control_kind=XFD_CTRLKIND_TABLEVIEWITEM,this.xf_tableview=a,this.xf_tr=null,this.xf_td=null,this.xf_item=null,this.is_event_locked=this.xf_tableview.is_event_locked,this.is_event_locked_subscreen=this.xf_tableview.is_event_locked_subscreen,this.xf_parent={xf_screen:this.xf_tableview.xf_parent.xf_screen,xf_content:this.xf_tableview.xf_content,xf_component:this.xf_tableview},this.css_arr=[]},XF_TABLEVIEW_ITEM.prototype._prop=function(a){this.xf_prop={style:"",back_color:[255,255,255],back_color_opacity:10,transparent:!1,back_image:"",back_imagesize:0,back_imagefillstyle:0,back_imagehorzalign:0,back_imagevertaling:0,gradient_effect:0,gradient_startcolor:[255,255,255],gradient_endcolor:[225,225,225],colspan:1,rowspan:1,hidden:!1,row_index:0,column_index:0},this.event_name_arr=["on_itemclick"],_xfx.propparam(this,this.xf_prop,a),this._css(a)},XF_TABLEVIEW_ITEM.prototype._css=function(a){1!=_xf_htmlready_mode&&(_xfx.propcss(this,a,this.css_arr,["back_imagefillstyle","back_imagesize"]),_xfx.propbackcolor(this,a,this.css_arr),_xfx.propgradient(this,a,this.css_arr),_xfx.propbackimagepos(this,a,this.css_arr))},XF_TABLEVIEW_ITEM.prototype._box=function(){var a;this.xf_object=this.xf_tableview._gettd(this.xf_prop.row_index,this.xf_prop.column_index),this.xf_item=this.xf_object.children("._xf_tableview_item"),0==_xf_htmlready_mode&&(a=_xfc.cssinfo(this.css_arr),this.xf_object.css(a))},XF_TABLEVIEW_ITEM.prototype._dom=function(){this.xf_content=new XF_CONTENT(this.xf_tableview,this.xf_item),this.xf_content.xf_parent_content=this.xf_tableview.xf_content},XF_TABLEVIEW_ITEM.prototype._create=function(){this._dom(),this.xf_tableview._setitem(this)},XF_TABLEVIEW_ITEM.prototype.on_object_resize=function(a){this.xf_content.on_content_resize(a)},XF_TABLEVIEW_ITEM.prototype.setfocus=function(a){var b;if(void 0===a&&(a=_XFD_FOCUSTYPE_API),a==_XFD_FOCUSTYPE_API||a==_XFD_FOCUSTYPE_CLICK){if(null==this.xf_content.focused_object)return b=this.xf_content.getcontrolfocus(XF_CONTENT.INSTANCE_POSITION_FIRST,!0,!0,null,!1),void(null!=b&&b._setfocus(_XFD_FOCUSTYPE_FIRST));this.xf_content.focused_object._setfocus(a)}},XF_TABLEVIEW_ITEM.prototype.getitemspan=function(){return{rowspan:this.xf_prop.rowspan,colspan:this.xf_prop.colspan,hidden:this.xf_prop.hidden}},XF_TABLEVIEW_ITEM.prototype.setitemspan=function(a,b){return this.xf_prop.rowspan=a,this.xf_prop.colspan=b,this.xf_object.attr("rowspan",a),this.xf_object.attr("colspan",b),!0},XF_TABLEVIEW_ITEM.prototype.setitemhidden=function(a){return this.xf_prop.hidden=a,this.xf_object.css("display",a?"none":"table-cell"),!0},XF_TABLEVIEW_ITEM.prototype.eventlock=function(a,b){return this.is_event_locked=a,b===!0&&(this.is_event_locked_subscreen=a),this.xf_content.eventlock(a,b)};