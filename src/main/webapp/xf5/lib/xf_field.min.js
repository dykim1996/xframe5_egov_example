/* 2020-10-30 18:04 */ function XF_FIELD(a,b){this._init(a,b),1!=_xfx.islistviewtemplate(this,b)&&(this._prop(b),this._box(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this._create())}XF_FIELD.TIME_TYPE_NONE=0,XF_FIELD.TIME_TYPE_HHMMSS=1,XF_FIELD.TIME_TYPE_HHMM=2,XF_FIELD.TIME_TYPE_MMSS=3,XF_FIELD.TIME_TYPE_HH=4,XF_FIELD.TIME_TYPE_MM=5,XF_FIELD.TIME_TYPE_SS=6,XF_FIELD.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_FIELD,b),this.control_field_kind=XFD_CTRLKIND_FIELD_NORMAL,this.data_type=XFD_DATA_ALPHANUM,this.is_edit_cancel=!1,this.event_keydown=null,this.is_hangul_keydown=!1,this.count_keydown=0,this.value="",this.fmt_value_buffer=[],this.value_on_focus="",this.cursor_on_blur=-1,this.focused_by=0,this.cursor_pos_setvalue=-1,this.cursor_pos_keydown=0,this.pattern_type=XFD_PATTERN_TYPE_NONE,this.xf_regexp=null,this.xf_selectbox=null,this.paste_value_length=0,this.before_key_event={},this.is_validalertbox_show=!0,this.value_time=null,this.time_type_pattern="",this.time_type_pattern_length=0},XF_FIELD.prototype._prop=function(a){this.xf_prop={style:"",custom_input_attr:"",custom_input_class:"",font:["굴림체",9,0,0,0,0],fore_color:[0,0,0],back_color:[255,255,255],transparent:!1,border:1,border_radius:"0",border_color:[180,180,180],border_ex:"",disable_style_use:!1,fore_color_disable:[0,0,0],back_color_disable:[255,255,255],border_color_disable:[180,180,180],focus_style_use:!1,fore_color_focus:[0,0,0],back_color_focus:[255,255,255],border_color_focus:[180,180,180],back_image:"",back_imagesize:0,back_imagefillstyle:0,back_imagehorzalign:0,back_imagevertalign:0,apply_inputtypecolor:!0,mousehover:!1,mousehover_forecolor:[0,0,255],mousehover_backcolor:[255,255,255],mousehover_gradienteffect:0,mousehover_gradientstartcolor:[255,255,255],mousehover_gradientendcolor:[225,225,225],box_shadow_effect:!0,button_size:17,resize_dir:0,mouse_cursor:1,max_length:15,min_length:0,meta_maxlength:0,pattern:"",pattern_mask:"",pattern_front_symbol:"",pattern_rear_symbol:"",pattern_func:"",horz_align:0,vert_align:1,text_margin:[1,1,1,1],dup_name:"",allow_dup:!1,auto_dup:!1,auto_skip:!0,auto_complete:!1,maxlength_keyin:0,make_case:0,input_type:0,inputtype_optionkind:0,enable:!0,hidden:!1,default_value:"",default_value_usage:0,hint_text:"",enterstop:!0,tabstop:!0,focus_select:0,popupmenu_show:!0,text_wordellipsis:!1,tooltip:"",time_type:0,timedelimiter_char:"",mobile_keyboard:0,image:"",show_item_count:5},this.event_name_arr=["on_prekeydown","on_keydown","on_change","on_focusout","on_focusin","on_click","on_dblclick","on_rclick","on_validation","on_changed"],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),_xfx.xdataset(this,!0),this._css(a),this._pattern(),this._patternmask(),this._patternfunc(),0==this.xf_prop.focus_select&&(void 0===factory_xf_param.FOCUS_SELECT_FIELD?this.xf_prop.focus_select=1:this.xf_prop.focus_select=factory_xf_param.FOCUS_SELECT_FIELD)},XF_FIELD.prototype._pattern=function(){this.pattern_type=XFD_PATTERN_TYPE_NONE,this.xf_regexp=null,this.xf_prop.pattern.length>0&&(this.pattern_type=XFD_PATTERN_TYPE_CUSTOM,this.xf_regexp=_xfp.regexp(this.xf_prop.pattern,XFD_DATA_ALPHANUM),this.xf_prop.timedelimiter_char=this.xf_regexp.delimiter),this.time_type_pattern=this._timepattern(),this.time_type_pattern_length=this.time_type_pattern.length},XF_FIELD.prototype._patternmask=function(){this.mask_range_arr=_xfp.mask_range(this.xf_prop.pattern_mask),this.mask_range_count=this.mask_range_arr.length},XF_FIELD.prototype._patternfunc=function(){this.xf_prop.xf_grid?this.pattern_func_inst=_xfx.funcinst(this.xf_prop.xf_grid,this.xf_prop.pattern_func):this.pattern_func_inst=_xfx.funcinst(this,this.xf_prop.pattern_func)},XF_FIELD.prototype._box=function(){this._input_box("_xf_field")},XF_FIELD.prototype._dom=function(){this.xf_selectbox=xf_screen._getfieldselectbox()},XF_FIELD.prototype._offevent=function(){this._input_offevent("_xf_field"),_xfj.offevent(this.xf_object,["paste"]),this.xf_prop.xf_button&&_xfj.offevent(this.xf_prop.xf_button,["mousedown","click"])},XF_FIELD.prototype._event=function(){this._input_event("_xf_field"),this.xf_object.on("paste",$.proxy(this.on_input_paste,this)),this.xf_prop.xf_button&&(this.xf_prop.xf_button.on("mousedown",$.proxy(this.on_button_mousedown,this)),this.xf_prop.xf_button.on("click",$.proxy(this.on_button_click,this)))},XF_FIELD.prototype._create=function(){this._input_create()},XF_FIELD.prototype._setvalue=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(void 0===b.is_fire_async&&(b.is_fire_async=!0),1==this.is_edit_cancel&&b.is_fire_editcomplete&&this.xf_prop.on_editcomplete)return this.xf_selectbox.hideselectbox(!1),void this.xf_prop.on_editcomplete(this,this.is_edit_cancel);if(b.is_close_selectbox&&this.xf_selectbox.hideselectbox(!1),m=factory_xf_param.MASK_FIT_PATTERN_LENGTH,b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),k=0,g=!1,d=this.xf_object.val(),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(o=_xfj.select(this.xf_object.get(0)),c=o.start,k=o.end-o.start,c<d.length&&(p=!1),m=!1),a=_xfu.str(a),0==a.length?(this._callpatternfunc(b.event_type,a),e="",f="",this.fmt_value_buffer=[],this.mask_range_count>0&&b.event_type!=XFD_DATA_CHANGE_BY_UNMASK&&(e=_xfp.masks(e,this.mask_range_count,this.mask_range_arr,m,this.xf_prop.pattern_mask))):(f=this._unfmt(a,b.event_type),this._callpatternfunc(b.event_type,f),0!=this.xf_prop.make_case&&(f=_xfx.makecase(this.xf_prop.make_case,f)),this.pattern_type==XFD_PATTERN_TYPE_NONE?e=f:this.pattern_type==XFD_PATTERN_TYPE_CUSTOM?e=_xfp.exp(f,this.xf_regexp):this.pattern_type==XFD_PATTERN_TYPE_DATE&&(e=_xfp.date(f,this.xf_prop.pattern)),this.fmt_value_buffer=e.split(""),this.mask_range_count>0&&b.event_type!=XFD_DATA_CHANGE_BY_UNMASK&&(e=_xfp.masks(e,this.mask_range_count,this.mask_range_arr,m,this.xf_prop.pattern_mask))),e.length>0&&(this.xf_prop.pattern_front_symbol.length>0||this.xf_prop.pattern_rear_symbol.length>0)&&(e=this.xf_prop.pattern_front_symbol+e+this.xf_prop.pattern_rear_symbol,this.xf_prop.pattern_front_symbol.length>0&&this.fmt_value_buffer.splice(0,0,this.xf_prop.pattern_front_symbol),this.xf_prop.pattern_rear_symbol.length>0&&this.fmt_value_buffer.push(this.xf_prop.pattern_rear_symbol)),d==e&&b.event_type!=XFD_DATA_CHANGE_BY_KEYUP||(g=!0,this.xf_object.val(e)),f!=this.value&&(this.value=f,this.value_time=this._getvaluetime(f,this.xf_prop.time_type),factory_xf_param.INVALID_VALUE_BY_API>0&&b.event_type==XFD_DATA_CHANGE_BY_API&&f.length>0&&(this.xf_prop.time_type==XF_FIELD.TIME_TYPE_NONE||null!=this.value_time&&0!=_xfu.istime(this.value_time)?this._invalidvaluebyapi(!1,f):(this.value=this._invalidvaluebyapi(!0,f),this.value_time=null,this.fmt_value_buffer=[],this.xf_object.val(""))),1==b.is_set_xdataset&&this._setxdatasetvalue(this.value),b.is_fire_event&&(factory._fireevent({xf_component:this,event_name:"on_change"},this),this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchange(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value,!0),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(n=this.value_on_focus,this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:b.is_fire_async},this,n,this.value),this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchanged(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,n,this.value,!0))),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(1==this.xf_selectbox.isshowselectbox()?this.xf_selectbox.refreshselectbox(!0):1!=b.is_close_selectbox&&this.value.length>0&&this.xf_selectbox.showselectbox(this))),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&1==g?(-1!=this.cursor_pos_setvalue?c=this.cursor_pos_setvalue:(q=e.length-d.length,0>=q?k>0&&(c+=1,this.paste_value_length>0&&(c+=this.paste_value_length-1)):c+=q>1&&0==p?1:q),_xfj.position(this.xf_object.get(0),c),this.cursor_pos_setvalue=-1):(2==this.xf_prop.maxlength_keyin||0==this.xf_prop.maxlength_keyin&&2==factory_xf_param.MAXLENGTH_KEYIN)&&-1!=this.cursor_pos_setvalue&&(_xfj.position(this.xf_object.get(0),this.cursor_pos_setvalue),this.cursor_pos_setvalue=-1),b.is_set_focus&&(0==this.is_has_focus?this.setfocus():b.event_type==XFD_DATA_CHANGE_BY_API&&2!=this.xf_prop.focus_select&&this.setsel(0,-1)),l=!0,this.is_validalertbox_show=!0,b.event_type==XFD_DATA_CHANGE_BY_BLUR){if(0==this.value.length?(1==this.xf_prop.input_type||3==this.xf_prop.input_type||void 0!==this.xf_prop.data_inputtype&&"1"==this.xf_prop.data_inputtype)&&(l=!1,this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:"",alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("필수 항목입니다!","Required Value!"),valid_type:"required",event_type:XFD_DATA_CHANGE_BY_BLUR,use_alertbox:!0})):this.value.length>0&&((this.value.length<this.xf_prop.min_length||this.value.length>this.xf_prop.max_length)&&(l=!1,i=[],"ko"==factory_xf_param.USER_LANGUAGE?(i.push("유효하지 않은 값입니다!"),i.push("유효 길이 범위: "+this.xf_prop.min_length+" ~ "+this.xf_prop.max_length)):(i.push("Invalid value!"),i.push("Length Range: "+this.xf_prop.min_length+" ~ "+this.xf_prop.max_length)),this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:"검증",alert_message:i.join("\n"),valid_type:this.value.length<this.xf_prop.min_length?"length_min":"length_max",event_type:XFD_DATA_CHANGE_BY_BLUR,min_length:this.xf_prop.min_length,max_length:this.xf_prop.max_length,use_alertbox:!0})),this.xf_prop.time_type==XF_FIELD.TIME_TYPE_NONE||null!=this.value_time&&0!=_xfu.istime(this.value_time)||(this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("유효한 시각이 아닙니다.","It is not a valid time."),valid_type:"invalid_time",event_type:XFD_DATA_CHANGE_BY_BLUR,min_date:this.xf_prop.min_date,max_date:this.xf_prop.max_date,use_alertbox:!0}))),1==l&&this.xf_prop.xf_grid&&(h=this.xf_prop.xf_grid.on_item_editvalidation(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value),0===h?(l=!1,this.is_validalertbox_show=!1):2===h&&(this.next_focus_dir=0)),0==l&&this.xf_prop.create_mode===_XFD_CREATEMODE_GRID)return 0==this.is_validalertbox_show&&(j=this,setTimeout(function(){j.xf_prop.xf_grid._setselectitem(j.xf_prop.row_index,j.xf_prop.sub_row_index,j.xf_prop.column_index,!0,!1,!1,!0),j.xf_object.css("color",_xfu.rgbfunc(j.xf_prop.fore_color)),j.setfocus()},0)),!1;1==l&&(h=factory._fireevent({xf_component:this,event_name:"on_validation"},this),0==h&&(l=!1)),1==l&&this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID&&factory._setdupdata(this,this.value),b.is_fire_event&&this.value_on_focus!=this.value&&(n=this.value_on_focus,this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:!0},this,n,this.value)),this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_focusout",is_fire_async:!0},this,this.focusout_type)}b.is_fire_editcomplete&&this.xf_prop.on_editcomplete&&this.xf_prop.on_editcomplete(this,this.is_edit_cancel),void 0!==b.is_skip_autoskip&&0!=b.is_skip_autoskip||_xfx.autoskip(this,b.event_type)},XF_FIELD.prototype._iskeyarrowupdown=function(a){return a.which==XFD_KEY_UPARROW?(1==this.xf_selectbox.isshowselectbox()&&this.xf_selectbox.movefocusitem(!0),!0):a.which==XFD_KEY_DOWNARROW?(0==this.xf_selectbox.isshowselectbox()?this.xf_selectbox.showselectbox(this):this.xf_selectbox.movefocusitem(!1),!0):!1},XF_FIELD.prototype._iskeyselectboxselect=function(a){var b;return a.which==XFD_KEY_ENTER&&1==this.xf_selectbox.isshowselectbox()?(b=this.xf_selectbox.getselecteditemtext(),void 0!==b&&b.length>0&&this._setvalue(b,{is_fire_event:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!0,is_fire_editcomplete:!0}),!0):!1},XF_FIELD.prototype._deleteselectdata=function(){var a,b;return a=_xfj.select(this.xf_object.get(0)),b=a.end-a.start,b>0&&this.fmt_value_buffer.splice(a.start,b),this.cursor_pos_keydown=a.start,b},XF_FIELD.prototype._iskeydelete=function(a){var b,c,d,e,f,g;return a.which!==XFD_KEY_BACKSPACE&&a.which!==XFD_KEY_DELETE?-1:(c=_xfj.select(this.xf_object.get(0)),b=c.start,d=c.end-c.start,d>0?(this.fmt_value_buffer.splice(c.start,d),c.start):(f=a.which==XFD_KEY_DELETE?this.fmt_value_buffer[b]:this.fmt_value_buffer[b-1],g=!1,null!=this.xf_regexp&&(e=$.inArray(f,this.xf_regexp.delimiter_char_arr),e>=0&&(g=!0)),a.which==XFD_KEY_DELETE?(g?this.fmt_value_buffer.splice(b,2):this.fmt_value_buffer.splice(b,1),b):g?(this.fmt_value_buffer.splice(b-2,1),b-2):(this.fmt_value_buffer.splice(b-1,1),b-1)))},XF_FIELD.prototype._keyprocess=function(a){var b,c,d;if(!factory.key_print_arr[a.which])return 9;if(c=_xfj.selectstart(this.xf_object.get(0)),0==this._iskeynormalvalid(c,a.key))return 0;if(b=this._deleteselectdata(),b>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this.value.length==this.xf_prop.max_length)return 2==this.xf_prop.maxlength_keyin||0==this.xf_prop.maxlength_keyin&&2==factory_xf_param.MAXLENGTH_KEYIN?(this.fmt_value_buffer.splice(this.cursor_pos_keydown,1,_xfj.eventchar(a)),null!=this.xf_regexp?(d=$.inArray(this.fmt_value_buffer[this.cursor_pos_keydown+1],this.xf_regexp.delimiter_char_arr),d>=0?this.cursor_pos_setvalue=this.cursor_pos_keydown+2:this.cursor_pos_setvalue=this.cursor_pos_keydown+1):this.cursor_pos_setvalue=this.cursor_pos_keydown+1,this.cursor_pos_setvalue==parseInt(this.xf_object.prop("maxlength"),10)?1:2):0;return this.fmt_value_buffer.splice(this.cursor_pos_keydown,0,_xfj.eventchar(a)),1},XF_FIELD.prototype._iskeynormalvalid=function(a,b){var c,d,e;if(c=0,0!=this.xf_prop.time_type)return this._iskeytimevalid(a,b);for(;;){if(d=this.xf_prop.pattern.charAt(a+c),0==d.length)return!0;if("9"==d||"A"==d)break;c++}return"A"==d?!0:"9"==d?(e=b.charCodeAt(0),e>=XFD_CHARCODE_0&&e<=XFD_CHARCODE_9):!0},XF_FIELD.prototype._iskeytimevalid=function(a,b){var c,d,e,f,g;if(!this.time_pattern_valid_char_arr)return!0;if(d=this.time_pattern_valid_char_arr[a],void 0===d)return!0;if(c=d.length,2==c){if(b>=d[0]&&b<=d[1])return!0}else if(c>2){if(0>=a)return b>=d[1]&&b<=d[2];for(g=this.xf_object.val(),e=g.charAt(a-1),f=0;;){if(f>=c)return!1;if(e==d[f])return b>=d[f+1]&&b<=d[f+2];f+=3}}return!1},XF_FIELD.prototype._unfmt=function(a,b){var c;return c=a,c=_xfx.unpatternsymbol(this,c),this.pattern_type==XFD_PATTERN_TYPE_NONE?c=c.replace(_xfp.expr_hangul,""):this.pattern_type==XFD_PATTERN_TYPE_CUSTOM?c=_xfp._exp(c,this.xf_regexp):this.pattern_type==XFD_PATTERN_TYPE_DATE&&(c=c.replace(_xfp.expr_hangul,""),c=_xfp._number(c,0,!1,factory_xf_param.VALUE_DECIMAL_SEPARATOR)),factory_xf_param.INVALID_VALUE_BY_API>0&&b===XFD_DATA_CHANGE_BY_API&&(c.length>this.xf_prop.max_length?c=this._invalidvaluebyapi(!0,c):this._invalidvaluebyapi(!1,c)),c=_xfu.trimlength(c,this.xf_prop.max_length)},XF_FIELD.prototype.on_input_keydown=function(a){var b,c;if(this.xf_prop.enable){if(this.count_keydown++,this.is_edit_cancel=!1,this.event_keydown=a,this._keyarrowingrid(a,this.xf_object))return!1;if(factory.key_hangul_arr[a.which]&&(0!=this.xf_prop.input_type&&1!=this.xf_prop.input_type||0==factory.is_ie&&0==factory.is_mobile&&(this.xf_object.prop("readOnly",!0),c=this,setTimeout(function(){c.xf_object.prop("readOnly",!1)},0))),factory.key_hangul_arr[this.before_key_event.which]&&"keydown"==this.before_key_event.type&&_xfj.positionevent(this.xf_object[0],a),this.before_key_event.type=a.type,this.before_key_event.which=a.which,b=factory._firekeyevent(this,a,!1,"on_prekeydown"),1==b)return void a.preventDefault();if(!(factory.is_mobile&&a.which!=XFD_KEY_ENTER||a.ctrlKey||a.altKey)){if(a.which==XFD_KEY_ENTER){if(!this.xf_selectbox.isshowselectbox()&&0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_object.blur(),!1}else if(0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_object.blur(),!1;return 2==this.xf_prop.input_type||3==this.xf_prop.input_type?void(a.which==XFD_KEY_BACKSPACE&&a.preventDefault()):(this.cursor_pos_keydown=_xfj.selectstart(this.xf_object.get(0)),b=this._keyprocess(a),1==b||2==b?(this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,is_skip_autoskip:2==b,event_type:XFD_DATA_CHANGE_BY_KEYUP}),void a.preventDefault()):0==b?void a.preventDefault():(b=this._iskeydelete(a),b>=0?(this.cursor_pos_setvalue=b,this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP}),a.preventDefault(),void(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||factory._firekeyevent(this,a,!1,"on_keydown",!0))):(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||factory._firekeyevent(this,a,!1,"on_keydown",!0),_xfx.iskeydupfield(a,this)?!1:(this.xf_selectbox.isshowselectbox()&&a.which==XFD_KEY_ESC&&a.stopPropagation(),this._iskeyarrowupdown(a)?!1:factory.key_hangul_arr[a.which]?(this.is_hangul_keydown=!0,!1):this._iskeyselectboxselect(a)?!1:a.which!=XFD_KEY_ENTER&&a.which!=XFD_KEY_ESC||(this.xf_selectbox.hideselectbox(),this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID)?_xfx.iskeyinputblock(a,this)?void a.preventDefault():void(_xfx.iskeyfunction(a)&&a.preventDefault()):(a.which==XFD_KEY_ESC?this.is_edit_cancel=!0:a.which==XFD_KEY_ENTER&&(this.next_focus_dir=1),this.xf_object.blur(),!1)))))}}},XF_FIELD.prototype.on_input_keyup=function(a){if(0!=this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type){if(0==this.count_keydown)return void a.preventDefault();(factory.is_mobile||factory.key_hangul_arr[a.which]||this.is_hangul_keydown)&&(this.is_hangul_keydown=!1,this._setvalue(this.xf_object.val(),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP})),(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE)&&factory._firekeyevent(this,a),a.preventDefault(),this.before_key_event.type=a.type,this.before_key_event.which=a.which}},XF_FIELD.prototype.on_input_paste=function(a){var b;if(this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type)return b=_xfj.eventpastevalue(a),this._on_input_paste(b),!1},XF_FIELD.prototype._on_input_paste=function(a){var b,c;if(a=_xfj.pastevalue(a,!0),this.paste_value_length=a.length,0!=this.paste_value_length){if(c=_xfj.position(this.xf_object.get(0)),b=this._deleteselectdata(),b>0)this.cursor_pos_setvalue=this.cursor_pos_keydown+1;else if(this.value.length==this.xf_prop.max_length)return 0;this.fmt_value_buffer.splice(c,0,a),c+=this.paste_value_length,this.cursor_pos_setvalue=c,this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP}),this.paste_value_length=0}},XF_FIELD.prototype.on_input_blur=function(a){return factory.on_component_blur(window.xf_screen,this),this.is_has_focus=!1,this.cursor_on_blur=_xfj.position(this.xf_object[0]),_xfx.colorfocus(this,this.xf_object,!1,null),0==this.xf_prop.enable?!1:void this._setvalue(this.fmt_value_buffer.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!0,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_BLUR,is_close_selectbox:!0,is_close_calendar:!0})},XF_FIELD.prototype.on_button_mousedown=function(a){a.preventDefault(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),0==this.is_has_focus&&(this.focused_by=1,this.xf_object.focus())},XF_FIELD.prototype.on_button_click=function(a){this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_prop.on_popbtnclick?this.xf_prop.on_popbtnclick(this):factory._fireevent({xf_component:this,event_name:"on_buttonclick"},this)},XF_FIELD.prototype._timepattern=function(a){switch(void 0===a&&(a=this.xf_prop.time_type),this._timetypepatternvalidchar(a),a){case XF_FIELD.TIME_TYPE_NONE:return"";case XF_FIELD.TIME_TYPE_HHMMSS:return"HHmmss";case XF_FIELD.TIME_TYPE_HHMM:return"HHmm";case XF_FIELD.TIME_TYPE_MMSS:return"mmss";case XF_FIELD.TIME_TYPE_HH:return"HH";case XF_FIELD.TIME_TYPE_MM:return"mm";case XF_FIELD.TIME_TYPE_SS:return"ss";default:return""}},XF_FIELD.prototype._timetypepatternvalidchar=function(a){if(void 0===a&&(a=this.xf_prop.time_type),this.time_pattern_valid_char_arr=[],0!=a)switch(a){case XF_FIELD.TIME_TYPE_HHMMSS:this._hourpatternvalidchar(this.time_pattern_valid_char_arr),this.xf_prop.timedelimiter_char.length>0&&this.time_pattern_valid_char_arr.push(["0","5"]),this._minutepatternvalidchar(this.time_pattern_valid_char_arr),this.xf_prop.timedelimiter_char.length>0&&this.time_pattern_valid_char_arr.push(["0","5"]),this._secondpatternvalidchar(this.time_pattern_valid_char_arr);break;case XF_FIELD.TIME_TYPE_HHMM:this._hourpatternvalidchar(this.time_pattern_valid_char_arr),this.xf_prop.timedelimiter_char.length>0&&this.time_pattern_valid_char_arr.push(["0","5"]),this._minutepatternvalidchar(this.time_pattern_valid_char_arr);break;case XF_FIELD.TIME_TYPE_MMSS:this._minutepatternvalidchar(this.time_pattern_valid_char_arr),this.xf_prop.timedelimiter_char.length>0&&this.time_pattern_valid_char_arr.push(["0","5"]),this._secondpatternvalidchar(this.time_pattern_valid_char_arr);break;case XF_FIELD.TIME_TYPE_HH:this._hourpatternvalidchar(this.time_pattern_valid_char_arr);break;case XF_FIELD.TIME_TYPE_MM:this._minutepatternvalidchar(this.time_pattern_valid_char_arr);break;case XF_FIELD.TIME_TYPE_SS:this._secondpatternvalidchar(this.time_pattern_valid_char_arr);break;default:return""}},XF_FIELD.prototype._hourpatternvalidchar=function(a){a.push(["0","2"]),a.push(["0","0","9","1","0","9","2","0","3"])},XF_FIELD.prototype._minutepatternvalidchar=function(a){a.push(["0","5"]),a.push(["0","9"])},XF_FIELD.prototype._secondpatternvalidchar=function(a){a.push(["0","5"]),a.push(["0","9"])},XF_FIELD.prototype._getvaluetime=function(a,b){var c;if(void 0===b&&(b=this.xf_prop.time_type),0===a.length.length)return null;switch(b){case XF_FIELD.TIME_TYPE_NONE:return null;case XF_FIELD.TIME_TYPE_HHMMSS:return 6!==a.length?null:_xfu.time(a,this.time_type_pattern);case XF_FIELD.TIME_TYPE_HHMM:return a.length<4?null:(c=a.substr(0,4),_xfu.time(c,this.time_type_pattern));case XF_FIELD.TIME_TYPE_MMSS:return a.length<4?null:(c=6==a.length?a.substr(2,4):a.substr(0,4),_xfu.time(c,this.time_type_pattern));case XF_FIELD.TIME_TYPE_HH:return a.length<2?null:(c=a.substr(0,2),_xfu.time(c,this.time_type_pattern));case XF_FIELD.TIME_TYPE_MM:return a.length<2?null:(a.length>=4&&(c=a.substr(2,2)),_xfu.time(c,this.time_type_pattern));case XF_FIELD.TIME_TYPE_SS:return a.length<2?null:(6==a.length?c=a.substr(4,2):4==value.length&&(c=a.substr(2,2)),_xfu.time(c,this.time_type_pattern))}return null},XF_FIELD.prototype._callpatternfunc=function(a,b){var c;this.pattern_func_inst&&(c=this.xf_prop.xf_grid?this.pattern_func_inst(this.xf_prop.xf_grid.xf_parent.xf_screen.screen,this.xf_prop.xf_grid,a,b,this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index):this.pattern_func_inst(this.xf_parent.xf_screen.screen,this,a,b,-1,-1,-1),c&&(void 0!==c.pattern_front_symbol&&(this.xf_prop.pattern_front_symbol!=c.pattern_front_symbol&&this.setpatternsymbol(0,c.pattern_front_symbol,!1),this.xf_object.prop("maxlength",this._getinputmaxlength())),void 0!==c.pattern_rear_symbol&&this.xf_prop.pattern_rear_symbol!=c.pattern_rear_symbol&&this.setpatternsymbol(1,c.pattern_rear_symbol,!1),void 0!==c.pattern&&(a==XFD_DATA_CHANGE_BY_KEYUP,this.xf_prop.pattern!=c.pattern&&this.setpattern(c.pattern,!1),a==XFD_DATA_CHANGE_BY_KEYUP),void 0!==c.pattern_mask&&this.xf_prop.pattern_mask!=c.pattern_mask&&this.setpatternmask(c.pattern_mask,!1)))};