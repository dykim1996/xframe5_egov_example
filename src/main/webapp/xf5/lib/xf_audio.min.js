/* 2020-10-30 18:04 */ function XF_AUDIO(a,b){this._init(a,b),_xfx.islistviewtemplate(this,b)||(this._prop(b),this._box())}XF_AUDIO.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_AUDIO,b)},XF_AUDIO.prototype._prop=function(a){this.xf_prop={source:"",tabstop:!1,default_source_usage:0,media_type:0,show_controls:!0,volume:20,auto_play:!0,auto_replay:!1,margin:[0,0,0,0],click_setfocus:!1,dragable:!1},this.event_name_arr=["on_play","on_pause","on_ended","on_timeupdate","on_loadeddata"],_xfx.propcommon(this,this.xf_prop,320,240),_xfx.propparam(this,this.xf_prop,a),_xfx.xdataset(this,!0),this._css(a)},XF_AUDIO.prototype._css=function(a){1!=_xf_htmlready_mode&&_xfx.propcss(this,a,this.css_arr,["position","hidden"])},XF_AUDIO.prototype._box=function(){var a;0==_xf_htmlready_mode&&(a=[],a.push("<audio"),a.push(' id="'+this.xf_prop.internal_name+'"'),a.push(' class="'+_xfx.propclass(this,this.xf_prop,"_xf_audio")+'"'),a.push(' style="'),a.push(this.css_arr.join("")),_xfx.sizeposcss(this,this.xf_prop,a),a.push('"'),a.push(' type="'+this._mediatype(this.xf_prop.media_type)+'"'),this.xf_prop.auto_play&&a.push(" autoplay"),this.xf_prop.auto_replay&&a.push(" loop"),this.xf_prop.show_controls&&a.push(" controls"),a.push(" muted"),a.push(' volume="'+this.xf_prop.volume+'"'),a.push(">"),a.push("</audio>")),_xfx.register(this,!1,a)},XF_AUDIO.prototype._dom=function(){},XF_AUDIO.prototype._data=function(){var a;this.xdataset_column_type==XFD_XDATASET_COLUMN_INNER?this._setvalue(this.xf_prop.source,{is_set_xdataset:!0,event_type:XFD_DATA_CHANGE_BY_API,is_display_value:!0}):(a=_xfx.defaultvalueinfo(this,this.xf_prop.source),this._setvalue(a.default_value,{is_set_xdataset:a.is_set_xdataset,event_type:a.is_set_xdataset?XFD_DATA_CHANGE_BY_API:XFD_DATA_CHANGE_BY_XDATASET,is_display_value:!0}))},XF_AUDIO.prototype._offevent=function(){_xfj.offevent(this.xf_object,["mousedown","click","dblclick","play","pause","ended","timeupdate","loadeddata"])},XF_AUDIO.prototype._event=function(){this.xf_object.on("mousedown",$.proxy(this.on_object_mousedown,this)),this.xf_object.on("click",$.proxy(this.on_object_click,this)),this.xf_object.on("dblclick",$.proxy(this.on_object_dblclick,this)),this.xf_object.on("play",$.proxy(this.on_object_play,this)),this.xf_object.on("pause",$.proxy(this.on_object_pause,this)),this.xf_object.on("ended",$.proxy(this.on_object_ended,this)),this.xf_object.on("timeupdate",$.proxy(this.on_object_timeupdate,this)),this.xf_object.on("loadeddata",$.proxy(this.on_object_loadeddata,this))},XF_AUDIO.prototype._create=function(){this._dom(),this._data(),this._event()},XF_AUDIO.prototype.on_object_mousedown=function(a){factory.registermouseevent(this,a),0==this.xf_prop.dragable&&0==this.xf_prop.click_setfocus&&a.preventDefault()},XF_AUDIO.prototype.on_object_click=function(a){factory.registermouseevent(this,a),factory._fireevent({xf_component:this,event_name:"on_click",is_fire_async:!0},this)},XF_AUDIO.prototype.on_object_dblclick=function(a){factory.registermouseevent(this,a),factory._fireevent({xf_component:this,event_name:"on_dblclick",is_fire_async:!0},this)},XF_AUDIO.prototype.on_xdataset_event=function(a){_xfx.on_xdataset_event(this,a)},XF_AUDIO.prototype._getvalue=function(){return _xfx.getvalue(this)},XF_AUDIO.prototype._setvalue=function(a,b){1==b.is_set_xdataset&&this._setxdatasetvalue(_xfu.str(a)),1==b.is_display_value&&this._displayaudio(a)},XF_AUDIO.prototype._setxdatasetvalue=function(a){_xfx.setxdatasetvalue(this,a)},XF_AUDIO.prototype._mediatype=function(a){switch(a){case 0:return"audio/mpeg";case 1:return"audio/wav";case 2:return"audio/ogg"}return""},XF_AUDIO.prototype._displayaudio=function(a){return this.xf_prop.source=a,this.xf_object.attr("src",this.xf_prop.source),this.xf_object.attr("type",this._mediatype(this.xf_prop.media_type)),this.xf_object.get(0).load(),!0},XF_AUDIO.prototype.play=function(){this.xf_object.get(0).muted=!1,this.xf_object.get(0).play()},XF_AUDIO.prototype.pause=function(){this.xf_object.get(0).pause()},XF_AUDIO.prototype.stop=function(){this.pause(),this.xf_object.get(0).currentTime=0},XF_AUDIO.prototype.getsource=function(){return this._getvalue()},XF_AUDIO.prototype.setsource=function(a,b){return void 0===b&&(b=this.xf_prop.media_type),b=_xfu.intval(b,0,2),b===!1?!1:(this.xf_prop.media_type=b,this._setvalue(a,{is_set_xdataset:!0,is_display_value:!0}),!0)},XF_AUDIO.prototype.setvolume=function(a){this.xf_prop.volume=a,this.xf_object.get(0).volume=a/100},XF_AUDIO.prototype.getmediatype=function(){return this.xf_prop.media_type},XF_AUDIO.prototype.setautoplay=function(a){this.xf_prop.auto_play=a,a?this.xf_object.attr("autoplay",!0):this.xf_object.removeAttr("autoplay")},XF_AUDIO.prototype.getautoplay=function(){return this.xf_prop.auto_play},XF_AUDIO.prototype.setautoreplay=function(a){this.xf_prop.auto_replay=a,a?this.xf_object.attr("loop",!0):this.xf_object.removeAttr("loop")},XF_AUDIO.prototype.getautoreplay=function(){return this.xf_prop.auto_replay},XF_AUDIO.prototype.getduration=function(){return this.xf_object.get(0).duration},XF_AUDIO.prototype.setpos=function(a){this.xf_object.get(0).currentTime=this.getduration()*a/100},XF_AUDIO.prototype.getpos=function(){return Math.round(this.xf_object.get(0).currentTime/this.getduration()*100)},XF_AUDIO.prototype.on_object_play=function(a){factory._fireevent({xf_component:this,event_name:"on_play",is_fire_async:!0},this)},XF_AUDIO.prototype.on_object_pause=function(a){factory._fireevent({xf_component:this,event_name:"on_pause",is_fire_async:!0},this)},XF_AUDIO.prototype.on_object_ended=function(a){factory._fireevent({xf_component:this,event_name:"on_ended",is_fire_async:!0},this)},XF_AUDIO.prototype.on_object_timeupdate=function(a){factory._fireevent({xf_component:this,event_name:"on_timeupdate",is_fire_async:!0},this,this.xf_object.get(0).currentTime)},XF_AUDIO.prototype.on_object_loadeddata=function(a){this.xf_prop.auto_play&&this.play(),factory._fireevent({xf_component:this,event_name:"on_loadeddata",is_fire_async:!0},this)};