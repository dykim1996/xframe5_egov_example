/* 2020-10-30 18:04 */ function XF_COMBOBOX(a,b){this._init(a,b),1!=_xfx.islistviewtemplate(this,b)&&(this._prop(b),this._box(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this._create())}function XF_COMBOBOX_POPUP(a,b){this._init(a,b),this._prop(b),this._box(),this._dom(),this._event()}XF_COMBOBOX.SELECTBOX_DATASTYLE_LIST=0,XF_COMBOBOX.SELECTBOX_DATASTYLE_TABLE=1,XF_COMBOBOX.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_COMBOBOX,b),this.xf_picklist=null,this.is_selectbox_show=!1,this.is_edit_cancel=!1,this.event_keydown=null,this.value_keydown="",this.comment_max_length=0,this.count_keydown=0,this.selected_index_prev=-1,this.selected_index=-1,this.value_on_focus="",this.is_valid_code_info=!1,this.edit_changedby_keyup=!1,this.prev_value="",this.value="",this.value_code_info_arr=[],this.xf_selectbox=null,this.selectbox_height=0,this.xf_item_data_arr=[],this.css_dom_arr=[],this.xf_combobox_popup=null,this.cursor_on_blur=-1,this.focused_by=0,this.is_validalertbox_show=!0,this.nonedit_value_buffer=[],this.is_mobile_mode=!1,this.is_useallchekcboxcomment=!1},XF_COMBOBOX.prototype._prop=function(a){this.xf_prop={style:"",custom_input_attr:"",custom_input_class:"",font:["굴림체",9,0,0,0],fore_color:[0,0,0],back_color:[255,255,255],back_color_opacity:10,transparent:!1,border:1,border_radius:"0",border_color:[180,180,180],border_ex:"",disable_style_use:!1,fore_color_disable:[0,0,0],back_color_disable:[255,255,255],border_color_disable:[180,180,180],focus_style_use:!1,fore_color_focus:[0,0,0],back_color_focus:[255,255,255],border_color_focus:[180,180,180],button_hidden:!1,button_size:17,button_image:"",mousehover:!1,mousehover_forecolor:[0,0,255],mousehover_backcolor:[255,255,255],mousehover_gradienteffect:0,mousehover_gradientstartcolor:[255,255,255],mousehover_gradientendcolor:[225,225,225],apply_inputtypecolor:!0,box_shadow_effect:!0,resize_dir:0,selitem_backcolor:[221,228,233],selitem_forecolor:[0,0,0],selitem_customclass:"",item_customclass:"",popupmenu_show:!0,text_wordellipsis:!1,link_data:"",picklist_linkdata:"",max_length:15,min_length:0,meta_maxlength:0,horz_align:0,vert_align:1,text_margin:[1,1,1,1],dup_name:"",allow_dup:!1,auto_dup:!1,auto_skip:!0,auto_codevalid:!1,make_case:0,input_type:0,inputtype_optionkind:0,enable:!0,editable:!0,imemode:0,hidden:!1,default_value_type:0,default_value:"",default_value_usage:0,enterstop:!0,tabstop:!0,focus_select:0,tooltip:"",dragable:!1,accept_drop:!1,allow_emptycode:!1,selectbox_datastyle:0,selectbox_overflowx:0,selectbox_overflowy:0,combobox_data:"",picklist:"",picklist_font:["굴림체",9,0,0,0],picklist_hidden_item:0,picklist_selstyle:0,picklist_viewstyle:1,picklist_viewsort:0,picklist_maskvalue:"",picklist_showmaxcount:20,picklist_popupcount:-1,picklist_filter:"",picklist_filter_type:0,picklist_keyinfilter:0,picklist_sortfix_startcount:0,picklist_sortfix_endcount:0,selecttable_columncount:0,selecttable_codecolumn:0,selecttable_commentcolumn:1,selecttable_showcolumnheader:!0,selecttable_propdelimiter:";",selecttable_columnalign:"",selecttable_columnwidth:"",selecttable_columntitle:"",selecttable_columndatadelimiter:":",selecttable_rowdatadelimiter:";",selecttable_data:[],selecttable_autocolumnsize:!1,showselectbox_focusin:0,show_checkbox:!1,show_allcheckbox:!1,allcheckbox_comment:"전체",allcheckbox_backcolor:[230,233,237],allcheck_textdisplay:0,clickitem_action:0,margin:[0,0,0,0],maxselectcount:1,value_delimiter:"/",display_delimiter:"/",contentbox_gap:0,selectbox_pos:0,selectbox_vert_pos:0,selectbox_itemheight:0,selectbox_wheelmode:0,selectbox_wheelline:3,hint_text:"",mousewheel_itemselect:0,mobilemode_apply:0,on_editcomplete:null,nonedit_value:"",item_height:20,xf_picklist:null},this.event_name_arr=["on_prekeydown","on_keydown","on_focusout","on_focusin","on_itemchange","on_validation","on_begindrag","on_dropcomplete","on_click","on_rclick","on_picklistpopup"],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),this._mobilemode(),a.xf_picklist&&(this.xf_picklist=a.xf_picklist),this._selecttableprop(a),_xfx.xdataset(this,!0),this.xf_prop.picklist=factory._callbackpicklisturl(this.xf_prop.picklist),this.xf_prop.button_size<=14&&(this.xf_prop.button_size=14),this._css(a),this._css_dom(a),"전체"==this.xf_prop.allcheckbox_comment&&(this.xf_prop.allcheckbox_comment=factory._userlang("전체","All")),this.is_useallchekcboxcomment=this._isuseallchekcboxcomment(),0==this.xf_prop.focus_select&&(void 0===factory_xf_param.FOCUS_SELECT_COMBOBOX?this.xf_prop.focus_select=1:this.xf_prop.focus_select=factory_xf_param.FOCUS_SELECT_COMBOBOX)},XF_COMBOBOX.prototype._css=function(a){_xf_htmlready_mode||_xfx.propcss(this,a,this.css_arr,["position","border_radius","mouse_cursor","hidden"])},XF_COMBOBOX.prototype._css_dom=function(a){_xf_htmlready_mode||(_xfx.propcss(this,a,this.css_dom_arr,["fore_color","font","border_radius","horz_align","vert_align","text_margin","button_size","make_case","text_wordellipsis"]),_xfx.propbackcolor(this,a,this.css_dom_arr),_xfx.bordercss(this,a,this.css_dom_arr))},XF_COMBOBOX.prototype._box=function(){var a;0==_xf_htmlready_mode&&(a=[],a.push("<div"),a.push(' id="'+this.xf_prop.internal_name+'"'),a.push(' class="'+_xfx.propclass(this,this.xf_prop,"_xf_combobox")+'"'),this.xf_prop.tooltip.length>0&&a.push(' title="'+_xfu.quot(this.xf_prop.tooltip)+'"'),a.push(' style="'),a.push(this.css_arr.join("")),_xfx.sizeposcss(this,this.xf_prop,a),a.push('">'),a.push('<input type="text"'),a.push(' class="_xf_combobox_edit _xfd_padding_input'),void 0!==this.xf_prop.custom_input_class&&this.xf_prop.custom_input_class.length>0&&a.push(" "+this.xf_prop.custom_input_class),a.push('"'),void 0!==this.xf_prop.custom_input_attr&&this.xf_prop.custom_input_attr.length>0&&a.push(" "+this.xf_prop.custom_input_attr),0!=this.xf_prop.editable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type||a.push(' readonly="true"'),0==this.xf_prop.enable&&a.push(" disabled"),this.xf_prop.hint_text.length>0&&a.push(' placeholder="'+this.xf_prop.hint_text+'"'),this.xf_prop.max_length>0&&(0!=this.xf_prop.picklist_selstyle&&1!=this.xf_prop.picklist_selstyle||a.push(' maxlength="'+this.xf_prop.max_length+'"')),a.push(' style="'),a.push(this.css_dom_arr.join("")),0==this.xf_prop.enable&&_xfx.colorinput(this,null,this.xf_prop.enable,a),0==this.xf_prop.button_hidden&&(0==this.xf_prop.button_size?a.push("padding-right:"+_xfu.px(this.xf_prop.text_margin[1])+";"):a.push("padding-right:"+_xfu.px(this.xf_prop.text_margin[1]+this.xf_prop.button_size-1)+";")),this.xf_prop.box_shadow_effect===!1&&a.push("box-shadow:none;"),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&(a.push("border:0px none;"),a.push("border-radius:0px;")),a.push('"/>'),a.push("<button"),a.push(' tabindex="-1"'),a.push(' class="_xf_combobox_button"'),0==this.xf_prop.enable&&a.push(" disabled"),a.push(' style="'),1==this.xf_prop.button_hidden&&a.push("display:none;"),a.push("width:"+_xfu.px(this.xf_prop.button_size)+";"),a.push("border-radius:"+_xfu.px(this.xf_prop.border_radius)+";"),this.xf_prop.button_image.length>0&&a.push("background-image:"+_xfx.imageurlfunc(this.xf_prop.button_image)+";"),a.push('">'),a.push("</button>"),a.push("</div>")),_xfx.register(this,!1,a)},XF_COMBOBOX.prototype._dom=function(){this.xf_edit=this.xf_object.find("._xf_combobox_edit"),this.xf_button=this.xf_object.find("._xf_combobox_button"),this.xf_selectbox=xf_screen._getcomboselectbox(),this.xf_protect=null,null==this.xf_picklist&&(this.xf_picklist=new XF_PICKLIST(this,{make_case:this.xf_prop.make_case,picklist_async:!1,picklist_linkdata:this.xf_prop.picklist_linkdata,picklist:this.xf_prop.picklist,combobox_data:this.xf_prop.combobox_data,picklist_filter:this.xf_prop.picklist_filter,picklist_filter_type:this.xf_prop.picklist_filter_type,picklist_selstyle:this.xf_prop.picklist_selstyle,on_picklist_load:$.proxy(this.on_picklist_load,this)}),this.xf_picklist.loaddata())},XF_COMBOBOX.prototype._data=function(){var a,b,c,d,e,f,g,h;if(c=[],h=_xfx.defaultvalueinfo(this),h.default_value.length>0)if(e=h.default_value.split(this.xf_prop.value_delimiter),f=e.length,0==h.is_set_xdataset)for(g=0;f>g;g++)b=this.xf_picklist.getcodeinfo("code",e[g]),b.index>=0&&c.push(b);else if(0==this.xf_prop.default_value_type)for(g=0;f>g;g++)b=this.xf_picklist.getcodeinfo("index",e[g]),b.index>=0&&c.push(b);else if(1==this.xf_prop.default_value_type)for(g=0;f>g;g++)b=this.xf_picklist.getcodeinfo("code",e[g]),b.index>=0&&c.push(b);else if(2==this.xf_prop.default_value_type)for(g=0;f>g;g++)b=this.xf_picklist.getcodeinfo("comment",e[g]),b.index>=0&&c.push(b);for(a=h.is_set_xdataset?XFD_DATA_CHANGE_BY_API:XFD_DATA_CHANGE_BY_XDATASET,d=c.length,g=0;d>g;g++)this._setvalue(c[g],{is_fire_event:!1,is_set_xdataset:h.is_set_xdataset,is_fire_editcomplete:!1,is_set_focus:!1,event_type:a,is_display_value:!0});0==_xf_htmlready_mode&&1==this.xf_prop.allow_dup&&1==this.xf_prop.auto_dup&&this.filldupdata()},XF_COMBOBOX.prototype._offevent=function(){_xfj.offevent(this.xf_edit,["blur","focus","copy","cut","mouseenter","mouseleave","mousedown","click","dblclick","keydown"]),_xfj.offevent(this.xf_button,["mousedown","click","mouseleave","mousedown"]),_xfj.offevent(this.xf_edit,["wheel"])},XF_COMBOBOX.prototype._event=function(){this.xf_edit.on("blur",$.proxy(this.on_edit_blur,this)),this.xf_edit.on("focus",$.proxy(this.on_edit_focus,this)),this.xf_edit.on("mousedown",$.proxy(this.on_edit_mousedown,this)),this.xf_edit.on("click",$.proxy(this.on_edit_click,this)),this.xf_edit.on("dblclick",$.proxy(this.on_input_dblclick,this)),this.xf_edit.on("contextmenu",$.proxy(this.on_input_rclick,this)),this.xf_edit.on("keydown",$.proxy(this.on_edit_keydown,this)),this.xf_edit.on("keyup",$.proxy(this.on_edit_keyup,this)),this.xf_edit.on("copy",$.proxy(this.on_input_copy,this)),this.xf_edit.on("cut",$.proxy(this.on_input_cut,this)),this.xf_edit.on("paste",$.proxy(this.on_edit_paste,this)),this.xf_edit.on("mouseenter",$.proxy(this.on_input_mouseenter,this)),this.xf_edit.on("mouseleave",$.proxy(this.on_input_mouseleave,this)),this.xf_edit.on("wheel",$.proxy(this.on_input_wheel,this)),this.xf_button.on("mousedown",$.proxy(this.on_button_mousedown,this)),this.xf_button.on("click",$.proxy(this.on_button_click,this)),this.xf_button.on("mouseenter",$.proxy(this.on_input_mouseenter,this)),this.xf_button.on("mouseleave",$.proxy(this.on_input_mouseleave,this))},XF_COMBOBOX.prototype._create=function(){this._input_create(),0==this.xf_prop.enable&&this.xf_protect&&this.xf_protect.showprotect(0,!1)},XF_COMBOBOX.prototype._selecttableprop=function(a){var b,c,d;this.xf_prop.selectbox_datastyle!=XF_COMBOBOX.SELECTBOX_DATASTYLE_LIST&&void 0===a.selecttable_data&&(this.xf_prop.selecttable_columnalign=this.xf_prop.selecttable_columnalign.split(this.xf_prop.selecttable_propdelimiter),this.xf_prop.selecttable_columnwidth=this.xf_prop.selecttable_columnwidth.split(this.xf_prop.selecttable_propdelimiter),this.xf_prop.selecttable_columntitle=this.xf_prop.selecttable_columntitle.split(this.xf_prop.selecttable_propdelimiter),b=this.xf_prop.combobox_data,c=b.indexOf("content="),d=b.substr("content=".length+c),d=d.substr(1,d.length-2),d=d.replace(/&#20/g," "),this._selecttabledata(d,"\r\n",this.xf_prop.selecttable_columndatadelimiter))},XF_COMBOBOX.prototype._selecttabledata=function(a,b,c){var d,e,f,g,h;if(void 0===a&&(a=this.xf_prop.selecttable_data),void 0===b&&(b=this.xf_prop.selecttable_rowdatadelimiter),void 0===c&&(c=this.xf_prop.selecttable_columndatadelimiter),h=[],a.length>0)for(a=a.replace(/&#20/g," "),e=a.split(b),f=e.length,d=0;f>d;d++)0!=e[d].length&&(g=e[d].split(c),g.length==this.xf_prop.selecttable_columncount&&h.push(g));for(this.xf_prop.selecttable_data=h,null==this.xf_picklist&&(this.xf_picklist=new XF_PICKLIST(this,{make_case:this.xf_prop.make_case,picklist_async:!1,picklist_linkdata:"",picklist:"",combobox_data:"",picklist_filter:"",picklist_filter_type:this.xf_prop.picklist_filter_type,picklist_selstyle:this.xf_prop.picklist_selstyle,on_picklist_load:null})),this.xf_picklist.removeall(),f=this.xf_prop.selecttable_data.length,d=0;f>d;d++)this.xf_picklist.addstring(this.xf_prop.selecttable_data[d][this.xf_prop.selecttable_codecolumn]+":"+this.xf_prop.selecttable_data[d][this.xf_prop.selecttable_commentcolumn])},XF_COMBOBOX.prototype._selecttabledatadd=function(a,b){var c;return void 0===b&&(b=this.xf_prop.selecttable_columndatadelimiter),0==a.length?!1:(c=a.split(b),c.length!=this.xf_prop.selecttable_columncount?!1:(this.xf_prop.selecttable_data.push(c),null==this.xf_picklist&&(this.xf_picklist=new XF_PICKLIST(this,{make_case:this.xf_prop.make_case,picklist_async:!1,picklist_linkdata:"",picklist:"",combobox_data:"",picklist_filter:"",picklist_filter_type:this.xf_prop.picklist_filter_type,picklist_selstyle:this.xf_prop.picklist_selstyle,on_picklist_load:null})),void this.xf_picklist.addstring(c[this.xf_prop.selecttable_codecolumn]+":"+c[this.xf_prop.selecttable_commentcolumn])))},XF_COMBOBOX.prototype._displaycode=function(){var a;this.xf_edit&&(a=this._getdisplaycodetext(),this.xf_edit.val(a))},XF_COMBOBOX.prototype._getdisplaycodetext=function(){var a,b,c,d;if(c=[],b=this.value_code_info_arr.length,1==this.is_useallchekcboxcomment&&b==this.xf_picklist.getcount())return this.xf_prop.allcheckbox_comment;for(a=0;b>a;a++)c.push(this.xf_picklist.getdisplaytext(this.value_code_info_arr[a].code,this.value_code_info_arr[a].comment,this.xf_picklist.xf_prop.picklist_selstyle,!0));return d=c.join(this.xf_prop.display_delimiter)},XF_COMBOBOX.prototype._updatevaluecodeinfoarr=function(){var a,b,c;for(b=this.value_code_info_arr.length,a=0;b>a;a++)c=this.xf_picklist.getcodeinfo("code",this.value_code_info_arr[a].code),this.value_code_info_arr[a].comment=c.comment},XF_COMBOBOX.prototype._updatevalue=function(a){var b,c,d;for(d=[],c=this.value_code_info_arr.length,b=0;c>b;b++)d.push(this.value_code_info_arr[b].code);this.value=d.join(this.xf_prop.value_delimiter),a&&this._setxdatasetvalue(this.value)},XF_COMBOBOX.prototype._addvaluecodeinfo=function(a){return-1==a.index?!1:(0!=this.xf_prop.make_case&&(a.code=_xfx.makecase(this.xf_prop.make_case,a.code)),0==this._isvaluecodeinfo(a)?!1:(this.value_code_info_arr.push(a),this._updatevalue(!1),!0))},XF_COMBOBOX.prototype._getvaluecount=function(){return this.value_code_info_arr.length},XF_COMBOBOX.prototype._clearvaluecodeinfo=function(){this.value_code_info_arr=[],this.value=""},XF_COMBOBOX.prototype._deletevaluecodeinfo=function(a,b,c,d){var e,f;for(void 0===c&&(c=!1),void 0===d&&(d=!0),f=this.value_code_info_arr.length,e=0;f>e;e++)if(this.value_code_info_arr[e].code==a.code)return this.value_code_info_arr.splice(e,1),this._updatevalue(!0),b&&this._displaycode(),this.selected_index_prev=a.index,0==this.value_code_info_arr.length?this.selected_index=-1:this.selected_index=this.value_code_info_arr[this.value_code_info_arr.length-1].index,c&&factory._fireevent({xf_component:this,event_name:"on_itemchange",is_fire_async:d},this,this.selected_index_prev,this.selected_index),!0;return!1},XF_COMBOBOX.prototype._isvaluecodeinfo=function(a){var b,c;if(void 0===a.code)return!1;if(1==factory_xf_param.PICKLIST_HIDDENCODE_VALIDATION&&"1"===a.hidden)return!1;for(c=this.value_code_info_arr.length,b=0;c>b;b++)if(this.value_code_info_arr[b].code==a.code)return!1;return!0},XF_COMBOBOX.prototype._isvaluecode=function(a){var b,c;for(c=this.value_code_info_arr.length,b=0;c>b;b++)if(this.value_code_info_arr[b].code==a)return!0;return!1},XF_COMBOBOX.prototype._setvalue=function(a,b){var c;return c=!0,void 0!==b.is_set_value&&(c=b.is_set_value),1==this.is_edit_cancel&&b.is_fire_editcomplete&&this.xf_prop.on_editcomplete?(this.showselectbox(!1),void this.xf_prop.on_editcomplete(this,this.is_edit_cancel)):(1==c&&(void 0!==b.prev_value?this.prev_value=b.prev_value:this.prev_value=this.value,b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),1==this.xf_prop.maxselectcount&&this._clearvaluecodeinfo(),this.is_valid_code_info=this._addvaluecodeinfo(a)),b.call_autoskip=!1,(b.event_type==XFD_DATA_CHANGE_BY_KEYUP||b.event_type==XFD_DATA_CHANGE_BY_API&&1==this.ishasfocus())&&(b.call_autoskip=!0),b.is_close_selectbox&&1==this.isshowselectbox()?void this.xf_selectbox.hideselectbox(!0,a,b):void this._setvalue_callback(a,b))},XF_COMBOBOX.prototype._setvalue_callback=function(a,b){var c,d,e,f,g,h,i;if(i=!0,void 0!==b.is_set_value&&(i=b.is_set_value),c=!1,b.is_close_selectbox&&this.showselectbox(!1),1==i){if((b.event_type==XFD_DATA_CHANGE_BY_BLUR||b.event_type==XFD_DATA_CHANGE_BY_API)&&1==this.xf_prop.auto_codevalid&&(void 0===b.is_clear_value||0==b.is_clear_value)&&(-1==a.index||1==factory_xf_param.PICKLIST_HIDDENCODE_VALIDATION&&"1"===a.hidden)&&(d=this.xf_edit.val(),d.length>0&&0==this.checkinputvalid(!0,b.event_type,!0)))return!1;b.is_display_value&&this._displaycode(),(this.prev_value!=this.value||-1!=a.index&&-1==this.selected_index)&&(c=!0,1==b.is_set_xdataset&&this._setxdatasetvalue(this.value),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(f=this.value_on_focus,this.value_on_focus=this.value,b.is_fire_event&&(factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:b.is_fire_async},this,f,this.value),this.xf_prop.xf_grid&&!b.is_fire_editcomplete&&this.xf_prop.xf_grid.on_item_editchanged(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,f,this.value,!0))),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value)),(this.is_valid_code_info||b.is_clear_value===!0)&&(this.selected_index=a.index),1==c&&b.is_fire_event&&!this.is_event_locked&&this.selected_index_prev!==this.selected_index&&factory._fireevent({xf_component:this,event_name:"on_itemchange",is_fire_async:b.is_fire_async},this,this.selected_index_prev,this.selected_index),(this.is_valid_code_info||b.is_clear_value===!0)&&(this.selected_index_prev=a.index)}if(b.is_set_focus&&(0==this.is_has_focus?this.setfocus():b.event_type==XFD_DATA_CHANGE_BY_API&&2!=this.xf_prop.focus_select&&this.setsel(0,-1)),e=!0,this.is_validalertbox_show=!0,1==i&&b.event_type==XFD_DATA_CHANGE_BY_BLUR){if(0==this.value.length&&(1==this.xf_prop.input_type||3==this.xf_prop.input_type||void 0!==this.xf_prop.data_inputtype&&"1"==this.xf_prop.data_inputtype)&&(e=!1,this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:"",alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("필수 항목입니다!","Required Value!"),valid_type:"required",event_type:XFD_DATA_CHANGE_BY_BLUR,use_alertbox:!0})),1==e&&this.xf_prop.xf_grid&&(g=this.xf_prop.xf_grid.on_item_editvalidation(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value),0===g?(e=!1,this.is_validalertbox_show=!1):2===g&&(this.next_focus_dir=0)),0==e&&this.xf_prop.create_mode===_XFD_CREATEMODE_GRID)return 0==this.is_validalertbox_show&&(h=this,setTimeout(function(){h.xf_prop.xf_grid._setselectitem(h.xf_prop.row_index,h.xf_prop.sub_row_index,h.xf_prop.column_index,!0,!1,!1,!0),h.xf_edit.css("color",_xfu.rgbfunc(h.xf_prop.fore_color)),h.setfocus()},0)),!1;0==e&&this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID&&factory._setdupdata(this,this.value),this.value_on_focus=this.value,this.is_event_locked||(this.is_has_focus=!1,factory._fireevent({xf_component:this,event_name:"on_focusout",is_fire_async:!0},this,this.focusout_type))}b.is_fire_editcomplete&&this.xf_prop.on_editcomplete&&(b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_BLUR||1!=this.xf_prop.auto_skip||1!=c||0!=this.is_edit_cancel||(0==this.value_code_info_arr.length&&""==this.value&&""!=this.prev_value?this.next_focus_dir=0:this.next_focus_dir=1),this.xf_prop.on_editcomplete(this,this.is_edit_cancel)),1==b.call_autoskip&&(this.xf_prop.create_mode==_XFD_CREATEMODE_GRID?_xfx.autoskip(this,b.event_type):(h=this,setTimeout(function(){_xfx.autoskip(h,b.event_type)},0)))},XF_COMBOBOX.prototype._isuseallchekcboxcomment=function(){return 1==this.xf_prop.maxselectcount?!1:0==this.xf_prop.show_checkbox?!1:void 0===this.xf_prop.show_allcheckbox||0==this.xf_prop.show_allcheckbox?!1:this.xf_prop.selectbox_datastyle==XF_COMBOBOX.SELECTBOX_DATASTYLE_TABLE?!1:1==this.xf_prop.editable?!1:1==this.xf_prop.allcheck_textdisplay?!1:0!=this.xf_prop.allcheck_textdisplay||1!=factory_xf_param.COMBOBOX_ALLCHECK_TEXTDISPLAY},XF_COMBOBOX.prototype._setvalue_asis_20200201=function(a,b){return 1==this.is_edit_cancel&&b.is_fire_editcomplete&&this.xf_prop.on_editcomplete&&1==this.isshowselectbox()?void this.xf_selectbox.hideselectbox(!0,a,b):b.is_close_selectbox&&1==this.isshowselectbox()?void this.xf_selectbox.hideselectbox(!0,a,b):void this._setvalue_callback(a,b)},XF_COMBOBOX.prototype._setvalue_callback_asis_20200201=function(a,b){var c,d,e,f,g,h,i,j;if(1==this.is_edit_cancel&&b.is_fire_editcomplete&&this.xf_prop.on_editcomplete)return this.showselectbox(!1),void this.xf_prop.on_editcomplete(this,this.is_edit_cancel);if(c=void 0!==b.prev_value?b.prev_value:this.value,d=!1,b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),b.is_close_selectbox&&this.showselectbox(!1),1==this.xf_prop.maxselectcount&&this._clearvaluecodeinfo(),e=this._addvaluecodeinfo(a),(b.event_type==XFD_DATA_CHANGE_BY_BLUR||b.event_type==XFD_DATA_CHANGE_BY_API)&&1==this.xf_prop.auto_codevalid&&(void 0===b.is_clear_value||0==b.is_clear_value)&&(-1==a.index||1==factory_xf_param.PICKLIST_HIDDENCODE_VALIDATION&&"1"===a.hidden)&&(f=this.xf_edit.val(),f.length>0&&0==this.checkinputvalid(!0,b.event_type,!0)))return!1;if(b.is_display_value&&this._displaycode(),c!=this.value&&(d=!0,1==b.is_set_xdataset&&this._setxdatasetvalue(this.value),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(h=this.value_on_focus,this.value_on_focus=this.value,b.is_fire_event&&(factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:b.is_fire_async},this,h,this.value),this.xf_prop.xf_grid&&!b.is_fire_editcomplete&&this.xf_prop.xf_grid.on_item_editchanged(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,h,this.value,!0))),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value)),(e||b.is_clear_value===!0)&&(this.selected_index=a.index),1==d&&b.is_fire_event&&!this.is_event_locked&&factory._fireevent({xf_component:this,event_name:"on_itemchange",is_fire_async:b.is_fire_async},this,this.selected_index_prev,this.selected_index),(e||b.is_clear_value===!0)&&(this.selected_index_prev=a.index),b.is_set_focus&&(0==this.is_has_focus?this.setfocus():b.event_type==XFD_DATA_CHANGE_BY_API&&this.setsel(0,-1)),g=!0,this.is_validalertbox_show=!0,b.event_type==XFD_DATA_CHANGE_BY_BLUR){if(0!=this.value.length||1!=this.xf_prop.input_type&&3!=this.xf_prop.input_type||(g=!1,this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:"",alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("필수 항목입니다!","Required Value!"),valid_type:"required",event_type:XFD_DATA_CHANGE_BY_BLUR,use_alertbox:!0})),1==g&&this.xf_prop.xf_grid&&(i=this.xf_prop.xf_grid.on_item_editvalidation(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value),0===i?(g=!1,this.is_validalertbox_show=!1):2===i&&(this.next_focus_dir=0)),0==g&&this.xf_prop.create_mode===_XFD_CREATEMODE_GRID)return 0==this.is_validalertbox_show&&(j=this,setTimeout(function(){j.xf_prop.xf_grid._setselectitem(j.xf_prop.row_index,j.xf_prop.sub_row_index,j.xf_prop.column_index,!0,!1,!1,!0),j.xf_edit.css("color",_xfu.rgbfunc(j.xf_prop.fore_color)),j.setfocus()},0)),!1;0==g&&this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID&&factory._setdupdata(this,this.value),this.value_on_focus=this.value,this.is_event_locked||(this.is_has_focus=!1,factory._fireevent({xf_component:this,event_name:"on_focusout",is_fire_async:!0},this,this.focusout_type))}b.is_fire_editcomplete&&this.xf_prop.on_editcomplete&&(b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_BLUR||1!=this.xf_prop.auto_skip||1!=d||0!=this.is_edit_cancel||(0==this.value_code_info_arr.length&&""==this.value&&""!=c?this.next_focus_dir=0:this.next_focus_dir=1),this.xf_prop.on_editcomplete(this,this.is_edit_cancel)),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID?_xfx.autoskip(this,b.event_type):(j=this,setTimeout(function(){_xfx.autoskip(j,b.event_type)},0))},XF_COMBOBOX.prototype._isvaliditemindex=function(a){return!(isNaN(a)||0>a||a>=this.getcount())},XF_COMBOBOX.prototype._refreshitemdata=function(){var a,b,c,d,e;for(e=this.getcount(),c=this.xf_item_data_arr.length,a=0;c>a;a++)for(b=this.xf_item_data_arr[a],b.item_index=-1,d=0;e>d;d++)if(b.item_code==this.xf_picklist.getcode(d)){b.item_index=d;break}for(a=c-1;a>=0;a--)b=this.xf_item_data_arr[a],-1==b.item_index&&this.xf_item_data_arr.splice(a,1)},XF_COMBOBOX.prototype._setnoneditvalue=function(a){this.xf_prop.nonedit_value=a},XF_COMBOBOX.prototype._mobilemode=function(){return this.is_mobile_mode=!1,0!=factory.ismobile()?2==this.xf_prop.mobilemode_apply||0==this.xf_prop.mobilemode_apply&&void 0!==factory_xf_param.COMBOBOX_MOBILEMODE_APPLY&&2==factory_xf_param.COMBOBOX_MOBILEMODE_APPLY?(this.is_mobile_mode=!0,!0):!1:void 0},XF_COMBOBOX.prototype.setselecttabledata=function(a,b,c){return this._selecttabledata(a,b,c),this.xf_prop.selecttable_data.length},XF_COMBOBOX.prototype.addselecttabledata=function(a,b){return this._selecttabledatadd(a,b)},XF_COMBOBOX.prototype.addstring=function(a){var b,c;return c=a.split(":"),c.length<2?-1:(b=c[0],this.xf_prop.max_length>0&&b.length>this.xf_prop.max_length?-1:this.xf_picklist.addstring(a))},XF_COMBOBOX.prototype.loadcomboboxdata=function(a){a&&this.removeall(),this.xf_picklist._loadcomboboxdatatoxdataset()},XF_COMBOBOX.prototype.checkinputvalid=function(a,b,c){var d,e,f,g,h;if(void 0===b&&(b=XFD_DATA_CHANGE_BY_API),void 0===c&&(c=!1),0==c){if(d=this.xf_edit.val(),0==d.length)return!0;0!=this.xf_prop.make_case&&(d=_xfx.makecase(this.xf_prop.make_case,d))}if(this.is_validalertbox_show=!0,1==this.xf_prop.maxselectcount)return 0==c&&(e=this.xf_picklist.checkinputvalid(d))?!0:(this.xf_edit.val(""),(void 0===a||a)&&(this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("유효하지 않은 값입니다!","Invalid value!"),valid_type:"invalid_code",event_type:b,use_alertbox:!0})),this.xf_prop.create_mode===_XFD_CREATEMODE_GRID&&0==this.is_validalertbox_show&&(h=this,setTimeout(function(){h.xf_prop.xf_grid._setselectitem(h.xf_prop.row_index,h.xf_prop.sub_row_index,h.xf_prop.column_index,!0,!1,!1,!0),h.xf_edit.css("color",_xfu.rgbfunc(h.xf_prop.fore_color)),h.setfocus()},0)),!1);if(0==c)for(g=d.split(this.xf_prop.display_delimiter),f=0;f<g.length;f++)if(e=this.xf_picklist.checkinputvalid(g[f]),!e)return(void 0===a||a)&&(this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("유효하지 않은 값입니다!","Invalid value!"),valid_type:"invalid_code",event_type:b,use_alertbox:!0})),this.xf_prop.create_mode===_XFD_CREATEMODE_GRID&&0==this.is_validalertbox_show&&(h=this,setTimeout(function(){h.xf_prop.xf_grid._setselectitem(h.xf_prop.row_index,h.xf_prop.sub_row_index,h.xf_prop.column_index,!0,!1,!1,!0),h.xf_edit.css("color",_xfu.rgbfunc(h.xf_prop.fore_color)),h.setfocus()},0)),!1;return!0},XF_COMBOBOX.prototype.deletestring=function(a,b){this.xf_picklist.deletestring(a),this._refreshitemdata(),void 0!=b&&1!=b||a==this.selected_index&&null!=this.xf_prop.on_itemchange&&window[this.xf_prop.on_itemchange](this,this.selected_index,-1)},XF_COMBOBOX.prototype.detach=function(){return this.xf_object.detach()},XF_COMBOBOX.prototype.destroy=function(){this._offevent(),this.xf_edit.remove(),this.xf_button.remove(),this.xf_object.remove(),this.xf_xdataset._deletelinkobject(this),null==this.xf_prop.picklist&&this.xf_picklist.destroy(),_xfx.unregister(this)},XF_COMBOBOX.prototype.fitwidth=function(a,b){var c,d,e,f,g;if(a=_xfu.intval(a,0,XFD_MAX_VALUE),b=_xfu.intval(b,0,XFD_MAX_VALUE),a===!1||b===!1)return!1;if(a>b)return!1;if(g=0,d=this.getcount(),1==this.xf_picklist.isliststyle())for(c=0;d>c;c++)e=this.xf_picklist.getdisplaytext(this.xf_picklist.getcode(c),this.xf_picklist.getcomment(c),this.xf_prop.picklist_viewstyle),f=_xfj.textsize(e,this.xf_prop.picklist_font),f.width+=this.xf_prop.text_margin[0]+this.xf_prop.text_margin[1],g=Math.max(g,f.width);return 0==this.xf_prop.button_hidden&&(g+=this.xf_prop.button_size),g=Math.ceil(g),a>g&&(g=a),g>b&&(g=b),this.setwidth(g),!0},XF_COMBOBOX.prototype.finditem=function(a,b,c){return this.xf_picklist.finditem(a,b,c)},XF_COMBOBOX.prototype.findstring=function(a,b){return this.finditem(a,XFD_COMBOBOX_CODENCOMMENT,b)},XF_COMBOBOX.prototype.getcomboboxinfo=function(){var a,b,c;for(b=[],c=this.getcount(),a=0;c>a;a++)b.push({bhidden:"1"==this.xf_picklist.gethidden(a),strcode:this.xf_picklist.getcode(a),strcomment:this.xf_picklist.getcomment(a)});return{strdelimiter:":",strpicklist:this.xf_prop.picklist,nselectstyle:this.xf_prop.picklist_selstyle,nviewstyle:this.xf_prop.picklist_viewstyle,ncomboboxstyle:0,arrcomboitems:b}},XF_COMBOBOX.prototype.getcount=function(a){return this.xf_picklist.getcount(a)},XF_COMBOBOX.prototype.getdefaultvalue=function(){return this.xf_prop.default_value},XF_COMBOBOX.prototype.getdefaultvaluetype=function(){return this.xf_prop.default_value_type},XF_COMBOBOX.prototype.getdelimiter=function(){return":"},XF_COMBOBOX.prototype.getdisplaydelimiter=function(){return this.xf_prop.display_delimiter},XF_COMBOBOX.prototype.setdisplaydelimiter=function(a){return this.xf_prop.display_delimiter=a,this._displaycode(),!0},XF_COMBOBOX.prototype.getvaluedelimiter=function(){return this.xf_prop.value_delimiter},XF_COMBOBOX.prototype.setvaluedelimiter=function(a){this.xf_prop.value_delimiter=a,this._updatevalue(!0)},XF_COMBOBOX.prototype.setenable=function(a,b){0!=this._isvalidsetenable(a,b)&&(this.xf_prop.enable=a,_xfj.enable(this.xf_edit,a),_xfj.enable(this.xf_button,a),_xfx.colorinput(this,this.xf_edit,this.xf_prop.enable,null),this.xf_protect&&(a?this.xf_protect.hideprotect(!0):this.xf_protect.showprotect(0,!1)))},XF_COMBOBOX.prototype.geteditable=function(){return this.xf_prop.editable},XF_COMBOBOX.prototype.seteditable=function(a){this.xf_prop.editable=a,_xfj.editable(this.xf_edit,a)},XF_COMBOBOX.prototype.getitemdata=function(a){var b,c;if(a=_xfu["int"](a),0==this._isvaliditemindex(a))return"";for(c=this.xf_item_data_arr.length,b=0;c>b;b++)if(this.xf_item_data_arr[b].item_index==a)return this.xf_item_data_arr[b].item_data;return""},XF_COMBOBOX.prototype.setitemdata=function(a,b){var c,d,e;if(a=_xfu["int"](a),0==this._isvaliditemindex(a))return!1;for(c=this.xf_picklist.getcode(a),d=this.xf_item_data_arr.length,e=0;d>e;e++)if(this.xf_item_data_arr[e].item_code==c)return this.xf_item_data_arr[e].item_data=b,!0;return this.xf_item_data_arr.push({item_index:a,item_code:c,item_data:b}),!0},XF_COMBOBOX.prototype.getitemhidden=function(a){return this.xf_picklist.getitemhidden(a)},XF_COMBOBOX.prototype.setitemhidden=function(a,b){return this.xf_picklist.setitemhidden(a,b)},XF_COMBOBOX.prototype.getitemhiddenbycode=function(a){return this.xf_picklist.getitemhiddenbycode(a)},XF_COMBOBOX.prototype.setitemhiddenbycode=function(a,b){return this.xf_picklist.setitemhiddenbycode(a,b)},XF_COMBOBOX.prototype.getitemtext=function(a){return this.xf_picklist.getitemtext(a);
},XF_COMBOBOX.prototype.setlinkxdataset=function(a,b){},XF_COMBOBOX.prototype.setlinkxdatasetcolumnid=function(a){},XF_COMBOBOX.prototype.getpicklist=function(){return this.xf_prop.picklist},XF_COMBOBOX.prototype.setpicklist=function(a){var b;b=factory._callbackpicklisturl(a),this.xf_prop.picklist=b,this.xf_picklist.setpicklist(b)},XF_COMBOBOX.prototype.getpicklistfilter=function(){return this.xf_prop.picklist_filter},XF_COMBOBOX.prototype.setpicklistfilter=function(a,b){return void 0===b&&(b=!1),1==b?this.xf_prop.picklist_filter=a:(this.xf_prop.picklist_filter.length>0&&";"!=this.xf_prop.picklist_filter[this.xf_prop.picklist_filter.length-1]&&(this.xf_prop.picklist_filter+=";"),this.xf_prop.picklist_filter+=a),this.xf_picklist.setpicklistfilter(a,b,!0)},XF_COMBOBOX.prototype.getpicklistfont=function(){return _xfx.getfont(this.xf_prop.picklist_font)},XF_COMBOBOX.prototype.setpicklistfont=function(a,b,c,d,e){this.xf_prop.picklist_font[0]=a,this.xf_prop.picklist_font[1]=_xfu["int"](b),this.xf_prop.picklist_font[2]=c,this.xf_prop.picklist_font[3]=d,this.xf_prop.picklist_font[4]=e},XF_COMBOBOX.prototype.getpicklistfontbold=function(){return 0==this.xf_prop.picklist_font[2]?!1:1==this.xf_prop.picklist_font[2]?!0:this.xf_prop.picklist_font[2]},XF_COMBOBOX.prototype.getpicklistfontitalic=function(){return this.xf_prop.picklist_font[3]},XF_COMBOBOX.prototype.getpicklistfontname=function(){return this.xf_prop.picklist_font[0]},XF_COMBOBOX.prototype.getpicklistfontsize=function(){return this.xf_prop.picklist_font[1]},XF_COMBOBOX.prototype.getpicklistfontunderline=function(){return this.xf_prop.picklist_font[4]},XF_COMBOBOX.prototype.getpicklistlinkxdataset=function(){var a=[];return a[0]=this.xf_picklist.xdataset_id,a[1]=this.xf_picklist.code_column_id,a[2]=this.xf_picklist.comment_column_id,a[3]=this.xf_picklist.hidden_column_id,a},XF_COMBOBOX.prototype.setpicklistlinkxdataset=function(a,b,c,d){return this.xf_picklist.setxdataset(a,b,c,d)},XF_COMBOBOX.prototype.getpicklistselstyle=function(){return this.xf_prop.picklist_selstyle},XF_COMBOBOX.prototype.setpicklistselstyle=function(a){return a=_xfu["int"](a),isNaN(a)||a<XFD_COMBOBOX_CODEONLY||a>XFD_COMBOBOX_COMMENTONLY?!1:(this.xf_prop.picklist_selstyle=a,this.xf_picklist.setselstyle(a),void this._displaycode())},XF_COMBOBOX.prototype.getpicklistviewstyle=function(){return this.xf_prop.picklist_viewstyle},XF_COMBOBOX.prototype.setpicklistviewstyle=function(a){this.xf_prop.picklist_viewstyle=_xfu["int"](a)},XF_COMBOBOX.prototype.getselectedcode=function(){var a,b,c;for(c=[],b=this.value_code_info_arr.length,a=0;b>a;a++)c.push(this.value_code_info_arr[a].code);return c.join(this.xf_prop.value_delimiter)},XF_COMBOBOX.prototype.isallcodeselected=function(){var a;return a=this.getselectedcodecount(),0==a?!1:a==this.getcount(!1)},XF_COMBOBOX.prototype.getselectedcodecount=function(){return this.value_code_info_arr.length},XF_COMBOBOX.prototype.setinitvalue=function(){return void 0===this.init_value?!1:(this.setselectedcode(this.init_value),!0)},XF_COMBOBOX.prototype.setselectedcode=function(a){return this.setselectedcodeex(a,!0,!0)},XF_COMBOBOX.prototype.setselectedcodeex=function(a,b,c){return this._setselectedcodeex(a,b,c,XFD_DATA_CHANGE_BY_API,!0)},XF_COMBOBOX.prototype._setselectedcodeex=function(a,b,c,d,e){var f,g,h,i,j,k,l;if(void 0===d&&(d=XFD_DATA_CHANGE_BY_API),void 0===e&&(e=!0),0!=this.xf_prop.make_case&&(a=_xfx.makecase(this.xf_prop.make_case,a)),1==this.xf_prop.maxselectcount){if(f=this.xf_picklist.getcodeinfo("code",a),j=!1,0==a.length&&-1==f.index&&(j=!0),this._setvalue(f,{event_type:d,is_fire_event:b,is_fire_async:c,is_set_xdataset:e,is_clear_value:j,is_close_selectbox:!0,is_set_focus:!1,is_fire_editcomplete:!1,is_display_value:!0}),a.length>0&&-1==f.index)return!1}else if(k=this.value,this._clearvaluecodeinfo(),g=a.split(this.xf_prop.value_delimiter),h=g.length,1==h){if(f=this.xf_picklist.getcodeinfo("code",g[0]),j=!1,0==a.length&&-1==f.index&&(j=!0),this._setvalue(f,{event_type:d,is_fire_event:b,is_fire_async:c,is_set_xdataset:e,is_clear_value:j,prev_value:k,is_close_selectbox:!0,is_set_focus:!1,is_fire_editcomplete:!1,is_display_value:!0}),g[0].length>0&&-1==f.index)return!1}else{for(l=-1,i=h-1;i>=0;i--)if(f=this.xf_picklist.getcodeinfo("code",g[i]),-1!=f.index){l=i;break}if(0>l)return!1;for(i=0;h>i;i++)f=this.xf_picklist.getcodeinfo("code",g[i]),-1!=f.index&&(i==l?this._setvalue(f,{event_type:d,is_fire_event:b,is_fire_async:c,is_set_xdataset:e,is_close_selectbox:!0,prev_value:k,is_set_focus:!1,is_fire_editcomplete:!1,is_display_value:!1}):this._setvalue(f,{event_type:d,is_fire_event:!1,is_fire_async:c,is_set_xdataset:e,is_close_selectbox:!0,prev_value:k,is_set_focus:!1,is_fire_editcomplete:!1,is_display_value:!1}));this._displaycode()}return!0},XF_COMBOBOX.prototype.getselectedcomment=function(){var a,b,c;for(c=[],b=this.value_code_info_arr.length,a=0;b>a;a++)c.push(this.value_code_info_arr[a].comment);return c.join(this.xf_prop.display_delimiter)},XF_COMBOBOX.prototype.getselectedindex=function(){var a,b,c;if(c=[],b=this.value_code_info_arr.length,0==b)return-1;if(1==b)return this.value_code_info_arr[0].index;for(a=0;b>a;a++)c.push(this.value_code_info_arr[a].index);return c.join(this.xf_prop.value_delimiter)},XF_COMBOBOX.prototype.setselectedindex=function(a){return this.setselectedindexex(a,!1,!1)},XF_COMBOBOX.prototype.setselectedindexex=function(a,b,c){var d,e;return d=this.xf_picklist.getcodeinfo("index",a),e=!1,-1==a&&(e=!0),this._setvalue(d,{event_type:XFD_DATA_CHANGE_BY_API,is_fire_event:b,is_fire_async:c,is_set_xdataset:!0,is_close_selectbox:!0,is_clear_value:e,is_set_focus:!1,is_fire_editcomplete:!1,is_display_value:!0}),!0},XF_COMBOBOX.prototype.gettext=function(){return this.xf_edit.val()},XF_COMBOBOX.prototype.settext=function(a,b){this.xf_edit.val(a)},XF_COMBOBOX.prototype.insertstring=function(a,b){var c,d;return d=b.split(":"),2!=d.length?!1:d[0].length>this.xf_prop.max_length?!1:(c=this.xf_picklist.insertstring(a,b),this._refreshitemdata(),c)},XF_COMBOBOX.prototype.isshowselectbox=function(){return this.xf_selectbox.isshowselectbox()},XF_COMBOBOX.prototype.removeall=function(){var a=this.xf_picklist.removeall();return this.xf_item_data_arr=[],a},XF_COMBOBOX.prototype.showselectbox=function(a){a&&this._showselectboxpopup()||(1==a?0==this.isshowselectbox()&&(this.xf_picklist.setpicklistkeydownfilter("",this.xf_prop.picklist_viewstyle),this.xf_selectbox.showselectbox(this)):1==this.isshowselectbox()&&this.xf_selectbox.hideselectbox())},XF_COMBOBOX.prototype._showselectboxfocusin=function(){if(2==this.xf_prop.input_type||3==this.xf_prop.input_type)return!1;switch(this.xf_prop.showselectbox_focusin){case 1:return this.showselectbox(!0),!0;case 2:if(0==this.gettext().length)return this.showselectbox(!0),!0;break;case 3:if(this.gettext().length>0)return this.showselectbox(!0),!0}return!1},XF_COMBOBOX.prototype._showselectboxpopup=function(){var a,b,c,d;return this.xf_prop.picklist_popupcount<0?!1:(b=this.xf_picklist.getcount(),b<this.xf_prop.picklist_popupcount?!1:(a=factory._fireevent({xf_component:this,event_name:"on_picklistpopup",default_value:0},this),1===a?!0:(d={row_index:this.xf_prop.row_index,sub_row_index:this.xf_prop.sub_row_index,column_index:this.xf_prop.column_index,xf_picklist:this.xf_picklist,xf_grid:this.xf_prop.xf_grid},this.xf_combobox_popup=new XF_COMBOBOX_POPUP(this,d),c=new XF_MODALBOX({xf_screen:this.xf_parent.xf_screen,name:this.xf_prop.internal_name+"_modal_box",title:"선택",url:"",xf_content:this.xf_combobox_popup.xf_object,padding:0,is_center:!0,top:this.gettop(),width:470,height:310}),this.xf_combobox_popup.xf_modalbox=c,c.show(),this.xf_combobox_popup.refreshselectbox(!1),this.xf_combobox_popup.focus(),!0)))},XF_COMBOBOX.prototype.toggleselectbox=function(){1==this.isshowselectbox()?this.showselectbox(!1):this.showselectbox(!0)},XF_COMBOBOX.prototype.getbuttonhidden=function(){return this.xf_prop.button_hidden},XF_COMBOBOX.prototype.setbuttonhidden=function(a){this.xf_prop.button_hidden=a,a?(this.xf_button.css({display:"none"}),_xfc.css("padding-right",_xfu.px(this.xf_prop.text_margin[1]),!0,this.xf_edit)):(this.xf_button.css({display:"block"}),_xfc.css("padding-right",_xfu.px(this.xf_prop.button_size+this.xf_prop.text_margin[1]),!0,this.xf_edit))},XF_COMBOBOX.prototype.getbuttonimage=function(){return this.xf_prop.button_image},XF_COMBOBOX.prototype.setbuttonimage=function(a){return this.xf_prop.button_image=a,0==this.xf_prop.button_image.length?_xfj.styleremove(this.xf_button,"background-image"):this.xf_button.css("background-image",_xfx.imageurlfunc(this.xf_prop.button_image)),!0},XF_COMBOBOX.prototype.getautosize=function(){return this.xf_prop.autosize},XF_COMBOBOX.prototype.setautosize=function(a){return a=_xfu.intval(a,0,3),a===!1?!1:(this.xf_prop.autosize=a,!0)},XF_COMBOBOX.prototype.getautocodevalid=function(){return this.xf_prop.auto_codevalid},XF_COMBOBOX.prototype.setautocodevalid=function(a){return this.xf_prop.auto_codevalid=a,!0},XF_COMBOBOX.prototype.getselectboxpos=function(){return this.xf_prop.selectbox_pos},XF_COMBOBOX.prototype.setselectboxpos=function(a){return a=_xfu.intval(a,0,1),a===!1?!1:(this.xf_prop.selectbox_pos=a,!0)},XF_COMBOBOX.prototype.getselectboxvertpos=function(){return this.xf_prop.selectbox_vert_pos},XF_COMBOBOX.prototype.setselectboxvertpos=function(a){return a=_xfu.intval(a,0,2),a===!1?!1:(this.xf_prop.selectbox_vert_pos=a,!0)},XF_COMBOBOX.prototype.getpicklistsortfixstartcount=function(){return this.xf_prop.picklist_sortfix_startcount},XF_COMBOBOX.prototype.setpicklistsortfixstartcount=function(a){return a=_xfu.intval(a,0,XFD_MAX_VALUE),a===!1?!1:(this.xf_prop.picklist_sortfix_startcount=a,!0)},XF_COMBOBOX.prototype.getpicklistsortfixendcount=function(){return this.xf_prop.picklist_sortfix_endcount},XF_COMBOBOX.prototype.setpicklistsortfixendcount=function(a){return a=_xfu.intval(a,0,XFD_MAX_VALUE),a===!1?!1:(this.xf_prop.picklist_sortfix_endcount=a,!0)},XF_COMBOBOX.prototype.sortpicklistviewlist=function(a){var b;return b=this.xf_prop.picklist_viewsort,void 0===a&&(a=this.xf_prop.picklist_viewsort),a=_xfu.intval(a,1,2),a===!1?!1:(this.xf_prop.picklist_viewsort=a,0!=a&&this.xf_picklist.sort(this.xf_prop),this.xf_prop.picklist_viewsort=b,!0)},XF_COMBOBOX.prototype.getpicklistviewsort=function(){return this.xf_prop.picklist_viewsort},XF_COMBOBOX.prototype.setpicklistviewsort=function(a){return a=_xfu.intval(a,0,2),a===!1?!1:void(this.xf_prop.picklist_viewsort=a)},XF_COMBOBOX.prototype.setallcheckboxcomment=function(a){this.xf_prop.allcheckbox_comment=a},XF_COMBOBOX.prototype.on_combobox_popupvalue=function(a){return null!=a&&this.setselectedcode(a),this.xf_combobox_popup=null,this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&null!=a&&this.xf_prop.on_editcomplete?void this.xf_prop.on_editcomplete(this,this.is_edit_cancel):void this.setfocus()},XF_COMBOBOX.prototype.on_picklist_load=function(a){0==this.value_code_info_arr.length?this._data():(this._updatevaluecodeinfoarr(),this._displaycode())},XF_COMBOBOX.prototype.on_button_mousedown=function(a){a.preventDefault(),a.stopPropagation(),this.is_has_focus_on_mousedown=this.is_has_focus,this.is_has_focus_on_mousedown||(this.focused_by=1,this.xf_edit.focus())},XF_COMBOBOX.prototype.on_button_click=function(a){var b;this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),this.is_has_focus&&(xf_screen._hideinputcontext(),a.stopPropagation()),b=factory._fireevent({xf_component:this,event_name:"on_click",is_fire_async:!1,default_value:1},this,1),0!==b&&(this.is_has_focus_on_mousedown?2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type&&this.toggleselectbox():0==this._showselectboxfocusin()&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type&&this.toggleselectbox())},XF_COMBOBOX.prototype.on_edit_paste=function(a){var b;if(this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type)return b=_xfj.eventpastevalue(a),this._on_input_paste(b),!1},XF_COMBOBOX.prototype._on_input_paste=function(a){var b,c,d,e,f,g,h,i,j;return a=_xfj.pastevalue(a,!0),e=a.length,0!=e&&(i=this.xf_edit.val().split(""),f=_xfj.select(this.xf_edit.get(0)),h=f.end-f.start,h>0&&i.splice(f.start,h),this.cursor_pos_keydown=f.start,0!=h||this.value.length!=this.xf_prop.max_length)?(i.splice(this.cursor_pos_keydown,0,a),b=i.join(""),0!=this.xf_prop.make_case&&(b=_xfx.makecase(this.xf_prop.make_case,b)),c=b.length,d=!0,0==this.xf_prop.picklist_selstyle||1==this.xf_prop.picklist_selstyle?c<this.xf_prop.max_length&&(d=!1):2==this.xf_prop.picklist_selstyle&&c<this.comment_max_length&&(d=!1),0==d?void this.xf_edit.val(b):void(1==d?(1==this.xf_prop.maxselectcount&&(g=this.xf_picklist.parsecodecomment(b)),j=XFD_DATA_CHANGE_BY_API,this._setvalue(g,{is_fire_event:!0,is_fire_async:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!1,is_fire_editcomplete:!0,is_display_value:!0,event_type:j})):this.isshowselectbox()&&this.xf_selectbox.scrolltomatcheditem())):void 0},XF_COMBOBOX.prototype.on_input_wheel=function(a){var b,c,d,e,f;if(0!=this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type&&null!=this.xf_picklist&&(b=this.xf_prop.mousewheel_itemselect,0==b&&(b=factory_xf_param.COMBOBOX_MOUSEWHEEL_ITEMSELECT),1!=b&&(0!=this.is_has_focus||2!=b))){if(c=a.originalEvent.deltaY,d=this.xf_picklist.getcount(),c>0){for(e=this.selected_index+1;d>e;e++)if(!this.xf_picklist.getitemhidden(e))return f=this.xf_picklist.getcode(e),this.setselectedcode(f),!1}else for(e=this.selected_index-1;e>=0;e--)if(!this.xf_picklist.getitemhidden(e))return f=this.xf_picklist.getcode(e),this.setselectedcode(f),!1;return!1}},XF_COMBOBOX.prototype.on_edit_mousedown=function(a){this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),this.is_has_focus&&a.stopPropagation(),this.is_has_focus_on_mousedown=this.is_has_focus,this.is_has_focus_on_mousedown||(this.focused_by=1)},XF_COMBOBOX.prototype.on_edit_click=function(a){this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),this.is_has_focus&&xf_screen._hideinputcontext(),this.is_has_focus_on_mousedown?this.xf_prop.editable||2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type&&this.toggleselectbox():0==this._showselectboxfocusin()&&(this.xf_prop.editable||2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type&&this.toggleselectbox()),factory._fireevent({xf_component:this,event_name:"on_click",is_fire_async:!0,default_value:1},this,0)},XF_COMBOBOX.prototype._noneditablekeydown=function(a){var b,c,d;return a.which==XFD_KEY_BACKSPACE||a.which==XFD_KEY_DELETE?(this.nonedit_value_buffer.splice(this.nonedit_value_buffer.length-1,1),!1):factory.key_print_arr[a.which]?(this.nonedit_value_buffer.push(_xfj.eventchar(a)),b=this.nonedit_value_buffer.join(""),b.length<this.xf_prop.max_length?!1:(this.nonedit_value_buffer=[],0!=this.xf_prop.make_case&&(b=_xfx.makecase(this.xf_prop.make_case,b)),c=this.xf_picklist.parsecodecomment(b),-1==c.index?!1:(d=XFD_DATA_CHANGE_BY_API,this._setvalue(c,{is_fire_event:!0,is_fire_async:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!0,is_fire_editcomplete:!0,is_display_value:!0,event_type:d}),!0))):!1},XF_COMBOBOX.prototype.on_edit_keydown=function(a){var b,c;if(this.xf_prop.enable){if(this.count_keydown++,this.is_edit_cancel=!1,this.event_keydown=a,this.value_keydown=this.xf_edit.val(),0!=this.xf_prop.make_case&&(this.value_keydown=_xfx.makecase(this.xf_prop.make_case,this.value_keydown)),c=factory._firekeyevent(this,a,!1,"on_prekeydown"),1==c)return void a.preventDefault();if(!a.ctrlKey){if(2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type&&4==this.xf_prop.showselectbox_focusin&&(factory.key_print_arr[a.which]||factory.key_hangul_arr[a.which])&&this.showselectbox(!0),a.which==XFD_KEY_ENTER){if(!this.isshowselectbox()&&0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_edit.blur(),!1}else if(0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_edit.blur(),!1;if(2==this.xf_prop.input_type||3==this.xf_prop.input_type)return void(a.which==XFD_KEY_BACKSPACE&&a.preventDefault());if(0!=this.xf_prop.editable||1!=this._noneditablekeydown(a)){if(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||factory._firekeyevent(this,a,!1,"on_keydown",!0),1==_xfx.iskeydupfield(a,this))return!1;if(this.isshowselectbox()&&a.which==XFD_KEY_ESC&&a.stopPropagation(),(a.which==XFD_KEY_ESC||a.which==XFD_KEY_TAB)&&(this.showselectbox(!1),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID))return a.stopPropagation(),a.which==XFD_KEY_ESC&&(this.is_edit_cancel=!0),void this.xf_edit.blur();if(a.which==XFD_KEY_UPARROW)return this.isshowselectbox()&&this.xf_selectbox.movefocusitem(!0),!1;if(a.which==XFD_KEY_DOWNARROW)return this.isshowselectbox()?this.xf_selectbox.movefocusitem(!1):this.showselectbox(!0),!1;if(a.which==XFD_KEY_SPACE)return this.isshowselectbox()&&1!=this.xf_prop.maxselectcount&&null!=this.xf_selectbox.xf_selected_item&&(b={index:0,code:"",comment:""},b.index=_xfu["int"](this.xf_selectbox.xf_selected_item.data("index")),b.code=_xfu.str(this.xf_selectbox.xf_selected_item.data("code")),b.comment=_xfu.str(this.xf_selectbox.xf_selected_item.data("comment")),this.xf_selectbox.xf_selected_item.hasClass("_xf_screen_selectbox_item_selected")?(this.xf_selectbox.setselectitemortr(this.xf_selectbox.xf_selected_item,!1),this._deletevaluecodeinfo(b,!0)):(this._getvaluecount()<this.xf_prop.maxselectcount||0==this.xf_prop.maxselectcount)&&(this.xf_selectbox.setselectitemortr(this.xf_selectbox.xf_selected_item,!0),this._setvalue(b,{is_fire_event:!0,is_fire_async:!0,is_set_xdataset:!0,is_close_selectbox:!1,is_set_focus:!0,is_fire_editcomplete:!1,is_display_value:!0}))),!1;if(a.which==XFD_KEY_ENTER&&(this.next_focus_dir=1,this.isshowselectbox()?null!=this.xf_selectbox.xf_selected_item&&(b={index:0,code:"",comment:""},b.index=_xfu["int"](this.xf_selectbox.xf_selected_item.data("index")),b.code=_xfu.str(this.xf_selectbox.xf_selected_item.data("code")),b.comment=_xfu.str(this.xf_selectbox.xf_selected_item.data("comment")),this._clearvaluecodeinfo(),this._setvalue(b,{is_fire_event:!0,is_fire_async:!0,event_type:XFD_DATA_CHANGE_BY_API,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!0,is_fire_editcomplete:!0,is_display_value:!0})):this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_edit.blur(),a.preventDefault()),_xfx.iskeyinputblock(a,this))return void a.preventDefault();_xfx.iskeyfunction(a)&&a.preventDefault(),a.which==XFD_KEY_BACKSPACE&&0==this.xf_prop.editable&&a.preventDefault()}}}},XF_COMBOBOX.prototype.on_edit_keyup=function(a){var b,c,d,e,f,g;return this.edit_changedby_keyup=!1,0==this.count_keydown?void a.preventDefault():(b=this.xf_edit.val(),0==b.length&&(b=this.nonedit_value_buffer.join("")),0!=this.xf_prop.make_case&&(b=_xfx.makecase(this.xf_prop.make_case,b)),e=b.length,(1==this.xf_prop.picklist_keyinfilter||0==this.xf_prop.picklist_keyinfilter&&1==factory_xf_param.PICKLIST_KEYIN_FILTER)&&1==this.xf_prop.editable&&this.isshowselectbox()&&b!=this.value_keydown&&(factory.key_print_arr[a.which]||factory.key_hangul_arr[a.which]||factory.key_del_arr[a.which])&&(1!=this.xf_prop.maxselectcount&&0!=this._getvaluecount()||(this.xf_picklist.setpicklistkeydownfilter(b,this.xf_prop.picklist_viewstyle),this.xf_selectbox.refreshselectbox(!0),this.xf_selectbox.selected_index=-1)),!factory.key_print_arr[a.which]&&!factory.key_hangul_arr[a.which]&&e>0?(this.isshowselectbox()&&2==this.xf_prop.picklist_selstyle&&(factory.key_hangul_arr[a.which]||factory.key_del_arr[a.which])&&a.originalEvent.code&&"ArrowUp"!==a.originalEvent.code&&"ArrowDown"!==a.originalEvent.code&&this.xf_selectbox.scrolltomatcheditem(),void((!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE)&&factory._firekeyevent(this,a))):(b!=this.value_keydown&&this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchange(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,b,!0),d=!0,b==this.value_keydown&&factory.key_print_arr[a.which]!==!0&&(d=!1),1==d&&b.length>0&&(0==this.xf_prop.picklist_selstyle||1==this.xf_prop.picklist_selstyle?e<this.xf_prop.max_length&&(d=!1):2==this.xf_prop.picklist_selstyle&&1==this.xf_prop.maxselectcount&&(c=this.xf_picklist.parsecodecomment(b,this.xf_prop.picklist_selstyle,!0),-1==c.index&&(d=!1))),1==d&&0==b.length&&(d=!1),1==d?(1==this.xf_prop.maxselectcount&&(c=this.xf_picklist.parsecodecomment(b,this.xf_prop.picklist_selstyle,!0)),f=XFD_DATA_CHANGE_BY_API,g=!0,a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||(g=!1),1==this.xf_prop.maxselectcount&&(this.is_check_autoskip_maxlength=!1),c&&this._setvalue(c,{is_fire_event:!0,is_fire_async:!0,is_set_xdataset:!0,is_close_selectbox:g,is_set_focus:!1,is_fire_editcomplete:!0,is_display_value:!0,event_type:f})):((factory.key_print_arr[a.which]||factory.key_hangul_arr[a.which])&&(this.edit_changedby_keyup=!0),this.isshowselectbox()&&this.xf_selectbox.scrolltomatcheditem()),(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE)&&factory._firekeyevent(this,a),void a.preventDefault()))},XF_COMBOBOX.prototype.on_edit_focus=function(a){this.count_keydown=0,this.focusout_type=0,1!=this.is_has_focus&&(this.is_has_focus=!0,this.nonedit_value_buffer=[],this.xf_prop.nonedit_value.length>0&&(1==this.xf_prop.editable?this.xf_edit.val(this.xf_prop.nonedit_value):(this.nonedit_value_buffer.push(this.xf_prop.nonedit_value),this.xf_prop.nonedit_value="")),this.value_on_focus=this.value,2==this.xf_prop.picklist_selstyle&&(this.comment_max_length=0,this.comment_max_length=this.xf_picklist.getcommentmaxlength(),this.xf_edit.prop("maxlength",this.comment_max_length)),_xfx.colorfocus(this,this.xf_edit,!0,null),this.xf_parent&&this.xf_parent.xf_content&&!this.xf_parent.xf_content.on_child_focus(this)||(0==this.focused_by&&this._showselectboxfocusin(),this.focused_by=0,this.on_input_focusselect(),factory._fireevent({xf_component:this,event_name:"on_focusin",is_fire_async:!0},this)))},XF_COMBOBOX.prototype.on_edit_focus_callback=function(){_xfj.select(this.xf_edit[0],-1,-1)},XF_COMBOBOX.prototype.on_edit_blur=function(a){var b,c,d,e,f,g;if(factory.on_component_blur(window.xf_screen,this),this.cursor_on_blur=_xfj.position(this.xf_edit[0]),_xfx.colorfocus(this,this.xf_edit,!1,null),null!=this.xf_combobox_popup)return void(this.is_has_focus=!1);if(g=!0,1==factory.ismobile()&&0==this.xf_prop.editable&&(g=!1),d=this.xf_edit.val(),1==this.is_useallchekcboxcomment&&this.value_code_info_arr.length==this.xf_picklist.getcount()&&d==this.xf_prop.allcheckbox_comment&&(this._setvalue(null,{is_fire_event:!0,is_fire_async:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!1,is_fire_editcomplete:!0,is_display_value:!0,is_set_value:!1,event_type:XFD_DATA_CHANGE_BY_BLUR}),g=!1),1==g){if(c={code:"",comment:"",index:-1},d.length>=0)if(0!=this.xf_prop.make_case&&(d=_xfx.makecase(this.xf_prop.make_case,d)),1==this.xf_prop.maxselectcount)c=1==this.edit_changedby_keyup?this.xf_picklist.parsecodecomment(d,this.xf_prop.picklist_selstyle,!0):2==this.xf_prop.picklist_selstyle&&0==this.xf_prop.editable?this.xf_picklist.parsecodecomment(d,this.xf_prop.picklist_selstyle,!1,this.value):this.xf_picklist.parsecodecomment(d);else{for(this._clearvaluecodeinfo(),e=d.split(this.xf_prop.display_delimiter),f=0;f<e.length-1;f++)b=this.xf_picklist.parsecodecomment(e[f]),this._setvalue(b,{is_fire_event:!1,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!1,is_fire_editcomplete:!1,is_display_value:!0,event_type:XFD_DATA_CHANGE_BY_API});c=this.edit_changedby_keyup===!0?this.xf_picklist.parsecodecomment(d,this.xf_prop.picklist_selstyle,!0):this.xf_picklist.parsecodecomment(e[f])}this._setvalue(c,{is_fire_event:!0,is_fire_async:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!1,is_fire_editcomplete:!0,is_display_value:!0,event_type:XFD_DATA_CHANGE_BY_BLUR})}this.xf_picklist.setpicklistkeydownfilter("",this.xf_prop.picklist_viewstyle),this.xf_selectbox.selected_index=-1,this.is_has_focus=!1},XF_COMBOBOX_POPUP.prototype._init=function(a){this.xf_combobox=a,this.xf_combobox_prop=a.xf_prop,this.xf_picklist=null,this.xf_grid=null,this.is_box_show=!1,this.xf_object=null,this.xf_vscroll=null,this.selected_index=-1,this.xf_modalbox=null},XF_COMBOBOX_POPUP.prototype._prop=function(a){this.xf_prop={name:this.xf_combobox.xf_prop.name+"_comboboxpopup",row_index:-1,sub_row_index:0,column_index:-1,xf_picklist:null,xf_column_data:null,xf_grid:null},$.extend(this.xf_prop,a),this.xf_picklist=this.xf_prop.xf_picklist,this.xf_grid=this.xf_prop.xf_grid},XF_COMBOBOX_POPUP.prototype._box=function(){var a;a=[],a.push('<div id="'+this.xf_prop.name+'" class="_xf_combobox_popup" style="display:none;">'),a.push('<div class="_xf_combobox_popup_box">'),a.push('<div class="_xf_combobox_popup_pbox" style="height:28px;">'),a.push('<div style="display:inline;">'),a.push("검색 "),a.push('<input type="text" class="_xf_combobox_popup_field _xf_combobox_popup_keyword"'),a.push('"/>'),a.push(' <button class="_xf_combobox_popup_btn _xf_combobox_popup_btn_margin_both _xf_combobox_popup_btn_search">검색</button>'),a.push("</div>"),a.push("</div>"),a.push('<table class="_xf_combobox_popup_table _xf_combobox_popup_head_table">'),a.push(this._colgroup()),a.push("<thead>"),a.push('<tr class="_xf_combobox_popup_table_tr">'),1==this.xf_combobox_prop.show_checkbox&&(a.push('<th class="_xf_combobox_popup_head_table_th">'),a.push('<input type="checkbox" tabindex="-1" class="_xf_combobox_popup_table_td_check_headrow">'),a.push("</th>")),1==this.xf_combobox_prop.picklist_viewstyle&&(a.push('<th class="_xf_combobox_popup_head_table_th" style="padding-bottom:1px;">'),a.push("코드"),a.push("</th>")),a.push('<th class="_xf_combobox_popup_head_table_th" style="padding-bottom:1px;" colspan="2">'),a.push("내용"),a.push("</th>"),a.push('<th class="_xf_combobox_popup_head_table_th" style="display:none;">'),a.push(""),a.push("</th>"),a.push("</tr>"),a.push("</thead>"),a.push("</table>"),a.push('<div class="_xf_combobox_popup_scroll_parent" style="height:204px;">'),a.push('<div style="height:0px;left:0px;top:0px;position:absolute;">'),a.push('<input type="text" readonly class="_xf_combobox_popup_field _xf_combobox_popup_keyboard">'),a.push("</div>"),a.push('<div class="_xf_combobox_popup_scroll_view">'),a.push('<div class="_xf_combobox_popup_scroll_content">'),a.push('<table class="_xf_combobox_popup_table _xf_combobox_popup_data_table">'),a.push(this._colgroup()),a.push('<tbody class="_xf_combobox_popup_data_tbody"></tbody>'),a.push("</table>"),a.push("</div>"),a.push("</div>"),a.push('<div class="_xfd_border_top _xf_grid_popup_border_top"></div>'),a.push('<div class="_xfd_border_left _xf_grid_popup_border_left"></div>'),a.push('<div class="_xfd_border_right _xf_grid_popup_border_right"></div>'),a.push('<div class="_xfd_border_bottom _xf_grid_popup_border_bottom"></div>'),a.push("</div>"),a.push('<div class="_xf_combobox_popup_btnbox _xf_combobox_popup_btnbox_bottom">'),a.push('<button class="_xf_combobox_popup_btn _xf_combobox_popup_btn_margin_right _xf_combobox_popup_btn_ok">선택</button>'),a.push('<button class="_xf_combobox_popup_btn _xf_combobox_popup_btn_margin_left _xf_combobox_popup_btn_cancel">취소</button>'),a.push("</div>"),a.push("</div>"),a.push("</div>"),this.xf_object=$(a.join(""))},XF_COMBOBOX_POPUP.prototype._dom=function(){this.xf_box=this.xf_object.find("._xf_combobox_popup_box"),this.xf_pbox=this.xf_object.find("._xf_combobox_popup_pbox"),this.xf_keyword=this.xf_object.find("._xf_combobox_popup_keyword"),this.xf_search=this.xf_object.find("._xf_combobox_popup_btn_search"),this.xf_keyboard=this.xf_object.find("._xf_combobox_popup_keyboard"),this.xf_head_table=this.xf_object.find("._xf_combobox_popup_head_table"),this.xf_tbody=this.xf_object.find("._xf_combobox_popup_data_tbody"),this.xf_ok=this.xf_object.find("._xf_combobox_popup_btn_ok"),this.xf_cancel=this.xf_object.find("._xf_combobox_popup_btn_cancel"),this.xf_parent=this.xf_object.find("._xf_combobox_popup_scroll_parent"),this.xf_view=this.xf_object.find("._xf_combobox_popup_scroll_view"),this.xf_content=this.xf_object.find("._xf_combobox_popup_scroll_content"),this.xf_vscroll=new XF_SCROLL(this.xf_parent,this.xf_view,this.xf_content,{id:this.xf_prop.name+"_vscroll",top:3,right:3,width:10,type:XF_SCROLL.VERT_SCROLL,on_scroll_start:$.proxy(this.on_scroll_start,this),on_scroll_end:$.proxy(this.on_scroll_end,this)})},XF_COMBOBOX_POPUP.prototype._offevent=function(){this.xf_search.off("click"),this.xf_ok.off("click"),this.xf_cancel.off("click"),this.xf_tbody.off("click"),this.xf_head_table.off("click")},XF_COMBOBOX_POPUP.prototype._event=function(){this._offevent(),this.xf_keyboard.on("keydown",$.proxy(this.on_object_keydown,this)),this.xf_keyboard.on("focus",$.proxy(this.on_keyboard_focus,this)),this.xf_keyboard.on("keydown",$.proxy(this.on_keyboard_keydown,this)),this.xf_keyword.on("keydown",$.proxy(this.on_search_keydown,this)),this.xf_search.on("click",$.proxy(this.on_search_click,this)),this.xf_ok.on("click",$.proxy(this.on_ok_click,this)),this.xf_cancel.on("click",$.proxy(this.on_cancel_click,this)),this.xf_tbody.on("click",$.proxy(this.on_tbody_click,this)),this.xf_tbody.on("dblclick",$.proxy(this.on_tbody_dblclick,this)),this.xf_head_table.on("click",$.proxy(this.on_headtable_click,this))},XF_COMBOBOX_POPUP.prototype._colgroup=function(){var a=[];return a.push("<colgroup>"),1==this.xf_combobox_prop.show_checkbox&&a.push('<col style="width:20px;">'),1==this.xf_combobox_prop.picklist_viewstyle&&a.push('<col style="width:100px;">'),a.push('<col style="width:auto;">'),a.push('<col style="width:16px;">'),a.push("</colgroup>"),a.join("")},XF_COMBOBOX_POPUP.prototype._getitemhtml=function(a,b,c,d,e){var f,g,h,i;return f=[],g=!1,i=!1,h=this._getitemdatahtml(a,b,c,d),f.push("<tr"+h+' class="_xf_combobox_popup_table_tr'),g=!0,1==g&&1==this.xf_combobox._isvaluecode(b)&&(f.push(" _xf_combobox_popup_table_tr_selected"),this.selected_index=a,i=!0),f.push('"'),f.push(' style="'),1!=d&&"1"!=d||f.push(" display:none;"),f.push(" height:"+_xfu.px(this.selectbox_itemheight)+";"),f.push(" padding-left:"+_xfu.px(this.xf_combobox_prop.text_margin[0])+";"),i&&(f.push("color:"+_xfu.rgbfunc(this.xf_combobox_prop.selitem_forecolor)+";"),f.push("background-color:"+_xfu.rgbfunc(this.xf_combobox_prop.selitem_backcolor)+";")),f.push('">'),1==this.xf_combobox_prop.show_checkbox&&(f.push('<td class="_xf_combobox_popup_data_table_td" style="padding:0px;">'),f.push('<input type="checkbox" tabindex="-1" class="_xf_combobox_popup_table_td_check_datarow"'),i&&f.push(" checked"),f.push(">"),f.push("</td>")),0!=this.xf_combobox_prop.picklist_viewstyle&&1!=this.xf_combobox_prop.picklist_viewstyle||(f.push('<td class="_xf_combobox_popup_data_table_td" style="text-align:center;">'),f.push('<span class="_xf_combobox_popup_table_td_span">'+b+"</span>"),f.push("</td>")),1!=this.xf_combobox_prop.picklist_viewstyle&&2!=this.xf_combobox_prop.picklist_viewstyle||(f.push('<td class="_xf_combobox_popup_data_table_td" style="text-align:left;">'),f.push('<span class="_xf_combobox_popup_table_td_span">'+c+"</span>"),f.push("</td>")),f.push('<td class="_xf_combobox_popup_data_table_td">'),f.push("</td>"),f.push("</tr>"),f.join("")},XF_COMBOBOX_POPUP.prototype._getitemdatahtml=function(a,b,c,d,e){var f=[];return f.push(' data-row="'+a+'"'),f.push(' data-index="'+a+'"'),f.push(' data-code="'+b+'"'),f.push(' data-comment="'+c+'"'),f.push(' data-is_hidden="'+d+'"'),void 0!==e&&f.push(' data-depth="'+e+'"'),f.join("")},XF_COMBOBOX_POPUP.prototype._refreshselectboxscroll=function(){null!=this.xf_vscroll&&this.xf_vscroll.refresh(),this.xf_selected_item=this.xf_content.find("._xf_combobox_popup_table_tr_selected"),null!=this.xf_selected_item&&this.xf_selected_item.length>0&&(this.xf_selected_item.css("background-color",_xfu.rgbfunc(this.xf_combobox_prop.selitem_backcolor)),this.xf_vscroll.focus(this.xf_selected_item))},XF_COMBOBOX_POPUP.prototype._hidepopup=function(a){
this.xf_combobox.on_combobox_popupvalue(a),this.xf_modalbox.hide()},XF_COMBOBOX_POPUP.prototype.on_search_keydown=function(){event.stopPropagation(),event.which==XFD_KEY_ENTER&&this.on_search_click()},XF_COMBOBOX_POPUP.prototype.on_search_click=function(){var a,b,c,d,e,f;if(event.stopPropagation(),e=this.xf_keyword.val(),0!=e.length)for(a=this.xf_tbody.find("._xf_combobox_popup_table_td_span"),d=a.length,c=0;d>c;c++)if(b=a[c].textContent,b.indexOf(e)>=0){f=$(a[c]).closest("tr"),this.xf_tbody.find("tr").removeClass("_xf_combobox_popup_table_tr_selected"),f.addClass("_xf_combobox_popup_table_tr_selected"),this.xf_vscroll.focus(f,XF_SCROLL.FOCUS_TYPE_NONE);break}},XF_COMBOBOX_POPUP.prototype.on_cancel_click=function(){event.stopPropagation(),this._hidepopup(null)},XF_COMBOBOX_POPUP.prototype.on_ok_click=function(){var a,b,c,d,e,f;if(event.stopPropagation(),a=this.xf_tbody.find("tr._xf_combobox_popup_table_tr_selected"),b=a.length,0>=b)return void alert(factory._userlang("선택한 항목이 없습니다.","No item is selected."));for(f=[],c=0;b>c;c++)d=$(a[c]),e=_xfu.str(d.data("code")),e.length>0&&f.push(e);this._hidepopup(f.join(this.xf_combobox_prop.value_delimiter))},XF_COMBOBOX_POPUP.prototype.on_headtable_click=function(a){a.stopPropagation()},XF_COMBOBOX_POPUP.prototype.setselectrow=function(a,b,c){b&&this.xf_tbody.find("tr").removeClass("_xf_combobox_popup_table_tr_selected"),a.addClass("_xf_combobox_popup_table_tr_selected"),c&&this.xf_vscroll.focus(a,XF_SCROLL.FOCUS_TYPE_NONE)},XF_COMBOBOX_POPUP.prototype.on_object_keydown=function(a){a.stopPropagation(),a.which==XFD_KEY_ESC&&this.on_cancel_click()},XF_COMBOBOX_POPUP.prototype.on_keyboard_keydown=function(a){var b,c,d;a.stopPropagation(),a.which!=XFD_KEY_DOWNARROW&&a.which!=XFD_KEY_UPARROW||(c=this.xf_tbody.find("tr"),d=c.length,b=this.xf_tbody.find("tr._xf_combobox_popup_table_tr_selected").index(),a.which==XFD_KEY_DOWNARROW?-1==b?this.setselectrow($(c[0]),!1,!0):d-1>b&&this.setselectrow($(c[b+1]),!0,!0):a.which==XFD_KEY_UPARROW&&(-1==b?this.setselectrow($(c[0]),!1,!0):b>0&&this.setselectrow($(c[b-1]),!0,!0))),a.which==XFD_KEY_ENTER&&this.on_ok_click()},XF_COMBOBOX_POPUP.prototype.on_keyboard_focus=function(a){},XF_COMBOBOX_POPUP.prototype.on_tbody_dblclick=function(a){a.stopPropagation(),this.on_ok_click()},XF_COMBOBOX_POPUP.prototype.on_tbody_click=function(a){var b,c;a.stopPropagation(),this.xf_keyboard.focus(),b=$(a.target),c=b.closest("tr"),null!=this.xf_vscroll&&this.xf_vscroll.focus(c,XF_SCROLL.FOCUS_TYPE_NONE),1==this.xf_combobox_prop.maxselectcount&&this.xf_tbody.find("tr").removeClass("_xf_combobox_popup_table_tr_selected"),c.addClass("_xf_combobox_popup_table_tr_selected")},XF_COMBOBOX_POPUP.prototype.on_scroll_start=function(){},XF_COMBOBOX_POPUP.prototype.on_scroll_end=function(){},XF_COMBOBOX_POPUP.prototype.refreshselectbox=function(a){var b,c,d,e,f;if(b=[],c=this.xf_picklist.getcount(),f=this.xf_combobox_prop.picklist_viewsort,0==f)for(d=0;c>d;d++)b.push(this._getitemhtml(d,this.xf_picklist.getcode(d),this.xf_picklist.getcomment(d),this.xf_picklist.gethidden(d),this.xf_combobox_prop.picklist_viewstyle));else for(e=this.xf_picklist.getsortediteminfoarr(this.xf_combobox_prop),d=0;c>d;d++)b.push(this._getitemhtml(e[d].item_index,this.xf_picklist.getcode(e[d].item_index),this.xf_picklist.getcomment(e[d].item_index),this.xf_picklist.gethidden(e[d].item_index),this.xf_combobox_prop.picklist_viewstyle));this.xf_tbody.get(0).innerHTML=b.join(""),this._refreshselectboxscroll(),a&&this.focus()},XF_COMBOBOX_POPUP.prototype.focus=function(){this.xf_keyboard.focus()};