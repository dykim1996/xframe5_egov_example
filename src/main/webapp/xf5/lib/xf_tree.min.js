/* 2020-10-30 18:04 */ function XF_TREE(a,b){this._init(a,b),this._prop(b),this._box()}XF_TREE.ITEMSELECT_TEXT=0,XF_TREE.ITEMSELECT_ROW=1,XF_TREE.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_TREE,b),this.xf_context=null,this.xf_drop_context=null,this.xf_dropempty_context=null,this.xf_drag_item=null,this.drag_item_row_index=-1,this.drag_target_row_index=-1,this.base_depth=0,this.depth_font_arr=[],this.xdataset_depth_column_id="DEPTH",this.xdataset_text_column_id="TEXT",this.xdataset_data_column_id="DATA",this.xdataset_image_column_id="IMAGE",this.xdataset_selimage_column_id="SELIMAGE",this.xdataset_key_column_id="KEY",this.xf_tree_row_arr=[],this.tree_row_count=0,this.item_id_seq_no=0,this.selected_row_index=-1,this.clicked_itemid=-1,this.dblclick_timer_id=-1,this.css_content_arr=[],this.css_text_arr=[],this.itemheight=-1,this.xf_dragdrop=null},XF_TREE.prototype._prop=function(a){this.xf_prop={style:"",font:["굴림체",9,0,0,0,0],fore_color:[0,0,0],back_color:[255,255,255],back_color_opacity:10,transparent:!1,border:1,border_color:[180,180,180],border_radius:"0",border_width:1,border_ex:"",back_image:"",back_imagesize:0,back_imagehorzalign:0,back_imagevertalign:0,back_imagefillstyle:0,gradient_effect:0,gradient_startcolor:[255,255,255],gradient_endcolor:[225,225,225],selectitem_backcolor:[15,153,255],selectitem_forecolor:[255,255,255],padding:[0,0,0,0],boxshadow_type:0,tree_linkdata:"",picklist:"",imagelist:"",button_imagelist:"",check_imagelist:"",has_lines:!1,has_buttons:!0,has_checkboxes:!1,has_icons:!0,itemheight:-1,item_buttonwidth:12,item_checkwidth:13,item_imagewidth:16,item_gapwidth:3,item_depthwidth:16,item_rename_menushow:!0,item_delete_menushow:!0,item_nochild_menushow:!0,enable:!0,hidden:!1,enterstop:!0,tabstop:!0,dragable:!1,accept_drop:!1,itemdblclick_expand:!0,delay_itemclick:!1,itemselect_always:!1,itemselect_style:0,resize_dir:0,horzscrollbar_style:1,vertscrollbar_style:1,popupmenu_show:!0,popupmenu_id:"",popupmenu_drop_id:"",popupmenu_dropempty_id:"",opacity:10},this.event_name_arr=["on_begindrag","on_enddrag","on_dropcomplete","on_itemclick","on_itemdblclick","on_itemselect","on_itemexpanded","on_rclick"],void 0!==a.imagelist&&("default"==a.imagelist?delete a.imagelist:(a.imagelist=a.imagelist.split(","),a.imagelist=_xfu.trimquot(a.imagelist[0]))),_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),this._xdataset(this,!0),this._css(a),this._itemheight(this.xf_prop.itemheight)},XF_TREE.prototype._css=function(a){1!=_xf_htmlready_mode&&(_xfx.propcss(this,a,this.css_arr,["position","opacity","hidden","fore_color","border_radius","back_imagesize","back_imagefillstyle","vertscrollbar_style","horzscrollbar_style"]),_xfx.propbackcolor(this,a,this.css_arr),_xfx.propgradient(this,a,this.css_arr),_xfx.propbackimagepos(this,a,this.css_arr),_xfx.bordercss(this,a,this.css_arr),this._css_content(a),this._css_text(a))},XF_TREE.prototype._css_content=function(a){_xfx.propcss(this,a,this.css_content_arr,["position","padding"])},XF_TREE.prototype._css_text=function(a){_xfx.propcss(this,a,this.css_text_arr,["font"])},XF_TREE.prototype._xdataset=function(){var a;if(this.xf_prop.tree_linkdata.length>0){if(a=this.xf_prop.tree_linkdata.split(":"),void 0===this.xdataset_type&&(this.xdataset_type=XFD_XDATASET_NORMAL),this.xdataset_id=a[0],this.xf_xdataset=this.xf_parent.xf_content.xf_execution_context[this.xdataset_id],void 0!==this.xf_xdataset&&null!=this.xf_xdataset||(this.xdataset_type=XFD_XDATASET_GLOBAL,this.xf_xdataset=factory.getglobalxdataset(this.xdataset_id)),0==_xfx.isvalidxdataset(this,!0))return;this.xf_xdataset._addlinkobject(this),void 0===this.xdataset_column_type&&(this.xdataset_column_type=XFD_XDATASET_COLUMN_DATA),this.xdataset_depth_column_id=a[1],this.xdataset_text_column_id=a[2],this.xdataset_data_column_id=a[3],this.xdataset_image_column_id=a[4],this.xdataset_selimage_column_id=a[5],this.xdataset_key_column_id=a[6]}else this.xdataset_id=_xfx.xdatasetid(this),this.xdataset_type=XFD_XDATASET_INNER,this.xf_xdataset=new XF_XDATASET(null,{id:this.xdataset_id}),this.xf_xdataset.xdataset_type=XFD_XDATASET_INNER,this.xdataset_column_type=XFD_XDATASET_COLUMN_INNER,this.xdataset_depth_column_id=_xfx.xdatasetcolumnid(this),this.xdataset_text_column_id=_xfx.xdatasetcolumnid(this),this.xdataset_data_column_id=_xfx.xdatasetcolumnid(this),this.xdataset_image_column_id=_xfx.xdatasetcolumnid(this),this.xdataset_selimage_column_id=_xfx.xdatasetcolumnid(this),this.xdataset_key_column_id=_xfx.xdatasetcolumnid(this),this.xf_xdataset._addcolumn(XFD_XDATASET_COLUMN_INNER,this.xdataset_depth_column_id,"",0,!1),this.xf_xdataset._addcolumn(XFD_XDATASET_COLUMN_INNER,this.xdataset_text_column_id,"",0,!1),this.xf_xdataset._addcolumn(XFD_XDATASET_COLUMN_INNER,this.xdataset_data_column_id,"",0,!1),this.xf_xdataset._addcolumn(XFD_XDATASET_COLUMN_INNER,this.xdataset_image_column_id,"",0,!1),this.xf_xdataset._addcolumn(XFD_XDATASET_COLUMN_INNER,this.xdataset_selimage_column_id,"",0,!1),this.xf_xdataset._addcolumn(XFD_XDATASET_COLUMN_INNER,this.xdataset_key_column_id,"",0,!1),this.xf_xdataset._addlinkobject(this)},XF_TREE.prototype._box=function(){var a;0==_xf_htmlready_mode&&(a=[],a.push("<div"),a.push(' id="'+this.xf_prop.internal_name+'"'),a.push(' class="'+_xfx.propclass(this,this.xf_prop,"_xf_tree")+'"'),a.push(' style="'),a.push(this.css_arr.join("")),_xfx.sizeposcss(this,this.xf_prop,a),a.push('">'),a.push("<div"),a.push(' class="_xfd_hidden_keyboard_box"'),a.push(">"),a.push('<input class="_xfd_hidden_keyboard_input"'),1==_xfu.ismobile()&&a.push(" readonly"),a.push(' tabindex="-1"/>'),a.push("</div>"),a.push("<div"),a.push(' class="_xf_tree_content"'),a.push(' style="'),a.push(this.css_content_arr.join("")),a.push('">'),a.push("</div>"),a.push("</div>")),_xfx.register(this,!1,a)},XF_TREE.prototype._context=function(){var a,b,c;a={id:this.xf_prop.internal_name+"_context_menu",menu_width:100,callback:$.proxy(this.on_context_click,this)},this.xf_context=new XF_CONTEXT(this,a),b=this.xf_prop.popupmenu_id,0==b.length&&(b="_default"),c=factory_xf_param.CONTEXT_MENU&&factory_xf_param.CONTEXT_MENU.TREE&&factory_xf_param.CONTEXT_MENU.TREE[b]?factory_xf_param.CONTEXT_MENU.TREE[b]:{menu_width:100,menu_arr:[{id:"rename",icon:"edit",label:factory._userlang("이름 바꾸기","Rename"),is_hidden:!this.xf_prop.item_rename_menushow},{id:"delete",icon:"trash",label:factory._userlang("삭제","Delete"),is_hidden:!this.xf_prop.item_delete_menushow},{type:"separator"},{id:"close",icon:"close",label:factory._userlang("닫기","Close")}]},0==this.xf_prop.item_rename_menushow&&0==this.xf_prop.item_delete_menushow&&(c.menu_arr=[]),this._setcontextmenuinfo(this.xf_context,c)},XF_TREE.prototype._context_drop=function(){this._context_drop_1depth()},XF_TREE.prototype._context_drop_1depth=function(){var a,b,c;a={id:this.xf_prop.internal_name+"_drop_context_menu",menu_width:200,callback:$.proxy(this.on_dropcontext_click,this)},this.xf_drop_context=new XF_CONTEXT(this,a),b=this.xf_prop.popupmenu_drop_id,0==b.length&&(b="_default_drop"),c=factory_xf_param.CONTEXT_MENU&&factory_xf_param.CONTEXT_MENU.TREE&&factory_xf_param.CONTEXT_MENU.TREE[b]?factory_xf_param.CONTEXT_MENU.TREE[b]:{menu_width:200,menu_arr:[{id:"move-above",icon:"above",label:factory._userlang("위로 이동","Move Up")},{id:"move-child_first",icon:"childfirst",label:factory._userlang("하위 맨위로 이동","Move Below Top")},{id:"move-child_last",icon:"childlast",label:factory._userlang("하위 맨끝로 이동","Move Below Bottom")},{id:"move-below",icon:"below",label:factory._userlang("아래로 이동","Move Down")},{type:"separator"},{id:"copy-above",icon:"above",label:factory._userlang("위에 복사","Copy Above")},{id:"copy-above-nochild",icon:"above",label:factory._userlang("위에 복사(자식불포함)","Copy Up(NoChild)")},{id:"copy-child_first",icon:"childfirst",label:factory._userlang("하위 맨위에 복사","Copy Below Top")},{id:"copy-child_first-nochild",icon:"childfirst",label:factory._userlang("하위 맨위에 복사(자식불포함)","Copy Below Top(NoChild)")},{id:"copy-child_last",icon:"childlast",label:factory._userlang("하위 맨끝에 복사","Copy Below Bottom")},{id:"copy-child_last-nochild",icon:"childlast",label:factory._userlang("하위 맨끝에 복사(자식불포함)","Copy Below Bottom(NoChild)")},{id:"copy-below",icon:"below",label:factory._userlang("아래에 복사","Copy Below")},{id:"copy-below-nochild",icon:"below",label:factory._userlang("아래에 복사(자식불포함)","Copy Below(NoChild)")},{type:"separator"},{id:"close",icon:"close",label:factory._userlang("닫기","Close")}]},this._setcontextmenuinfo(this.xf_drop_context,c)},XF_TREE.prototype._context_dropempty=function(){var a,b,c;a={id:this.xf_prop.internal_name+"_dropempty_context_menu",menu_width:130,callback:$.proxy(this.on_dropcontext_click,this)},this.xf_dropempty_context=new XF_CONTEXT(this,a),b=this.xf_prop.popupmenu_dropempty_id,0==b.length&&(b="_default_dropempty"),c=factory_xf_param.CONTEXT_MENU&&factory_xf_param.CONTEXT_MENU.TREE&&factory_xf_param.CONTEXT_MENU.TREE[b]?factory_xf_param.CONTEXT_MENU.TREE[b]:{menu_width:130,menu_arr:[{id:"move-below-empty",icon:"move",label:factory._userlang("이동","Move")},{id:"copy-below-empty",icon:"copy",label:factory._userlang("복사","Copy")},{id:"copy-below-empty-nochild",icon:"copy",label:factory._userlang("복사(자식불포함)","Copy(NoChild)")},{type:"separator"},{id:"close",icon:"close",label:factory._userlang("닫기","Close")}]},this._setcontextmenuinfo(this.xf_dropempty_context,c)},XF_TREE.prototype._dom=function(){this.xf_content=this.xf_object.find("._xf_tree_content"),this.xf_keyboard=this.xf_object.find("._xfd_hidden_keyboard_input")},XF_TREE.prototype._data=function(){this.xdataset_type==XFD_XDATASET_INNER?""!=this.xf_prop.picklist&&this._setpicklist(this.xf_prop.picklist):this.xdataset_type==XFD_XDATASET_NORMAL&&(this._createtreerowarr(),this._displaytree())},XF_TREE.prototype._offrenameevent=function(){_xfj.offevent(this.xf_rename,["mousedown","click","dblclick","blur","keydown"])},XF_TREE.prototype._renameevent=function(){this.xf_rename.on("mousedown",$.proxy(this.on_rename_mousedown,this)),this.xf_rename.on("click",$.proxy(this.on_rename_click,this)),this.xf_rename.on("dblclick",$.proxy(this.on_rename_dblclick,this)),this.xf_rename.on("blur",$.proxy(this.on_rename_blur,this)),this.xf_rename.on("keydown",$.proxy(this.on_rename_keydown,this))},XF_TREE.prototype._offevent=function(){_xfj.offevent(this.xf_object,["click","contextmenu","mousedown"]),_xfj.offevent(this.xf_keyboard,["focus","blur","keydown"]),_xfj.offevent(this.xf_object,["dragstart","dragend"]),_xfj.offevent(this.xf_object,["dragenter","dragover","dragleave","drop"])},XF_TREE.prototype._event=function(){this.xf_object.on("click",$.proxy(this.on_object_click,this)),this.xf_object.on("contextmenu",$.proxy(this.on_object_contextmenu,this)),this.xf_object.on("mousedown",$.proxy(this.on_object_mousedown,this)),this.xf_keyboard.on("focus",$.proxy(this.on_keyboard_focus,this)),this.xf_keyboard.on("blur",$.proxy(this.on_keyboard_blur,this)),this.xf_keyboard.on("keydown",$.proxy(this.on_keyboard_keydown,this)),this.xf_object.on("dragstart",$.proxy(this.on_object_dragstart,this)),this.xf_object.on("dragend",$.proxy(this.on_object_dragend,this)),this.xf_object.on("dragenter",$.proxy(this.on_object_dragenter,this)),this.xf_object.on("dragover",$.proxy(this.on_object_dragover,this)),this.xf_object.on("dragleave",$.proxy(this.on_object_dragleave,this)),this.xf_object.on("drop",$.proxy(this.on_object_drop,this))},XF_TREE.prototype._create=function(){this._context(),this._context_drop(),this._context_dropempty(),this._dom(),this._data(),this._event()},XF_TREE.prototype._itemheight=function(a){var b;this.item_height=a,-1==this.item_height&&(b=_xfj.textsize("AAA",this.xf_prop.font),this.item_height=b.height+4)},XF_TREE.prototype._selectitembydisplayindex=function(a,b){var c,d;return d=this.xf_object.find('._xf_tree_item[data-display_index="'+a+'"]'),0!=d.length?(c=_xfu["int"](d.data("row")),this._selectitem(c,b)):void 0},XF_TREE.prototype._selectitem=function(a,b){var c,d,e,f,g,h;0>a||(c=!1,this.selected_row_index!==a&&(c=!0),this.selected_row_index=a,d=this._itemdom(a),null!=d.xf_item&&(h=this.xf_object.find("._xf_tree_item_text_selected"),h.length>0&&(e=h.parent(),f=e.find("._xf_tree_item_icon"),g=h.data("row"),a!=g&&(this._css_item(!1,e),this._css_itemicon(this._itemimage(g),f),this._css_itemtext(!1,h),this.xf_tree_row_arr[g]&&this.xf_tree_row_arr[g].fore_color&&h.css("color",_xfu.rgbfunc(this.xf_tree_row_arr[g].fore_color)))),this._css_item(!0,d.xf_item),this._css_itemicon(this._itemselimage(a),d.xf_icon),this._css_itemtext(!0,d.xf_text),void 0!==b&&(1==b.is_set_focus&&this.setfocus(),1==b.is_set_xdataset&&this.xf_xdataset._moveat(a,!0,this)),this._visibleitem(a),1!=c&&1!=this.xf_prop.itemselect_always||factory._fireevent({xf_component:this,event_name:"on_itemselect"},this,this._itemid(a))))},XF_TREE.prototype._expanditem=function(a,b,c){var d;if(void 0===c&&(c=!0),b=_xfu["int"](b),isNaN(b)||1>b||b>3)return!1;if(a=_xfu["int"](a),0==this._isvalidrow(a))return!1;if(d=this._itemdom(a),null==d.xf_item)return!1;if(b==XFD_TREEITEM_COLLAPSE)d.xf_button.hasClass("_xf_tree_item_button_collapse")&&(this._css_itembutton(!0,d.xf_button),this._itemexpanded(a,!1,!1),this._setchildrowhidden(this.xf_xdataset.getrowcount(),a,this._itemdepth(a),!0),c&&this._displaytree());else if(b==XFD_TREEITEM_EXPAND)d.xf_button.hasClass("_xf_tree_item_button_expand")&&(this._css_itembutton(!1,d.xf_button),this._itemexpanded(a,!0,!1),this._setchildrowhidden(this.xf_xdataset.getrowcount(),a,this._itemdepth(a),!1),c&&this._displaytree(),factory._fireevent({xf_component:this,event_name:"on_itemexpanded"},this,this._itemid(a)));else if(b==XFD_TREEITEM_TOGGLE)return 1==this._itemexpanded(a)?this._expanditem(a,XFD_TREEITEM_COLLAPSE,c):this._expanditem(a,XFD_TREEITEM_EXPAND,c);return!0},XF_TREE.prototype._expandparentitem=function(a){var b;if(a=_xfu["int"](a),0==this._isvalidrow(a))return!1;for(;;){if(b=this._getparentinfo(a,this._itemdepth(a)),-1==b.row_index)break;a=b.row_index,b.is_expanded||(this._itemexpanded(a,!0,!1),this._setchildrowhidden(this.xf_xdataset.getrowcount(),a,this._itemdepth(a),!1))}return this._displaytree(),!0},XF_TREE.prototype._getitem=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;if(e=this.xf_xdataset.getrowcount(),"next"==b){if(0==c)return a==e-1?0:this._itemid(a+1);if(a==e-1)return 0;for(f=this._itemdepth(a),d=a+1;e>d&&(g=this._itemdepth(d),!(f>g));d++)if(g==f)return this._itemid(d);return 0}if("prev"==b){if(0==c)return 0==a?0:this._itemid(a-1);if(0==a)return 0;for(f=this._itemdepth(a),d=a-1;d>=0&&(g=this._itemdepth(d),!(f>g));d--)if(g==f)return this._itemid(d);return 0}return"next_visible"==b?a==e-1?0:(i=this.xf_object.find('._xf_tree_item_text[data-row="'+a+'"]'),0==i.length?0:(h=_xfu["int"](i.data("display_index")),j=this.xf_object.find('._xf_tree_item_text[data-display_index="'+(h+1)+'"]'),0==j.length?0:(k=_xfu["int"](j.data("row")),this._itemid(k)))):"prev_visible"==b?0==a?0:(i=this.xf_object.find('._xf_tree_item_text[data-row="'+a+'"]'),0==i.length?0:(h=_xfu["int"](i.data("display_index")),l=this.xf_object.find('._xf_tree_item_text[data-display_index="'+(h-1)+'"]'),0==l.length?0:(m=_xfu["int"](l.data("row")),this._itemid(m)))):0},XF_TREE.prototype._visibleitem=function(a){var b;return 0==this._isvalidrow(a)?!1:1==this._itemhidden(a)?!1:(b=this._itemdom(a),null==b.xf_text||0==b.xf_text.length?!1:void _xfj.vscroll(this.xf_object,b.xf_item))},XF_TREE.prototype._deleteitem=function(a,b){var c,d,e;for(e=a.length,c=e-1;c>=0;c--)d=a[c],this._deletetreerow(d,!0,!0),d==this.selected_row_index&&(this.selected_row_index=-1);void 0!=b&&1!=b||this._displaytree()},XF_TREE.prototype._insertitem=function(a,b,c,d,e,f,g,h,i,j,k){var l;l=!0,this.xdataset_column_type==XFD_XDATASET_COLUMN_INNER&&(l=!1),this._inserttreerow(a,h,!0,l),this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_depth_column_id,b,l,this,this),this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_text_column_id,c,l,this,this),this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_data_column_id,d,l,this,this),this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_image_column_id,e,l,this,this),this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_selimage_column_id,f,l,this,this),this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_key_column_id,g,l,this,this),this.xf_xdataset._setcheckedrow(a,j,!0,this),void 0!=k&&1!=k||(this._displaytree(),1==this.getitemcount()&&this._selectitem(a,{is_set_xdataset:!0,is_set_focus:!1}))},XF_TREE.prototype._copymoveitem=function(a,b,c,d,e,f,g,h){var i,j,k,l;if(null==c&&(c=this),void 0===f&&(f=1==b?0:""),void 0===g&&(g=0),void 0===h&&(h=!0),i=1==b?c._getrowindexbyid(d):c._getrowindexbykey(d),0==c._isvalidrow(i))return!1;if(j=1==b?this._getrowindexbyid(e):this._getrowindexbykey(e),0==this._isvalidrow(j))j=-1,l="below",k=-1,1==b?f>0&&(k=this._getrowindexbyid(f)):f.length>0&&(k=this._getrowindexbykey(f)),k>=0&&(k==j?l="child_first":(j=k,l="below"));else{if(l="child_last",0!=g)switch(g){case 1:l="below";break;case 2:l="above";break;case 3:l="child_first";break;case 4:l="child_last"}0==g&&1==this._isvalidrow(j)&&(k=-1,1==b?f>0&&(k=this._getrowindexbyid(f)):f.length>0&&(k=this._getrowindexbykey(f)),k>=0&&(k==j?l="child_first":(j=k,l="below")))}return this._moveitem({xf_src_tree:c,xf_dst_tree:this,src_row_index:i,dst_row_index:j,is_include_child:h,action:a,target:l}),!0},XF_TREE.prototype._moveitem=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(void 0===a.is_include_child&&(a.is_include_child=!0),c=[],b=a.xf_src_tree._iteminfo(a.src_row_index),d=a.xf_src_tree._itemdepth(a.src_row_index),f=a.xf_src_tree.xf_xdataset.getrowcount(),a.dst_row_index<0?(e=this.base_depth,a.target="below"):e=a.xf_dst_tree._itemdepth(a.dst_row_index),n=!1,"move"==a.action&&a.xf_src_tree===a.xf_dst_tree&&a.src_row_index<a.dst_row_index&&(n=!0),c.push(b),"copy"!=a.action||0!=a.is_include_child)for(j=a.src_row_index+1;f>j&&(l=a.xf_src_tree._itemdepth(j),!(l<=b.depth));j++)c.push(a.xf_src_tree._iteminfo(j));if(k=c.length,"move"==a.action&&a.xf_src_tree===a.xf_dst_tree)for(j=k-1;j>=0;j--)c[j].row_value_arr=a.xf_src_tree.xf_xdataset._getrowvaluearr(c[j].row_index,XFD_XDATASET_COLUMN_ALL);else if("copy"==a.action&&a.xf_src_tree.xdataset_type==XFD_XDATASET_NORMAL)for(j=k-1;j>=0;j--)c[j].row_value_arr=a.xf_src_tree.xf_xdataset._getrowvaluearr(c[j].row_index,XFD_XDATASET_COLUMN_DATA);if("move"==a.action)for(j=k-1;j>=0;j--)a.xf_src_tree._deletetreerow(c[j].row_index,!0,!0);for(1==n&&(a.dst_row_index-=k),i=0,"below"!=a.target&&"child_last"!=a.target||(i=-1==a.dst_row_index?this.xf_xdataset.getrowcount():a.xf_dst_tree._getchild(a.dst_row_index,"count",!0)),j=0;k>j;j++)h=c[j],m=h.depth-d,"above"==a.target||"below"==a.target?h.depth=e+m:"child_first"!=a.target&&"child_last"!=a.target||(h.depth=e+1+m),"above"==a.target?h.row_index=a.dst_row_index+j:"below"==a.target?h.row_index=a.dst_row_index+1+i+j:"child_first"==a.target?h.row_index=a.dst_row_index+1+j:"child_last"==a.target&&(h.row_index=a.dst_row_index+1+i+j);for(j=0;k>j;j++)if(h=c[j],g="","move"==a.action&&a.xf_src_tree===a.xf_dst_tree&&(g=h.item_id),a.xf_dst_tree._insertitem(h.row_index,h.depth,h.text,h.data,h.image,h.selimage,h.key,g,h.is_expanded,h.is_checked,!1),void 0!==h.row_value_arr)for(p=h.row_value_arr.length,q=h.row_value_arr,o=0;p>o;o++)q[o].column_id!=this.xdataset_depth_column_id&&q[o].column_id!=this.xdataset_text_column_id&&q[o].column_id!=this.xdataset_data_column_id&&q[o].column_id!=this.xdataset_image_column_id&&q[o].column_id!=this.xdataset_selimage_column_id&&q[o].column_id!=this.xdataset_key_column_id&&a.xf_dst_tree.xf_xdataset._setdatabyname(h.row_index,q[o].column_type,q[o].column_id,q[o].column_value,!0,this,this);"move"==a.action&&a.xf_src_tree!==a.xf_dst_tree&&a.xf_src_tree._displaytree(),a.xf_dst_tree._displaytree()},XF_TREE.prototype._updatelastdepthsiblingitem=function(){var a;for(a=0;a<this.tree_row_count;a++)this.xf_tree_row_arr[a].is_last_siblingitem=this._islastdepthsiblingitem(this.tree_row_count,a,this._itemdepth(a))},XF_TREE.prototype._islastdepthsiblingitem=function(a,b,c){var d,e;for(d=b+1;a>d;d++)if(e=this._itemdepth(d),!(e>c)){if(e==c)return!1;if(c>e)return!0}return!0},XF_TREE.prototype._gettreevlineclassname=function(a,b,c,d){var e,f;if(e="_xf_tree_item_button_vline_middle",0==factory_xf_param.TREE_LINESTYLE){if(0==b){if(e="_xf_tree_item_button_vline_first",f=this.xf_tree_row_arr[b].is_last_siblingitem)return"_xf_tree_item_button_vline_none"}else if(f=this.xf_tree_row_arr[b].is_last_siblingitem)return"_xf_tree_item_button_vline_last"}else 1==factory_xf_param.TREE_LINESTYLE&&(-1==d.row_index?c==this.base_depth?e="_xf_tree_item_button_vline_none":(f=this.xf_tree_row_arr[b].is_last_siblingitem,f&&(e="_xf_tree_item_button_vline_last")):0==b?(e="_xf_tree_item_button_vline_first",f=this.xf_tree_row_arr[b].is_last_siblingitem,f&&(e="_xf_tree_item_button_vline_none")):(f=this.xf_tree_row_arr[b].is_last_siblingitem,f&&(e="_xf_tree_item_button_vline_last")));return e},XF_TREE.prototype._displaytree=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(c=0,this.xf_content.empty(),b=this.xf_xdataset.getrowcount(),0>b)return void(this.selected_row_index=-1);for(0==b?this.base_depth=0:(this.base_depth=this._itemdepth(0),this.base_depth=_xfu["int"](this.base_depth),-1==this.selected_row_index&&(this.selected_row_index=0)),1==this.xf_prop.has_lines&&this._updatelastdepthsiblingitem(),r=[],a=0;b>a;a++)if(d=this._itemdepth(a),e=this._itemtext(a),f=this._itemdata(a),g=this._itemimage(a),h=this._itemselimage(a),i=this._itemkey(a),j=this._itemtooltip(a),k=this._itemexpanded(a),l=this._itemhidden(a),p=this._haschild(a,d,b),m=this.xf_xdataset._ischeckedrow(a),q=this._itemcheckenable(a),0==k&&this._setchildrowhidden(b,a,d,!0),1!=l&&0!=e.length)if(s=this._itemdatahtml(a,c,d),o=this._getparentinfo(a,d),0!=o.is_expanded||-1==o.row_index){if(r.push('<div class="_xf_tree_item'),a==this.selected_row_index&&r.push(" _xf_tree_item_selected _xf_tree_item_row_selected"),r.push('"'),r.push(s),r.push(' style="'),r.push("height:"+_xfu.px(this.item_height)+";"),this.xf_prop.itemselect_style==XF_TREE.ITEMSELECT_ROW&&a==this.selected_row_index&&r.push(this._css_item(!0,null)),r.push('"'),r.push(">"),0==factory_xf_param.TREE_LINESTYLE?n=(d-this.base_depth)*this.xf_prop.item_depthwidth:1==factory_xf_param.TREE_LINESTYLE&&(w=this.xf_prop.item_gapwidth+this.xf_prop.item_buttonwidth+this.xf_prop.item_gapwidth,n=(d-this.base_depth)*w),r.push('<div class="_xf_tree_item_element"'),r.push(' style="'),r.push("width:"+_xfu.px(n)+";"),r.push('">'),0==factory_xf_param.TREE_LINESTYLE&&1==this.xf_prop.has_lines)for(t=0;t<d-this.base_depth;t++)u=this._getparentinfobyparentdepth(a,this.base_depth+t),v=!1,u.row_index>=0&&(v=this.xf_tree_row_arr[u.row_index].is_last_siblingitem),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button"'),r.push(s),r.push(' style="'),r.push("position:absolute;"),v&&r.push("display:none;"),r.push("left:"+_xfu.px(t*this.xf_prop.item_depthwidth)+";"),r.push("width:"+_xfu.px(this.xf_prop.item_buttonwidth)+";"),r.push("margin-left:"+_xfu.px(this.xf_prop.item_gapwidth)+";"),0==this.xf_prop.has_buttons&&r.push("display:none;"),r.push('">'),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_vline _xf_tree_item_button_vline_middle"></div>'),r.push("</div>");else if(1==factory_xf_param.TREE_LINESTYLE&&1==this.xf_prop.has_lines){for(t=0;t<d-this.base_depth-1;t++)u=this._getparentinfobyparentdepth(a,this.base_depth+t+1),v=!1,u.row_index>=0&&(v=this.xf_tree_row_arr[u.row_index].is_last_siblingitem),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button"'),r.push(s),r.push(' style="'),r.push("position:absolute;"),r.push("left:"+_xfu.px(t*w)+";"),r.push("width:"+_xfu.px(w)+";"),r.push('">'),-1!=u.row_index&&(r.push('<div tabindex="-1" class="_xf_tree_item_element'),0==v&&r.push(" _xf_tree_item_button_vline _xf_tree_item_button_vline_middle"),r.push('"></div>')),r.push("</div>");r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button"'),r.push(s),r.push(' style="'),r.push("position:absolute;"),r.push("left:"+_xfu.px(t*w)+";"),r.push("width:"+_xfu.px(w)+";"),r.push('">'),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_vline '),r.push(this._gettreevlineclassname(b,a,d,o)),r.push('"></div>'),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_hline _xf_tree_item_button_hline_right"></div>'),r.push("</div>")}r.push("</div>"),0==factory_xf_param.TREE_LINESTYLE?(r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button"'),r.push(s),r.push(' style="'),r.push("margin-left:"+_xfu.px(this.xf_prop.item_gapwidth)+";"),r.push("width:"+_xfu.px(this.xf_prop.item_buttonwidth)+";"),0==this.xf_prop.has_buttons&&r.push("display:none;"),r.push('">'),1==this.xf_prop.has_lines&&(r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_vline '),r.push(this._gettreevlineclassname(b,a,d,o)),r.push('"></div>'),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_hline _xf_tree_item_button_hline_right"></div>')),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_action '),p?k?r.push(" _xf_tree_item_button_collapse"):r.push(" _xf_tree_item_button_expand"):r.push(" _xf_tree_item_button_none"),r.push('"'),r.push(s),r.push(' style="'),1==p&&(r.push(this._css_itembutton(k,null)),this.xf_prop.button_imagelist.length>0&&r.push("background-image:"+_xfx.imageurlfunc(this.xf_prop.button_imagelist)+";")),r.push('">'),r.push("</div>"),r.push("</div>")):1==factory_xf_param.TREE_LINESTYLE&&(r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button"'),r.push(s),r.push(' style="'),r.push("width:"+_xfu.px(w)+";"),0==this.xf_prop.has_buttons&&r.push("display:none;"),r.push("text-align:center;"),r.push('">'),1==this.xf_prop.has_lines&&(p&&(r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_vline '),k?r.push("_xf_tree_item_button_vline_first"):r.push("_xf_tree_item_button_vline_none"),r.push('"></div>')),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_hline '),p?d==this.base_depth?r.push("_xf_tree_item_button_hline_none"):r.push("_xf_tree_item_button_hline_left"):d==this.base_depth?r.push("_xf_tree_item_button_hline_none"):r.push("_xf_tree_item_button_hline_left"),r.push('"></div>')),r.push('<div tabindex="-1" class="_xf_tree_item_element _xf_tree_item_button_action'),p?k?r.push(" _xf_tree_item_button_collapse"):r.push(" _xf_tree_item_button_expand"):r.push(" _xf_tree_item_button_none"),r.push('"'),r.push(s),r.push(' style="'),r.push("width:"+_xfu.px(this.xf_prop.item_buttonwidth)+";"),1==p&&(r.push(this._css_itembutton(k,null)),this.xf_prop.button_imagelist.length>0&&r.push("background-image:"+_xfx.imageurlfunc(this.xf_prop.button_imagelist)+";")),r.push('">'),r.push("</div>"),r.push("</div>")),r.push('<div class="_xf_tree_item_element _xf_tree_item_checkbox'),m&&r.push(" _xf_tree_item_checkbox_checked"),r.push('"'),r.push(s),r.push(' style="'),0==this.xf_prop.has_checkboxes?r.push("display:none;"):(0==factory_xf_param.TREE_LINESTYLE&&r.push("margin-left:"+_xfu.px(this.xf_prop.item_gapwidth)+";"),r.push("width:"+_xfu.px(this.xf_prop.item_checkwidth)+";"),this.xf_prop.check_imagelist.length>0&&r.push("background-image:"+_xfx.imageurlfunc(this.xf_prop.check_imagelist)+";"),r.push(this._css_itemcheck(m,q,null))),r.push('">'),r.push("</div>"),r.push('<div class="_xf_tree_item_element _xf_tree_item_icon"'),r.push(s),r.push(' style="'),0==this.xf_prop.has_icons?r.push("display:none;"):(0==factory_xf_param.TREE_LINESTYLE?r.push("margin-left:"+_xfu.px(this.xf_prop.item_gapwidth)+";"):1==factory_xf_param.TREE_LINESTYLE&&1==this.xf_prop.has_checkboxes&&r.push("margin-left:"+_xfu.px(this.xf_prop.item_gapwidth)+";"),r.push("width:"+_xfu.px(this.xf_prop.item_imagewidth)+";"),this.xf_prop.imagelist.length>0&&r.push("background-image:"+_xfx.imageurlfunc(this.xf_prop.imagelist)+";"),r.push(this._css_itemicon(g,null))),r.push('">'),r.push("</div>"),r.push('<button tabindex="-1" class="_xf_tree_item_element _xf_tree_item_text _xfd_padding_button'),a==this.selected_row_index&&r.push(" _xf_tree_item_text_selected"),r.push('"'),r.push(s),0==_xfu.trim(j).length?r.push(' title="'+_xfu.quot(e)+'"'):r.push(' title="'+_xfu.quot(_xfu.trim(j))+'"'),1==this.xf_prop.dragable&&r.push(' draggable="true"'),r.push(' style="'),r.push(this.css_text_arr.join("")),1==factory_xf_param.TREE_LINESTYLE&&0==this.xf_prop.has_checkboxes&&0==this.xf_prop.has_icons&&r.push("margin-left:"+_xfu.px(-1*this.xf_prop.item_gapwidth)+";"),r.push("padding-left:"+_xfu.px(this.xf_prop.item_gapwidth)+";"),r.push("padding-right:"+_xfu.px(this.xf_prop.item_gapwidth)+";"),this.xf_prop.itemselect_style==XF_TREE.ITEMSELECT_TEXT&&a==this.selected_row_index&&r.push(this._css_itemtext(!0,null)),this.depth_font_arr[d]&&r.push(_xfc.font(null,this.depth_font_arr[d])),this.xf_tree_row_arr[a].fore_color&&r.push("color:"+_xfu.rgbfunc(this.xf_tree_row_arr[a].fore_color)+";"),r.push('">'),r.push(e),r.push("</button>"),r.push("</div>"),c++}else this._itemhidden(a,!0);this.xf_content[0].innerHTML=r.join("")},XF_TREE.prototype._css_itembutton=function(a,b){var c;return c=0,a&&(c=-1*this.xf_prop.item_buttonwidth),void 0===b||null===b?"background-position:"+_xfu.px(c)+" center;":void b.css("background-position",_xfu.px(c)+" center")},XF_TREE.prototype._css_itemcheck=function(a,b,c){var d;if(void 0===b||1==b){if(d=0,a&&(d=-1*this.xf_prop.item_checkwidth),void 0===c||null===c)return"background-position:"+_xfu.px(d)+" center;";a?c.addClass("_xf_tree_item_checkbox_checked"):c.removeClass("_xf_tree_item_checkbox_checked"),c.css("background-position",_xfu.px(d)+" center")}else{if(d=-2*this.xf_prop.item_checkwidth,a&&(d=-3*this.xf_prop.item_checkwidth),void 0===c||null===c)return"background-position:"+_xfu.px(d)+" center;";a?c.addClass("_xf_tree_item_checkbox_checked"):c.removeClass("_xf_tree_item_checkbox_checked"),c.css("background-position",_xfu.px(d)+" center")}},XF_TREE.prototype._css_itemicon=function(a,b){var c;return c=_xfu["int"](a)*this.xf_prop.item_imagewidth*-1,isNaN(c)?void 0:void 0===b||null===b?"background-position:"+_xfu.px(c)+" center;":void b.css("background-position",_xfu.px(c)+" center")},XF_TREE.prototype._css_item=function(a,b){var c,d,e;return void 0!==b&&null!==b&&(1==a?b.addClass("_xf_tree_item_row_selected"):b.removeClass("_xf_tree_item_row_selected")),this.xf_prop.itemselect_style==XF_TREE.ITEMSELECT_ROW?(1==a?(d=_xfu.rgbfunc(this.xf_prop.selectitem_forecolor),e=_xfu.rgbfunc(this.xf_prop.selectitem_backcolor)):(d=_xfu.rgbfunc(this.xf_prop.fore_color),e="transparent"),void 0===b||null===b?(c=[],c.push("color:"+d+";"),c.push("background-color:"+e+";"),c.join("")):void b.css({color:d,backgroundColor:e})):void 0},XF_TREE.prototype._css_itemtext=function(a,b){var c,d,e;return void 0!==b&&null!==b&&(1==a?b.addClass("_xf_tree_item_text_selected"):b.removeClass("_xf_tree_item_text_selected")),this.xf_prop.itemselect_style==XF_TREE.ITEMSELECT_TEXT?(1==a?(d=_xfu.rgbfunc(this.xf_prop.selectitem_forecolor),e=_xfu.rgbfunc(this.xf_prop.selectitem_backcolor)):(d=_xfu.rgbfunc(this.xf_prop.fore_color),e="transparent"),void 0===b||null===b?(c=[],c.push("color:"+d+";"),c.push("background-color:"+e+";"),c.join("")):void b.css({color:d,backgroundColor:e})):void 0},XF_TREE.prototype._itemdatahtml=function(a,b,c){var d=[];return d.push(' data-row="'+a+'"'),d.push(' data-display_index="'+b+'"'),d.push(' data-depth="'+c+'"'),d.push(' data-item_id="'+this._getitemidbyrowindex(a)+'"'),d.join("")},XF_TREE.prototype._getparentinfo=function(a,b){var c,d;for(c=a-1;c>=0;c--)if(d=this._itemdepth(c),d==b-1)return{row_index:c,is_expanded:this._itemexpanded(c)};return{row_index:-1,is_expanded:!1}},XF_TREE.prototype._getparentinfobyparentdepth=function(a,b){var c,d;
for(c=a-1;c>=0;c--)if(d=this._itemdepth(c),d==b)return{row_index:c,is_expanded:this.xf_tree_row_arr[c].is_expanded,is_hidden:this.xf_tree_row_arr[c].is_hidden};return{row_index:-1,is_expanded:!1,is_hidden:!1}},XF_TREE.prototype._haschild=function(a,b,c){var d;return a==c-1?!1:(d=this._itemdepth(a+1),b+1==d)},XF_TREE.prototype._getchild=function(a,b,c){var d,e,f,g,h,i,j;if(0==this._isvalidrow(a))return"count"==b?0:"all"==b?[]:-1;if(d=this.xf_xdataset.getrowcount(),e=this._itemdepth(a),0==this._haschild(a,e,d))return"count"==b?0:"all"==b?[]:-1;if("first"==b)return a+1;if("last"==b){if(j=d-1,1==c){for(g=a+1;d>g;g++)if(f=this._itemdepth(g),e>=f)return g-1}else for(g=a+1;d>g&&(f=this._itemdepth(g),!(e>=f));g++)f==e+1&&(j=g);return j}if("all"==b){for(i=[],g=a+1;d>g&&(f=this._itemdepth(g),!(e>=f));g++)1==c?i.push(g):e+1==f&&i.push(g);return i}if("count"==b){for(h=0,g=a+1;d>g&&(f=this._itemdepth(g),!(e>=f));g++)1==c?h++:e+1==f&&h++;return h}},XF_TREE.prototype._newtreeitemid=function(){return this.item_id_seq_no++,this.item_id_seq_no},XF_TREE.prototype._getrowindexbykey=function(a){var b,c;if(0==a.length)return-1;for(c=this.xf_xdataset.getrowcount(),b=0;c>b;b++)if(a==this._itemkey(b))return b;return-1},XF_TREE.prototype._getitemidbykey=function(a){var b,c;if(0==a.length)return 0;for(c=this.xf_xdataset.getrowcount(),b=0;c>b;b++)if(a==this._itemkey(b))return this.xf_tree_row_arr[b].item_id;return 0},XF_TREE.prototype._getitemidbyrowindex=function(a){return 1==isNaN(a)?0:void 0===this.xf_tree_row_arr[a]?0:this.xf_tree_row_arr[a].item_id},XF_TREE.prototype._getrowindexbyid=function(a){var b,c;if(1==isNaN(a)||0>=a)return-1;for(c=this.xf_xdataset.getrowcount(),b=0;c>b;b++)if(a==this.xf_tree_row_arr[b].item_id)return b;return-1},XF_TREE.prototype._isvalidrow=function(a){return a=_xfu["int"](a),0>a?!1:!(a>=this.xf_xdataset.getrowcount())},XF_TREE.prototype._setchildrowhidden=function(a,b,c,d){var e,f;for(e=b+1;a>e&&(f=this._itemdepth(e),!(1==isNaN(f)||c>=f));e++)this.xf_tree_row_arr[e].is_hidden=d},XF_TREE.prototype._createtreerowarr=function(){var a,b;for(this.xf_tree_row_arr=[],this.tree_row_count=0,this.tree_row_count=this.xf_xdataset.getrowcount(),a=0;a<this.tree_row_count;a++)b=!0,this._itemdepth(a)==this.base_depth&&(b=!1),this.xf_tree_row_arr.push({is_hidden:b,is_expanded:!1,is_check_enable:!0,tooltip:"",fore_color:void 0,item_id:this._newtreeitemid()})},XF_TREE.prototype._inserttreerow=function(a,b,c,d){a=_xfu["int"](a),c===!0&&this.xf_xdataset._insertrow(a,this.xdataset_column_type,-1,0,d,this),0==b.length&&(b=this._newtreeitemid()),this.xf_tree_row_arr.splice(a,0,{is_hidden:!1,is_expanded:!1,is_check_enable:!0,tooltip:"",fore_color:void 0,item_id:b}),this.tree_row_count++},XF_TREE.prototype._deletetreerow=function(a,b,c){a=_xfu["int"](a),b===!0&&this.xf_xdataset._deleterow(a,!1,c,this),this.xf_tree_row_arr.splice(a,1),this.tree_row_count--},XF_TREE.prototype._itemdepth=function(a,b,c){var d;return 1==arguments.length?(d=this.xf_xdataset._getdatabyname(a,this.xdataset_column_type,this.xdataset_depth_column_id),_xfu["int"](d)):(this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_depth_column_id,b,!0,this),void 0!==c&&c!==!0||this._displaytree(),b)},XF_TREE.prototype._itemtext=function(a,b,c){return 1==arguments.length?this.xf_xdataset._getdatabyname(a,this.xdataset_column_type,this.xdataset_text_column_id):(this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_text_column_id,b,!0,this),void 0!==c&&c!==!0||this._displaytree(),!0)},XF_TREE.prototype._itemdata=function(a,b){return 1==arguments.length?this.xf_xdataset._getdatabyname(a,this.xdataset_column_type,this.xdataset_data_column_id):(this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_data_column_id,b,!0,this),!0)},XF_TREE.prototype._itemimage=function(a,b,c){return 1==arguments.length?this.xf_xdataset._getdatabyname(a,this.xdataset_column_type,this.xdataset_image_column_id):(this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_image_column_id,b,!0,this),void 0!==c&&c!==!0||this._displaytree(),!0)},XF_TREE.prototype._itemselimage=function(a,b,c){return 1==arguments.length?this.xf_xdataset._getdatabyname(a,this.xdataset_column_type,this.xdataset_selimage_column_id):(this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_selimage_column_id,b,!0,this),void 0!==c&&c!==!0||this._displaytree(),!0)},XF_TREE.prototype._itemkey=function(a,b){return 1==arguments.length?this.xf_xdataset._getdatabyname(a,this.xdataset_column_type,this.xdataset_key_column_id):(this.xf_xdataset._setdatabyname(a,this.xdataset_column_type,this.xdataset_key_column_id,b,!0,this),!0)},XF_TREE.prototype._itemcheck=function(a,b,c,d){var e,f,g,h;if(1==arguments.length)return this.xf_xdataset._ischeckedrow(a);if(this.xf_xdataset._setcheckedrow(a,b,!0,this),1==c)for(g=this._itemdepth(a),e=this.xf_xdataset.getrowcount(),f=a+1;e>f&&(h=this._itemdepth(f),!(g>=h));f++)this.xf_xdataset._setcheckedrow(f,b,!0,this);return void 0!==d&&d!==!0||this._displaytree(),!0},XF_TREE.prototype._itemcheckenable=function(a,b,c,d){var e,f,g,h;if(1==arguments.length)return this.xf_tree_row_arr[a].is_check_enable;if(this.xf_tree_row_arr[a].is_check_enable=b,1==c)for(g=this._itemdepth(a),e=this.xf_xdataset.getrowcount(),f=a+1;e>f&&(h=this._itemdepth(f),!(g>=h));f++)this.xf_tree_row_arr[f].is_check_enable=b;return void 0!==d&&d!==!0||this._displaytree(),!0},XF_TREE.prototype._itemexpanded=function(a,b,c){return 1==arguments.length?this.xf_tree_row_arr[a].is_expanded:(this.xf_tree_row_arr[a].is_expanded=b,void 0!==c&&c!==!0||this._displaytree(),!0)},XF_TREE.prototype._itemhidden=function(a,b,c){return 1==arguments.length?this.xf_tree_row_arr[a].is_hidden:(this.xf_tree_row_arr[a].is_hidden=b,void 0!==c&&c!==!0||this._displaytree(),!0)},XF_TREE.prototype._itemtooltip=function(a,b,c){return a=_xfu["int"](a),0==this._isvalidrow(a)?!1:1==arguments.length?this.xf_tree_row_arr[a].tooltip:(this.xf_tree_row_arr[a].tooltip=b,void 0!==c&&c!==!0||this._displaytree(),!0)},XF_TREE.prototype._itemid=function(a){return-1==a?0:0==this._isvalidrow(a)?0:this.xf_tree_row_arr[a].item_id},XF_TREE.prototype._itemdom=function(a){var b;return b={xf_item:null,xf_space:null,xf_button:null,xf_checkbox:null,xf_icon:null,xf_text:null},a=_xfu["int"](a),-1==a?b:0==this._isvalidrow(a)?b:(b.xf_item=this.xf_object.find('._xf_tree_item[data-row="'+a+'"]'),0==b.xf_item.length?(b.xf_item=null,b):(b.xf_space=b.xf_item.find("._xf_tree_item_space"),b.xf_button=b.xf_item.find("._xf_tree_item_button_action"),b.xf_checkbox=b.xf_item.find("._xf_tree_item_checkbox"),b.xf_icon=b.xf_item.find("._xf_tree_item_icon"),b.xf_text=b.xf_item.find("._xf_tree_item_text"),b))},XF_TREE.prototype._iteminfo=function(a){var b;return b={row_index:-1,is_expanded:!1,is_hidden:!1,is_checked:!1,depth:-1,text:"",data:"",image:0,selimage:0,key:"",item_id:0},a=_xfu["int"](a),-1==a?b:0==this._isvalidrow(a)?b:{row_index:a,is_expanded:this._itemexpanded(a),is_hidden:this._itemhidden(a),is_checked:this.xf_xdataset._ischeckedrow(a),depth:this._itemdepth(a),text:this._itemtext(a),data:this._itemdata(a),image:this._itemimage(a),selimage:this._itemselimage(a),key:this._itemkey(a),item_id:this._itemid(a)}},XF_TREE.prototype._setpicklist=function(a){var b;return b=_xfx.picklisturl(a),$.ajax({url:b,method:"GET",async:!0,dataType:"text",success:$.proxy(this.on_picklist_load,this),error:function(a,c,d){_xfu.ajaxerror({message:"Fail to load picklist file",url:b,jqxhr:a,status:c,error:d,alert:!0})}}),!0},XF_TREE.prototype.on_picklist_load=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;if(f="#code_content",e=a.indexOf(f),!(0>e)){for(g=a.substr(e+f.length),h=g.split("\r\n"),i=h.length,j=[],d=0;i>d;d++)0!=h[d].length&&j.push(h[d]);for(k=j.length,l=[0],d=0;k>d;d++){if(m=this._getleadingspacecount(j[d]),p=j[d].substr(m),l.length<m+1){n=l[l.length-1],this.insertitem("픽리스트 정보가 손상되었습니다",3,3,n),this.setitemimage(n,1,2);break}n=l[m],o=this.insertitem(p,3,3,n),this.setitemimage(n,1,2),l.length==m+1?l.push(o):l.length>m+1&&(l[m+1]=o,l.length=m+2)}}},XF_TREE.prototype._getleadingspacecount=function(a){var b,c,d;for(d=0,c=a.length,b=0;c>b&&" "==a[b];b++)d++;return d},XF_TREE.prototype._getcontextmenuinfo=function(a){return{menu_width:a.xf_prop.menu_width,menu_arr:JSON.parse(JSON.stringify(a.menu_arr))}},XF_TREE.prototype._setcontextmenuinfo=function(a,b,c){var d,e,f,g,h,i,j,k;if(void 0===c&&(c=!1),null==b)return void a.setmenu([]);if(k=JSON.parse(JSON.stringify(b)),void 0!==k.menu_width&&(a.xf_prop.is_use_fixwidth=c,a.xf_prop.menu_width=k.menu_width),void 0===k.menu_arr)return!1;for(d=k.menu_arr,e=d.length,f=0;e>f;f++)for(g=a.newmenu(d[f]),d[f]=g,h=g.sub_menu_arr.length,i=0;h>i;i++)j=a.newmenu(g.sub_menu_arr[i]),g.sub_menu_arr[i]=j;return a.setmenu(d),!0},XF_TREE.prototype.copyitem=function(a,b,c,d,e,f){return this._copymoveitem("copy",!0,a,b,c,d,e,f)},XF_TREE.prototype.copyitemex=function(a,b,c,d,e,f){return this._copymoveitem("copy",!1,a,b,c,d,e,f)},XF_TREE.prototype.deleteallitems=function(){this.selected_row_index=-1,this.xf_content.empty(),this.xf_tree_row_arr=[],this.tree_row_count=0,this.xf_xdataset.init()},XF_TREE.prototype.deleteitem=function(a){var b,c,d,e;return b=this._getrowindexbyid(_xfu["int"](a)),0==this._isvalidrow(b)?!1:(d=this._getchild(b,"all",!0),c=[b],e=c.concat(d),this._deleteitem(e,!0))},XF_TREE.prototype.ensurevisibleitem=function(a){return this._visibleitem(this._getrowindexbyid(_xfu["int"](a)))},XF_TREE.prototype.ensurevisibleitemex=function(a){return this._visibleitem(this._getrowindexbykey(a))},XF_TREE.prototype.expandall=function(a){var b,c;if(a=_xfu["int"](a),isNaN(a)||1>a||a>3)return!1;if(a==XFD_TREEITEM_TOGGLE&&(a=this._itemexpanded(0)?XFD_TREEITEM_COLLAPSE:XFD_TREEITEM_EXPAND),c=this.xf_xdataset.getrowcount(),a==XFD_TREEITEM_COLLAPSE)for(b=0;c>b;b++)this._itemexpanded(b,!1,!1),this._itemdepth(b)!=this.base_depth&&this._itemhidden(b,!0,!1);else if(a==XFD_TREEITEM_EXPAND)for(b=0;c>b;b++)this._itemexpanded(b,!0,!1),this._itemhidden(b,!1,!1);this._displaytree()},XF_TREE.prototype.expanddepth=function(a,b,c){var d,e,f,g;if(a=_xfu["int"](a),b=_xfu["int"](b),isNaN(b)||0>b||b>3)return!1;if(f=this.getitemcount(),b==XFD_TREEITEM_TOGGLE){for(e=0;f>e;e++)if(g=this._itemdepth(e),g==a){d=1==this._itemexpanded(e)?XFD_TREEITEM_COLLAPSE:XFD_TREEITEM_EXPAND;break}if(e==f)return!1}else d=b;if(d==XFD_TREEITEM_COLLAPSE)for(e=f-1;e>=0;e--)g=this._itemdepth(e),g>a?(this._itemhidden(e,!0,!1),this._itemexpanded(e,!1,!1)):(this._itemhidden(e,!1,!1),g==a?this._itemexpanded(e,!1,!1):this._itemexpanded(e,!0,!1));else if(d==XFD_TREEITEM_EXPAND)for(e=f-1;e>=0;e--)g=this._itemdepth(e),g>a+1?(this._itemhidden(e,!0,!1),this._itemexpanded(e,!1,!1)):g==a+1?(this._itemhidden(e,!1,!1),this._itemexpanded(e,!1,!1)):(this._itemhidden(e,!1,!1),this._itemexpanded(e,!0,!1));return void 0!==c&&c!==!0||this._displaytree(),!0},XF_TREE.prototype.expand=function(a,b,c){return this._expanditem(this._getrowindexbyid(_xfu["int"](a)),b,c)},XF_TREE.prototype.expandex=function(a,b,c){return this._expanditem(this._getrowindexbykey(a),b,c)},XF_TREE.prototype.finditemex=function(a){return this._getitemidbykey(a)},XF_TREE.prototype.getchilditem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return this._itemid(this._getchild(b,"first",!1))},XF_TREE.prototype.getchilditemex=function(a){var b=this._getrowindexbykey(a);return this._itemid(this._getchild(b,"first",!1))},XF_TREE.prototype.getdragable=function(){return this.xf_prop.dragable},XF_TREE.prototype.setdragable=function(a){this.xf_prop.dragable=a,this._displaytree()},XF_TREE.prototype.getdrophilightitem=function(){},XF_TREE.prototype.getfirstvisibleitem=function(){var a,b,c,d;for(b=this.getitemcount(),a=0;b>a;a++)if(c=this._itemdom(a),null!=c.xf_item&&0!=c.xf_item.length&&(d=c.xf_item.position(),d.top+this.xf_prop.itemheight>0))return this.xf_tree_row_arr[a].item_id;return 0},XF_TREE.prototype.setfocus=function(){this.xf_keyboard.focus()},XF_TREE.prototype.setfont=function(a,b,c,d,e,f){var g;_xfx.setfont(this.xf_object,this.xf_prop.font,a,b,c,d,e,f),-1==this.xf_prop.itemheight&&(g=_xfj.textsize("AAA",this.xf_prop.font),this.setitemheight(g.height+4))},XF_TREE.prototype.deletedepthfont=function(a,b){return a=_xfu.intval(a,-1,XFD_MAX_VALUE),a===!1?!1:(-1==a?this.depth_font_arr=[]:this.depth_font_arr[a]=void 0,void 0!==b&&b!==!0||this._displaytree(),!0)},XF_TREE.prototype.setdepthfont=function(a,b,c,d,e,f,g,h){return a=_xfu.intval(a,-1,XFD_MAX_VALUE),a===!1?!1:(this.depth_font_arr[a]=[b,_xfu["int"](c),d,e,f,g],void 0!==h&&h!==!0||this._displaytree(),!0)},XF_TREE.prototype.getitemcheck=function(a){var b;return b=this._getrowindexbyid(_xfu["int"](a)),0>b?!1:this._itemcheck(b)},XF_TREE.prototype.getitemcheckex=function(a){var b;return b=this._getrowindexbykey(a),0>b?!1:this._itemcheck(b)},XF_TREE.prototype.getitemcheckenable=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0>b?!1:this._itemcheckenable(b)},XF_TREE.prototype.setitemcheckenable=function(a,b,c,d){var e=this._getrowindexbyid(_xfu["int"](a));return 0>e?!1:(void 0===c&&(c=!1),this._itemcheckenable(e,b,c,d))},XF_TREE.prototype.setitemcheckenableall=function(a){var b,c;for(b=this.xf_xdataset.getrowcount(),c=0;b>c;c++)this.xf_tree_row_arr[c].is_check_enable=a;return this._displaytree(),!0},XF_TREE.prototype.setitemcheck=function(a,b,c){var d=this._getrowindexbyid(_xfu["int"](a));return 0>d?!1:(void 0===c&&(c=!1),this._itemcheck(d,b,c,!0))},XF_TREE.prototype.setitemcheckex=function(a,b,c){var d=this._getrowindexbykey(a);return 0>d?!1:(void 0===c&&(c=!1),this._itemcheck(d,b,c,!0))},XF_TREE.prototype.setitemcheckall=function(a){var b,c;for(b=this.xf_xdataset.getrowcount(),c=0;b>c;c++)this.xf_xdataset._setcheckedrow(c,a,!0,this);return this._displaytree(),!0},XF_TREE.prototype.getitemcount=function(){return this.xf_xdataset.getrowcount()},XF_TREE.prototype.getitemdata=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?!1:this._itemdata(b)},XF_TREE.prototype.getitemdataex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?!1:this._itemdata(b)},XF_TREE.prototype.setitemdata=function(a,b){var c=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(c)?!1:this._itemdata(c,b)},XF_TREE.prototype.setitemdataex=function(a,b){var c=this._getrowindexbykey(a);return 0==this._isvalidrow(c)?!1:this._itemdata(c,b)},XF_TREE.prototype.getitemrowindex=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?-1:b},XF_TREE.prototype.getitemrowindexex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?-1:b},XF_TREE.prototype.setitemforecolor=function(a,b,c){var d,e;return d=this._getrowindexbyid(_xfu["int"](a)),0==this._isvalidrow(d)?!1:(this.xf_tree_row_arr[d].fore_color=_xfu.rgb(b),void 0!==c&&1!=c||(e=this._itemdom(d),null!=e.xf_text&&0==e.xf_text.hasClass("_xf_tree_item_text_selected")&&e.xf_text.css("color",_xfu.rgbfunc(this.xf_tree_row_arr[d].fore_color))),!0)},XF_TREE.prototype.getitemheight=function(){return this.xf_prop.itemheight},XF_TREE.prototype.setitemheight=function(a){a=_xfu["int"](a),16>a||(this.xf_prop.itemheight=a,this._itemheight(a),this._displaytree())},XF_TREE.prototype.finditembytext=function(a,b,c,d,e){var f,g,h,i;if(void 0===b&&(b=0),void 0===c&&(c=!1),void 0===e)e=1;else if(e=_xfu.intval(e,0,1),e===!1)return null;if(void 0===d?f=0:-1==d?f=0:null==d?(f=this.selected_row_index,0==e&&f++):(f=this._getrowindexbyid(_xfu["int"](d)),0==e&&f++),0==this._isvalidrow(f))return null;for(h=this.xf_xdataset.getrowcount(),g=f;h>g;g++){if(i=this._itemtext(g),i==a)return this._getitemidbyrowindex(g);if(1==b&&i.indexOf(a)>=0)return this._getitemidbyrowindex(g)}if(1==c)for(g=0;f>g;g++){if(i=this._itemtext(g),i==a)return this._getitemidbyrowindex(g);if(1==b&&i.indexOf(a)>=0)return this._getitemidbyrowindex(g)}return null},XF_TREE.prototype.getitemkeybytext=function(a,b,c,d,e){var f;return f=this.finditembytext(a,b,c,d,e),null==f?null:this.getitemkey(f)},XF_TREE.prototype.getitemkey=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?!1:this._itemkey(b)},XF_TREE.prototype.setitemkey=function(a,b){var c=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(c)?!1:this._itemkey(c,b)},XF_TREE.prototype.getitemrect=function(a,b){var c,d,e;return c=this._getrowindexbyid(a),0==this._isvalidrow(c)?[0,0,0,0]:(d=this._itemdom(c),null==d.xf_item?[0,0,0,0]:b?(e=this.xf_text.position(),[e.left,e.top,e.left+this.xf_text.width(),e.top+this.xf_text.height()]):(e=this.xf_box.position(),[e.left,e.top,e.left+this.xf_box.width(),e.top+this.xf_box.height()]))},XF_TREE.prototype.getitemtext=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?"":this._itemtext(b)},XF_TREE.prototype.getitemtextex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?"":this._itemtext(b)},XF_TREE.prototype.setitemtext=function(a,b,c){var d=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(d)?!1:this._itemtext(d,b,c)},XF_TREE.prototype.setitemtextex=function(a,b,c){var d=this._getrowindexbykey(a);return 0==this._isvalidrow(d)?!1:this._itemtext(d,b,c)},XF_TREE.prototype.setitemtooltiptext=function(a,b,c){var d=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(d)?!1:this._itemtooltip(d,b,c)},XF_TREE.prototype.setlinecolor=function(a){},XF_TREE.prototype.getnextitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?0:this._getitem(b,"next",!1)},XF_TREE.prototype.getnextitemex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?0:this._getitem(b,"next",!1)},XF_TREE.prototype.getnextsiblingitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?0:this._getitem(b,"next",!0)},XF_TREE.prototype.getnextsiblingitemex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?0:this._getitem(b,"next",!0)},XF_TREE.prototype.getnextvisibleitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?0:this._getitem(b,"next_visible",!1)},XF_TREE.prototype.getparentitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?0:this._itemid(this._getparentinfo(b,this._itemdepth(b)).row_index)},XF_TREE.prototype.getparentitemex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?0:this._itemid(this._getparentinfo(b,this._itemdepth(b)).row_index)},XF_TREE.prototype.getprevsiblingitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?0:this._getitem(b,"prev",!0)},XF_TREE.prototype.getprevsiblingitemex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?0:this._getitem(b,"prev",!0)},XF_TREE.prototype.getprevvisibleitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?0:this._getitem(b,"prev_visible",!1)},XF_TREE.prototype.getrootitem=function(){var a=this.xf_xdataset.getrowcount();return 0>=a?0:this.xf_tree_row_arr[0].item_id},XF_TREE.prototype.getselecteditem=function(){return this._itemid(this.selected_row_index)},XF_TREE.prototype.gettreecontentheight=function(){return _xfu["int"](this.xf_content.height())},XF_TREE.prototype.gettreecontentwidth=function(){return _xfu["int"](this.xf_content.width())},XF_TREE.prototype.getvisibleitemcount=function(){var a,b,c;for(c=0,b=this.xf_xdataset.getrowcount(),a=0;b>a;a++)0==this.xf_tree_row_arr[a].is_hidden&&c++;return c},XF_TREE.prototype.getxdatasetrow=function(a){var b;return b=this._getrowindexbyid(a),0==this._isvalidrow(b)?-1:b},XF_TREE.prototype.insertitem=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;if(void 0===e&&(e=!0),h=this.base_depth,i="",j="",f=this.xf_xdataset.getrowcount(),0==f)return g=0,this._insertitem(0,h,a,i,b,c,j,"",!1,!1,e),this._itemid(g);if(0==d||void 0===d)return g=f,this._insertitem(g,h,a,i,b,c,j,"",!1,!1,e),this._itemid(g);for(k=this._getrowindexbyid(_xfu["int"](d)),l=this._itemdepth(k),m=k+1;f>m&&(n=this._itemdepth(m),!(l>=n));m++);return g=m,this._insertitem(g,l+1,a,i,b,c,j,"",!1,!1,e),this._itemid(g)},XF_TREE.prototype.insertitemex=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q;if(void 0===g&&(g=!0),m=this._getitemidbykey(b),m>0)return 0;if(k=this.base_depth,l="",o=this._getrowindexbykey(e),p=this._getrowindexbykey(f),h=this.xf_xdataset.getrowcount(),-1==o)return j=h,this._insertitem(j,k,a,l,c,d,b,"",!1,!1,g),this._itemid(j);if(-1==p){for(q=this._itemdepth(o),i=o+1;h>i&&(n=this._itemdepth(i),!(q>=n));i++);return j=i,this._insertitem(j,q+1,a,l,c,d,b,"",!1,!1,g),this._itemid(j)}return k=this._itemdepth(p),j=p+1,this._insertitem(j,k,a,l,c,d,b,"",!1,!1,g),this._itemid(j)},XF_TREE.prototype.isitemexpanded=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?!1:this._itemexpanded(b)},XF_TREE.prototype.isitemselected=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?!1:this.selected_row_index==b},XF_TREE.prototype.itemhaschildren=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(b)?!1:this._haschild(b,this._itemdepth(b),this.xf_xdataset.getrowcount())},XF_TREE.prototype.itemhaschildrenex=function(a){var b=this._getrowindexbykey(a);return 0==this._isvalidrow(b)?!1:this._haschild(b,this._itemdepth(b),this.xf_xdataset.getrowcount())},XF_TREE.prototype.getchilditemcount=function(a,b){var c=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(c)?-1:(void 0===b&&(b=!0),this._getchild(c,"count",b))},XF_TREE.prototype.getchilditemcountex=function(a,b){var c=this._getrowindexbykey(a);return 0==this._isvalidrow(c)?-1:(void 0===b&&(b=!0),this._getchild(c,"count",b))},XF_TREE.prototype.moveitem=function(a,b,c,d,e){return this._copymoveitem("move",!0,a,b,c,d,e)},XF_TREE.prototype.moveitemex=function(a,b,c,d,e){return this._copymoveitem("move",!1,a,b,c,d,e)},XF_TREE.prototype.refresh=function(){this._displaytree()},XF_TREE.prototype.selectitem=function(a){var b=this._getrowindexbyid(_xfu["int"](a));return this._isvalidrow(b)?(this._expandparentitem(b),this._selectitem(b,{is_set_xdataset:!0,is_set_focus:!1})):!1},XF_TREE.prototype.selectitemex=function(a){var b=this._getrowindexbykey(a);return this._isvalidrow(b)?(this._expandparentitem(b),this._selectitem(b,{is_set_xdataset:!0,is_set_focus:!1})):!1},XF_TREE.prototype.setitemimage=function(a,b,c,d){var e=this._getrowindexbyid(_xfu["int"](a));return 0==this._isvalidrow(e)?!1:(this._itemimage(e,b,!1),this._itemselimage(e,c,d))},XF_TREE.prototype.setitemimageex=function(a,b,c){var d=this._getrowindexbykey(a);return 0==this._isvalidrow(d)?!1:(this._itemimage(d,b,!1),this._itemselimage(d,c,is_refresh))},XF_TREE.prototype.setselectbackcolor=function(a,b){},XF_TREE.prototype.setselectforecolor=function(a,b){},XF_TREE.prototype.setselecteditemeditstart=function(){var a,b,c;return a=this.xf_object.find("._xf_tree_item_row_selected"),a.length<=0?!1:(this.xf_rename&&this._removerename(!1,!1),this.xf_rename_item_text=a.find("._xf_tree_item_text"),c=this.xf_rename_item_text.outerWidth()+2,this.xf_rename_item_text.hide(),b=[],b.push('<input type="text" style="'),b.push("width:"+_xfu.px(c)+";"),b.push("height:100%;margin-left:3px;"),b.push("color:"+_xfu.rgbfunc(this.xf_prop.fore_color)+";"),b.push("background-color:"+_xfu.rgbfunc(this.xf_prop.back_color)+";"),b.push('">'),this.xf_rename=$(b.join("")),a.append(this.xf_rename),this._renameevent(),this.xf_rename.val(this._itemtext(this.selected_row_index)),this.xf_rename.focus(),_xfj.select(this.xf_rename.get(0),0,-1),!0)},XF_TREE.prototype.getscrollbarstyle=function(a){return a=_xfu.intval(a,0,1),a===!1?!1:0==a?this.xf_prop.horzscrollbar_style:this.xf_prop.vertscrollbar_style},XF_TREE.prototype.setscrollbarstyle=function(a,b){return a=_xfu.intval(a,-1,2),b=_xfu.intval(b,-1,2),a===!1||b===!1?!1:(a>=0&&(this.xf_prop.horzscrollbar_style=a,_xfc.basic("horzscrollbar_style",this.xf_prop.horzscrollbar_style,!0,this.xf_object)),b>=0&&(this.xf_prop.vertscrollbar_style=b,_xfc.basic("vertscrollbar_style",this.xf_prop.vertscrollbar_style,!0,this.xf_object)),!0)},XF_TREE.prototype.getcontextmenuinfo=function(){return this._getcontextmenuinfo(this.xf_context)},XF_TREE.prototype.getdropcontextmenuinfo=function(){return this._getcontextmenuinfo(this.xf_drop_context)},XF_TREE.prototype.getdropemptycontextmenuinfo=function(){return this._getcontextmenuinfo(this.xf_dropempty_context)},XF_TREE.prototype.setcontextmenuinfo=function(a){return this._setcontextmenuinfo(this.xf_context,a,!0),!0},XF_TREE.prototype.setdropcontextmenuinfo=function(a){return this._setcontextmenuinfo(this.xf_drop_context,a,!0),!0},XF_TREE.prototype.setdropemptycontextmenuinfo=function(a){return this._setcontextmenuinfo(this.xf_dropempty_context,a,!0),!0},XF_TREE.prototype.getdroptargetitem=function(){return null==this.xf_dragdrop?0:void 0===this.xf_dragdrop.drop_row_index?0:this._itemid(this.xf_dragdrop.drop_row_index)},XF_TREE.prototype.on_xdataset_event=function(a){var b;switch(a.type){case XFD_XDATASET_EVENT_ROW_DELETE:this._deletetreerow(a.xdataset_row_index,!1,!1);break;case XFD_XDATASET_EVENT_ROW_INSERT:this._inserttreerow(a.xdataset_row_index,"",!1,!1);break;case XFD_XDATASET_EVENT_COLUMN_DELETE:case XFD_XDATASET_EVENT_COLUMN_EMPTY:case XFD_XDATASET_EVENT_COLUMN_ADD:case XFD_XDATASET_EVENT_COLUMN_INSERT:case XFD_XDATASET_EVENT_DATA_UPDATE:break;case XFD_XDATASET_EVENT_DATA_LOAD:this._createtreerowarr();break;case XFD_XDATASET_EVENT_DATA_POSITION:return void this._selectitem(a.xdataset_pos_index,{is_set_xdataset:!1,is_set_focus:!1});case XFD_XDATASET_EVENT_ETC:}b=this.xf_xdataset.getrowcount(),this.xf_tree_row_arr.length!=b&&(1==Math.abs(this.xf_tree_row_arr.length-b)?this._inserttreerow(a.xdataset_row_index,"",!1,!1):this._createtreerowarr()),this._displaytree()},XF_TREE.prototype.on_keyboard_keydown=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(!(this.selected_row_index<0)&&(b=this._itemdom(this.selected_row_index),null!=b.xf_item))return c=b.xf_text,d=b.xf_checkbox,e=b.xf_button,i=this.xf_xdataset.getrowcount(),g=_xfu["int"](c.data("row")),h=_xfu["int"](this._itemdepth(g)),j=_xfu["int"](c.data("display_index")),f=this._itemcheckenable(g),a.keyCode==XFD_KEY_SPACE&&1==f?void(d.hasClass("_xf_tree_item_checkbox_checked")?(this._css_itemcheck(!1,f,d),this.xf_xdataset._setcheckedrow(g,!1,!0,this)):(this._css_itemcheck(!0,f,d),this.xf_xdataset._setcheckedrow(g,!0,!0,this))):(k={is_set_xdataset:!0,is_set_focus:!0},a.keyCode==XFD_KEY_LEFTARROW?(1==e.hasClass("_xf_tree_item_button_collapse")?this._expanditem(g,XFD_TREEITEM_COLLAPSE):(l=this._getparentinfo(g,h),this._selectitem(l.row_index,k)),!1):a.keyCode==XFD_KEY_RIGHTARROW?(1==this._haschild(g,h,i)&&(1==e.hasClass("_xf_tree_item_button_expand")?this._expanditem(g,XFD_TREEITEM_EXPAND):this._selectitembydisplayindex(j+1,k)),!1):a.keyCode==XFD_KEY_UPARROW?(this._selectitembydisplayindex(j-1,k),!1):a.keyCode==XFD_KEY_DOWNARROW?(this._selectitembydisplayindex(j+1,k),!1):void 0)},XF_TREE.prototype.on_keyboard_focus=function(a){this.is_has_focus=!0,this.xf_parent&&this.xf_parent.xf_content&&!this.xf_parent.xf_content.on_child_focus(this)},XF_TREE.prototype.on_keyboard_blur=function(a){this.is_has_focus=!1,0==this.xf_prop.enable},XF_TREE.prototype.on_object_mousedown=function(a){factory.registermouseevent(this,a),0==this.xf_prop.dragable&&a.preventDefault()},XF_TREE.prototype.on_object_click=function(a){var b,c,d,e,f;factory.registermouseevent(this,a),0!=this.xf_prop.enable&&(this.setfocus(),b=$(a.target),c=b.data("row"),void 0!=c&&(c=_xfu["int"](c),e=this._itemid(c),f=this._itemcheckenable(c),this.xf_xdataset._moveat(c,!0,this),b.hasClass("_xf_tree_item_checkbox")?(1==f&&(d=b.hasClass("_xf_tree_item_checkbox_checked"),d=1!=d,this._css_itemcheck(d,f,b),this.xf_xdataset._setcheckedrow(c,d,!0,this)),this.clicked_itemid==e?0==this.xf_prop.delay_itemclick&&factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!1,!0):factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!1,!0),this._selectitem(c,{is_set_xdataset:!0,is_set_focus:!1})):b.hasClass("_xf_tree_item_icon")?(this.clicked_itemid==e?0==this.xf_prop.delay_itemclick&&factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!0,!1):factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!0,!1),this._selectitem(c,{is_set_xdataset:!0,is_set_focus:!1})):b.hasClass("_xf_tree_item_text")?(this.clicked_itemid==e?0==this.xf_prop.delay_itemclick&&factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!1,!1):factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!1,!1),this._selectitem(c,{is_set_xdataset:!0,is_set_focus:!1}),a.preventDefault()):(b.hasClass("_xf_tree_item_button_expand")||b.hasClass("_xf_tree_item_button_collapse"))&&(b.hasClass("_xf_tree_item_button_expand")||b.hasClass("_xf_tree_item_button_collapse"))&&this.expand(e,XFD_TREEITEM_TOGGLE),b.hasClass("_xf_tree_item")&&(this.clicked_itemid==e?0==this.xf_prop.delay_itemclick&&factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!1,!1):factory._fireevent({xf_component:this,event_name:"on_itemclick",is_fire_aysnc:!0},this,e,!1,!1),this._selectitem(c,{is_set_xdataset:!0,is_set_focus:!1})),this.clicked_itemid==e?(clearTimeout(this.dblclick_timer_id),this.clicked_itemid=-1,this.on_object_dblclick(a)):(this.clicked_itemid=e,this.dblclick_timer_id=setTimeout($.proxy(this.on_object_dblclick_check,this),300))))},XF_TREE.prototype.on_object_dblclick_check=function(a){this.clicked_itemid=-1},XF_TREE.prototype.on_object_dblclick=function(a){var b,c,d;factory.registermouseevent(this,a),0!=this.xf_prop.enable&&(b=$(a.target),c=b.data("row"),void 0!==c&&(d=b.data("depth"),c=_xfu["int"](c),1==this.xf_prop.itemdblclick_expand&&(b.hasClass("_xf_tree_item_text")||b.hasClass("_xf_tree_item_icon"))&&this.expand(this._itemid(c),XFD_TREEITEM_TOGGLE),factory._fireevent({xf_component:this,event_name:"on_itemdblclick",is_fire_async:!0},this,this._itemid(c))))},XF_TREE.prototype.on_object_contextmenu=function(a){var b,c,d,e,f;a.preventDefault(),factory.registermouseevent(this,a),b=$(a.target),c=b.data("row"),c=_xfu["int"](c),e=_xfj.eventoffset(a,{type:"class",value:"_xf_tree"}),f=b.closest("._xf_tree_item"),f.length>0&&(e.offset_y=a.offsetY+this.item_height*_xfu["int"](f.data("display_index"))),c>=0?(d=factory._fireevent({xf_component:this,event_name:"on_rclick",default_value:0,is_fire_aysnc:!0},this,this._itemid(c),e.offset_x,e.offset_y,a.originalEvent.pageX,a.originalEvent.pageY),0==d&&(this._selectitem(c,{is_set_xdataset:!0,is_set_focus:!1}),void 0!==this.xf_prop.popupmenu_show&&this.xf_prop.popupmenu_show!==!0||this.xf_context.show(a.originalEvent.pageX,a.originalEvent.pageY,a))):factory._fireevent({xf_component:this,event_name:"on_rclick",default_value:0,is_fire_aysnc:!0},this,0,e.offset_x,e.offset_y,a.originalEvent.pageX,a.originalEvent.pageY)},XF_TREE.prototype.on_context_click=function(a){if("delete"==a)1==window.confirm("삭제하면 하위도 삭제됩니다. 삭제하시겠습니까?")&&(this._deleteitem(this._getchild(this.selected_row_index,"all",!0),!1),this._deleteitem([this.selected_row_index],!1),this._displaytree());else if("rename"==a&&1==this.setselecteditemeditstart())return;this.setfocus()},XF_TREE.prototype._removerename=function(a,b){var c;a&&(c=this.xf_rename.val(),c.length>0&&this._itemtext(this.selected_row_index,c,!0)),this._offrenameevent(),this.xf_rename.remove(),this.xf_rename=null,this.xf_rename_item_text.show(),b&&this.setfocus()},XF_TREE.prototype.on_rename_keydown=function(a){return a.which==XFD_KEY_ESC?(this._removerename(!1,!0),!1):a.which==XFD_KEY_ENTER?(this._removerename(!0,!0),!1):void 0},XF_TREE.prototype.on_rename_blur=function(a){this._removerename(!0,!0)},XF_TREE.prototype.on_rename_mousedown=function(a){
a.stopPropagation()},XF_TREE.prototype.on_rename_click=function(a){a.stopPropagation()},XF_TREE.prototype.on_rename_dblclick=function(a){a.stopPropagation()},XF_TREE.prototype.on_dropcontext_click=function(a){var b,c,d,e;if("close"!==a){switch(b=a.split("-"),c=b[0],d=b[1],e=!0,a){case"copy-below-empty-nochild":case"copy-above-nochild":case"copy-below-nochild":case"copy-child_first-nochild":case"copy-child_last-nochild":e=!1}this._moveitem({xf_src_tree:this.xf_dragdrop.xf_component,xf_dst_tree:this,src_row_index:this.xf_dragdrop.row_index,dst_row_index:this.xf_dragdrop.drop_row_index,is_include_child:e,action:c,target:d})}this.xf_keyboard.focus()},XF_TREE.prototype.on_object_dragstart=function(a){var b,c,d,e,f;return factory.registermouseevent(this,a),0==this.xf_prop.dragable?!1:(d=$(a.target),b=d.data("row"),e=d.data("item_id"),c=factory._fireevent({xf_component:this,event_name:"on_begindrag",default_value:1},this,e),1!=c?!1:(f=this._itemdepth(b),void factory._setdraginfo(this,{xf_drag_item:this.xf_drag_item,item_id:e,row_index:b,has_child:this._haschild(b,f,this.xf_xdataset.getrowcount())})))},XF_TREE.prototype.on_object_dragend=function(a){factory.registermouseevent(this,a),factory._resetdraginfo(),this.xf_keyboard.focus()},XF_TREE.prototype.on_object_dragenter=function(a){var b,c;factory.registermouseevent(this,a),c=this._getdragdropeventinfo(a),0!=c.is_valid&&(1==c.is_text&&factory.xf_main_factory.xf_drag.xf_component==this&&(b=c.xf_target.data("row"),factory.xf_main_factory.xf_drag.row_index==b)||c.xf_target.addClass("xf_tree_item_text_drop"))},XF_TREE.prototype.on_object_dragover=function(a){var b,c;c=this._getdragdropeventinfo(a),0!=c.is_valid&&(1==c.is_text&&factory.xf_main_factory.xf_drag.xf_component===this&&(b=c.xf_target.data("row"),factory.xf_main_factory.xf_drag.row_index==b)||a.preventDefault())},XF_TREE.prototype.on_object_dragleave=function(a){var b,c;factory.registermouseevent(this,a),c=this._getdragdropeventinfo(a),0!=c.is_valid&&(1==c.is_text&&factory.xf_main_factory.xf_drag.xf_component==this&&(b=c.xf_target.data("row"),factory.xf_main_factory.xf_drag.row_index==b)||c.xf_target.removeClass("xf_tree_item_text_drop"))},XF_TREE.prototype._getdragdropeventinfo=function(a){var b={xf_target:null,is_valid:!1,is_text:!1,is_tree:!1};return 0==this.xf_prop.accept_drop?b:null==factory.xf_main_factory.xf_drag?b:factory.xf_main_factory.xf_drag.control_kind!=XFD_CTRLKIND_TREE?b:"BUTTON"===a.target.tagName?(b.xf_target=$(a.target),b.is_valid=!0,b.is_text=!0,b):(b.xf_target=$(a.target),1==b.xf_target.hasClass("_xf_tree")?(b.is_valid=!0,b.is_tree=!0,b):b)},XF_TREE.prototype.on_object_drop=function(a){var b,c,d,e;factory.registermouseevent(this,a),a.preventDefault(),d=this._getdragdropeventinfo(a),0!=d.is_valid&&(d.xf_target.removeClass("xf_tree_item_text_drop"),this.drag_target_row_index=factory.xf_main_factory.xf_drag.row_index,this.xf_dragdrop={},$.extend(this.xf_dragdrop,factory.xf_main_factory.xf_drag),1==d.is_text?this.xf_dragdrop.drop_row_index=d.xf_target.data("row"):this.xf_dragdrop.drop_row_index=-1,factory.xf_main_factory.xf_drag.xf_component===this?(c={xf_component:this,event_name:"on_enddrag",default_value:1,is_func_called:!1},b=-1,1==d.is_text&&(b=d.xf_target.data("item_id")),e=factory._fireevent(c,this,factory.xf_main_factory.xf_drag.item_id,b)):(c={xf_component:this,event_name:"on_dropcomplete",default_value:1,is_func_called:!1},e=factory._fireevent(c,this,factory.xf_main_factory.xf_drag.xf_screen,factory.xf_main_factory.xf_drag.xf_component,this._itemid(this.xf_dragdrop.drop_row_index))),0!=c.is_func_called&&0!==e||(1==d.is_text?(factory.xf_main_factory.xf_drag.has_child===!0&&1==this.xf_prop.item_nochild_menushow?(this.xf_drop_context.setmenuprop("copy-above-nochild","is_hidden",!1,!1),this.xf_drop_context.setmenuprop("copy-child_first-nochild","is_hidden",!1,!1),this.xf_drop_context.setmenuprop("copy-child_last-nochild","is_hidden",!1,!1),this.xf_drop_context.setmenuprop("copy-below-nochild","is_hidden",!1,!1),0==this.xf_prop.popupmenu_drop_id.length&&0==this.xf_drop_context.xf_prop.is_use_fixwidth&&this.xf_drop_context.setmenuwidth(200,!1)):(this.xf_drop_context.setmenuprop("copy-above-nochild","is_hidden",!0,!1),this.xf_drop_context.setmenuprop("copy-child_first-nochild","is_hidden",!0,!1),this.xf_drop_context.setmenuprop("copy-child_last-nochild","is_hidden",!0,!1),this.xf_drop_context.setmenuprop("copy-below-nochild","is_hidden",!0,!1),0==this.xf_prop.popupmenu_drop_id.length&&0==this.xf_drop_context.xf_prop.is_use_fixwidth&&this.xf_drop_context.setmenuwidth(150,!1)),this.xf_drop_context.refresh(),this.xf_drop_context.show(a.originalEvent.pageX,a.originalEvent.pageY,a)):(factory.xf_main_factory.xf_drag.has_child===!0&&1==this.xf_prop.item_nochild_menushow?(this.xf_dropempty_context.setmenuprop("copy-below-empty-nochild","is_hidden",!1,!1),0==this.xf_prop.popupmenu_dropempty_id.length&&0==this.xf_dropempty_context.xf_prop.is_use_fixwidth&&this.xf_dropempty_context.setmenuwidth(130,!1)):(this.xf_dropempty_context.setmenuprop("copy-below-empty-nochild","is_hidden",!0,!1),0==this.xf_prop.popupmenu_dropempty_id.length&&0==this.xf_dropempty_context.xf_prop.is_use_fixwidth&&this.xf_dropempty_context.setmenuwidth(80,!1)),this.xf_dropempty_context.refresh(),this.xf_dropempty_context.show(a.originalEvent.pageX,a.originalEvent.pageY,a))))};