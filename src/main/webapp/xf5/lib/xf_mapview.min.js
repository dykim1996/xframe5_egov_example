/* 2020-10-30 18:04 */ function XF_MAPVIEW(a,b){this._init(a,b),_xfx.islistviewtemplate(this,b)||(this._prop(b),this._box())}function XF_MAP(a,b){this._init(a,b),this._member(),this._prop(b),this._css(b),this._box()}XF_MAPVIEW.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_MAPVIEW,b),this.xf_inner_map=null,this.content_doc=null,this.content_win=null},XF_MAPVIEW.prototype._prop=function(a){this.xf_prop={style:"",border:1,border_color:[180,180,180],boxshadow_type:0,map_kind:0,latitude:37.4820357,longitude:126.8943599,map_type:0,zoom_level:80,margin:[0,0,0,0],hidden:!1},this.event_name_arr=[],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),this._css(a)},XF_MAPVIEW.prototype._css=function(a){1!=_xf_htmlready_mode&&(_xfx.propcss(this,a,this.css_arr,["position","hidden"]),_xfx.bordercss(this,a,this.css_arr))},XF_MAPVIEW.prototype._box=function(){var a;0==_xf_htmlready_mode&&(a=[],a.push("<div"),a.push(' id="'+this.xf_prop.internal_name+'"'),a.push(' class="'+_xfx.propclass(this,this.xf_prop,"_xf_mapview")+'"'),a.push(' style="'),a.push(this.css_arr.join("")),_xfx.sizeposcss(this,this.xf_prop,a),a.push('">'),a.push('<iframe class="_xf_mapview_iframe"></iframe>'),a.push("</div>")),_xfx.register(this,!1,a)},XF_MAPVIEW.prototype._dom=function(){this.xf_iframe=this.xf_object.find("._xf_mapview_iframe")},XF_MAPVIEW.prototype._offevent=function(){_xfj.offevent(this.xf_object,["on_create","on_click"])},XF_MAPVIEW.prototype._event=function(){_xfx.event(this.xf_prop,["on_create","on_click"]),this.xf_iframe.on("load",$.proxy(this.on_iframe_load,this))},XF_MAPVIEW.prototype._create=function(){this._dom(),this._event(),null!==this.xf_parent&&null!=this.xf_parent.xf_screen&&this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID&&(0==_xf_htmlready_mode&&this.setmapkind(this.xf_prop.map_kind),factory._fireevent({xf_component:this,event_name:"on_create"},this))},XF_MAPVIEW.prototype.on_iframe_load=function(a){this.content_doc=this.xf_iframe[0].contentDocument,this.content_win=this.xf_iframe[0].contentWindow,this.content_win._xf_map=this,this.xf_inner_map=this.content_win._xf_inner_map,this.xf_inner_map=this.content_win.create_map(this)},XF_MAPVIEW.prototype.on_map_click=function(a,b,c){factory._fireevent({xf_component:this,event_name:"on_click"},this,b,c)},XF_MAPVIEW.prototype.setmarker=function(a,b,c){return a=_xfu["float"](a),b=_xfu["float"](b),this.xf_inner_map.setmarker(a,b,c)},XF_MAPVIEW.prototype.deletemarker=function(a){return a=_xfu["int"](a),this.xf_inner_map.deletemarker(a)},XF_MAPVIEW.prototype.deleteallmarkers=function(){return this.xf_inner_map.deleteallmarkers()},XF_MAPVIEW.prototype.getmarker=function(a){return a=_xfu["int"](a),this.xf_inner_map.getmarker(a)},XF_MAPVIEW.prototype.getmarkercount=function(){return this.xf_inner_map.getmarkercount()},XF_MAPVIEW.prototype.getcenter=function(){return this.xf_inner_map.getcenter()},XF_MAPVIEW.prototype.setcenter=function(a,b){return a=_xfu["float"](a),b=_xfu["float"](b),this.xf_inner_map.setcenter(a,b)},XF_MAPVIEW.prototype.getmapkind=function(){return this.xf_prop.map_kind},XF_MAPVIEW.prototype.setmapkind=function(a){if(a=_xfu.intval(a),a===!1)return!1;switch(this.xf_prop.map_kind=_xfu["int"](a),this.xf_prop.map_kind){case 0:this.xf_iframe.prop("src",factory_xf_param.ENGINEURL+"/html/google.html");break;case 1:this.xf_iframe.prop("src",factory_xf_param.ENGINEURL+"/html/naver.html");break;case 2:this.xf_iframe.prop("src",factory_xf_param.ENGINEURL+"/html/daum.html")}return!0},XF_MAPVIEW.prototype.getmaptype=function(){return this.xf_prop.map_type},XF_MAPVIEW.prototype.setmaptype=function(a){a=_xfu["int"](a),this.xf_prop.map_type=a,this.xf_inner_map.setmaptype(a)},XF_MAPVIEW.prototype.getoption=function(a){return this.xf_inner_map.getoption(a)},XF_MAPVIEW.prototype.setoption=function(a,b){return this.xf_inner_map.setoption(a,b)},XF_MAPVIEW.prototype.getzoomlevel=function(){return this.xf_prop.zoom_level},XF_MAPVIEW.prototype.setzoomlevel=function(a){a=_xfu["int"](a),this.xf_prop.zoom_level=a,this.xf_inner_map.setzoomlevel(a)},XF_MAP.prototype._init=function(a,b){this.xf_parent=a,this.control_kind=XFD_CTRLKIND_MAP,this.object_kind=XFD_OBJKIND_CONTROL},XF_MAP.prototype._member=function(){this.is_expired=!1,this.markers=[],this.is_terrain_map=!1,this.click_listener=null,this.MAP_GOOGLE=0,this.MAP_NAVER=1,this.MAP_DAUM=2,this.html_arr=[],this.css_arr=[]},XF_MAP.prototype._prop=function(a){this.xf_prop_type={control_id:XFD_PROP_INT,x:XFD_PROP_INT,y:XFD_PROP_INT,width:XFD_PROP_INT,height:XFD_PROP_INT,border:XFD_PROP_INT,border_color:XFD_PROP_COLOR,map_kind:XFD_PROP_INT,map_type:XFD_PROP_INT,latitude:XFD_PROP_FLOAT,longitude:XFD_PROP_FLOAT,enable:XFD_PROP_BOOL,hidden:XFD_PROP_BOOL},this.xf_prop={control_id:-1,name:"",description:"",x:0,y:0,width:260,height:160,hidden:!1,style:"",border:1,border_color:[180,180,180],map_kind:0,latitude:37.4820357,longitude:126.8943599,map_type:0,zoom_level:80,on_click:null,position:"absolute",enable:!0},_xfx.prop(this,this.xf_prop,this.xf_prop_type,a)},XF_MAP.prototype._css=function(a){var b,c;for(b in a)switch(c=a[b],b){case"position":case"x":case"y":case"width":case"height":case"border_color":case"hidden":case"border":this.css_arr.push(_xfc.basic(b,c))}switch(this.class_name=_xfx.classname(a.name),$.extend(this.xf_prop,a),this.xf_prop.map_kind){case 0:_xfc.writejs("https://maps.googleapis.com/maps/api/js");break;case 1:_xfc.writejs("http://openapi.map.naver.com/openapi/naverMap.naver?ver=2.0&key=242da9d4586c2309238677d2ca639fee");break;case 2:_xfc.writejs("http://apis.daum.net/maps/maps3.js?apikey=2c686636eab09e459f5f134deb540658")}},XF_MAP.prototype._box=function(){this.html_arr.push("<div"),this.html_arr.push(' id="'+this.xf_prop.name+'"'),this.html_arr.push(' class="_xf_map '+this.class_name+'"'),this.html_arr.push(' style="'),this.html_arr.push(this.css_arr.join("")),this.html_arr.push('"'),this.html_arr.push("/>"),this.xf_object=$(this.html_arr.join("")),_xfx.register(this)},XF_MAP.prototype._dom=function(){var a,b,c,d;switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:switch(this.xf_prop.map_type){case 0:this.map_type=google.maps.MapTypeId.ROADMAP;break;case 1:this.map_type=google.maps.MapTypeId.SATELLITE;break;case 2:this.map_type=google.maps.MapTypeId.HYBRID;break;case 3:this.map_type=google.maps.MapTypeId.TERRAIN}a=this.xf_object.get(0),b={center:new google.maps.LatLng(this.xf_prop.latitude,this.xf_prop.longitude),zoom:this._get_level_from_percentage(this.xf_prop.zoom_level),mapTypeId:this.map_type,mapTypeControl:!1,panControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},streetViewControl:!1},this.map=new google.maps.Map(a,b);break;case this.MAP_NAVER:switch(this.xf_prop.map_type){case 0:this.map_type=0;break;case 1:this.map_type=2;break;case 2:this.map_type=1;break;case 3:this.map_type=3}nhn.api.map.setDefaultPoint("LatLng"),a=this.xf_object.get(0),b={point:new nhn.api.map.LatLng(this.xf_prop.latitude,this.xf_prop.longitude),zoom:this._get_level_from_percentage(this.xf_prop.zoom_level),enableWheelZoom:!0,enableDragPan:!0,enableDblClickZoom:!1,mapMode:this.map_type,activateTrafficMap:!1,activateBicycleMap:!1,minMaxLevel:[1,14],size:new nhn.api.map.Size(this.xf_prop.width-10,this.xf_prop.height)},this.map=new nhn.api.map.Map(a,b),c=new nhn.api.map.ZoomControl,c.setPosition({right:10,top:10}),this.map.addControl(c);break;case this.MAP_DAUM:switch(this.xf_prop.map_type){case 0:this.map_type=daum.maps.MapTypeId.ROADMAP;break;case 1:this.map_type=daum.maps.MapTypeId.SKYVIEW;break;case 2:this.map_type=daum.maps.MapTypeId.HYBRID;break;case 3:this.map_type=daum.maps.MapTypeId.ROADMAP}a=this.xf_object.get(0),b={center:new daum.maps.LatLng(this.xf_prop.latitude,this.xf_prop.longitude),level:this._get_level_from_percentage(this.xf_prop.zoom_level),mapTypeId:this.map_type,draggable:!0,scrollwheel:!0},this.map=new daum.maps.Map(a,b),3==this.xf_prop.map_type&&(this.map.addOverlayMapTypeId(daum.maps.MapTypeId.TERRAIN),this.is_terrain_map=!0),d=new daum.maps.ZoomControl,this.map.addControl(d,daum.maps.ControlPosition.RIGHT)}},XF_MAP.prototype._offevent=function(){switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:this.click_listener&&(google.maps.event.removeListener(this.click_listener),this.click_listener=null);break;case this.MAP_NAVER:this.click_listener&&(this.map.detach("click",this.click_listener),this.click_listener=null);break;case this.MAP_DAUM:this.click_listener&&(daum.maps.event.removeListener(this.map,"click",this.click_listener),this.click_listener=null)}},XF_MAP.prototype._event=function(){var a=["on_create","on_click"];switch(_xfx.event(this.xf_prop,a),this.xf_prop.map_kind){case this.MAP_GOOGLE:this.click_listener=google.maps.event.addListener(this.map,"click",$.proxy(this.on_object_click,this));break;case this.MAP_NAVER:this.click_listener=$.proxy(this.on_object_click,this),this.map.attach("click",this.click_listener);break;case this.MAP_DAUM:this.click_listener=$.proxy(this.on_object_click,this),daum.maps.event.addListener(this.map,"click",this.click_listener)}this.xf_object.on("click",$.proxy(this.on_object_click,this))},XF_MAP.prototype._create=function(){this._dom(),this._event(),this.xf_prop.on_create&&window[this.xf_prop.on_create](this)},XF_MAP.prototype.on_object_click=function(a,b){if(null!=this.xf_prop.on_click)switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:window[this.xf_prop.on_click](this,event.latLng.lat(),event.latLng.lng());break;case this.MAP_NAVER:window[this.xf_prop.on_click](this,event.point.getLat(),event.point.getLng());break;case this.MAP_DAUM:window[this.xf_prop.on_click](this,event.latLng.getLat(),event.latLng.getLng())}},XF_MAP.prototype._get_level_from_percentage=function(a){var b=0;switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:switch(this.map_type){case google.maps.MapTypeId.ROADMAP:case google.maps.MapTypeId.HYBRID:b=Math.round(.21*a);break;case google.maps.MapTypeId.SATELLITE:b=Math.round(.19*a)}break;case this.MAP_NAVER:b=Math.round(.13*a)+1;break;case this.MAP_DAUM:switch(this.map_type){case daum.maps.MapTypeId.ROADMAP:case daum.maps.MapTypeId.HYBRID:b=Math.round(14-.13*a);break;case daum.maps.MapTypeId.SKYVIEW:b=Math.round(15-.14*a)-1}}return b},XF_MAP.prototype.setmarker=function(a,b,c){var d,e,f,g;a=_xfu["float"](a),b=_xfu["float"](b);var h=null;switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:h=new google.maps.Marker({position:new google.maps.LatLng(a,b),title:title}),h.setMap(this.map);break;case this.MAP_NAVER:d=new nhn.api.map.Size(28,37),e=new nhn.api.map.Size(14,37),f=new nhn.api.map.Icon("http://static.naver.com/maps2/icons/pin_spot2.png",d,e),g=new nhn.api.map.MarkerLabel,this.map.addOverlay(g),h=new nhn.api.map.Marker(f,{point:new nhn.api.map.LatLng(a,b),title:title}),this.map.addOverlay(h),this.map.attach("mouseenter",$.proxy(function(a){a.target instanceof nhn.api.map.Marker&&g.setVisible(!0,a.target)},this)),this.map.attach("mouseleave",$.proxy(function(a){a.target instanceof nhn.api.map.Marker&&g.setVisible(!1,a.target)},this));break;case this.MAP_DAUM:h=new daum.maps.Marker({position:new daum.maps.LatLng(a,b),title:title}),h.setMap(this.map)}return this.markers.push(h),this.markers.length-1},XF_MAP.prototype.deletemarker=function(a){var b=_xfu["int"](a);switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:case this.MAP_DAUM:this.markers[b].setMap(null),this.markers.splice(b,1);break;case this.MAP_NAVER:this.map.removeOverlay(this.markers[b]),this.markers.splice(b,1)}},XF_MAP.prototype.deleteallmarkers=function(){var a;for(a=0;a<this.markers.length;a++)1==this.xf_prop.map_kind?this.map.removeOverlay(this.markers[a]):this.markers[a].setMap(null),this.markers[a]=null;this.markers=[]},XF_MAP.prototype.getmarker=function(a){var b=[],c=null,d="",e=_xfu["int"](a);switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:c=this.markers[e].getPosition(),d=this.markers[e].getTitle(),b.push(c.lat()),b.push(c.lng()),b.push(d);break;case this.MAP_NAVER:c=this.markers[e].getPoint(),d=this.markers[e].getTitle(),b.push(c.getLat()),b.push(c.getLng()),b.push(d);break;case this.MAP_DAUM:c=this.markers[e].getPosition(),d=this.markers[e].getTitle(),b.push(c.getLat()),b.push(c.getLng()),b.push(d)}return b},XF_MAP.prototype.getmarkercount=function(){return this.markers.length},XF_MAP.prototype.getcenter=function(){var a=[],b=null;switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:b=this.map.getCenter(),a.push(b.lat()),a.push(b.lng());break;case this.MAP_NAVER:case this.MAP_DAUM:b=this.map.getCenter(),a.push(b.getLat()),a.push(b.getLng())}return a},XF_MAP.prototype.setcenter=function(a,b){switch(this.xf_prop.latitude=_xfu["float"](a),this.xf_prop.longitude=_xfu["float"](b),this.xf_prop.map_kind){case this.MAP_GOOGLE:this.map.setCenter(new google.maps.LatLng(this.xf_prop.latitude,this.xf_prop.longitude));break;case this.MAP_NAVER:this.map.setCenter(new nhn.api.map.LatLng(this.xf_prop.latitude,this.xf_prop.longitude));break;case this.MAP_DAUM:this.map.setCenter(new daum.maps.LatLng(this.xf_prop.latitude,this.xf_prop.longitude))}},XF_MAP.prototype.getmapkind=function(){return this.xf_prop.map_kind},XF_MAP.prototype.setmapkind=function(a){a=_xfu["int"](a),this.xf_prop.map_kind=_xfu["int"](a),this.xf_iframe.prop("src",factory_xf_param.ENGINEURL+"/html/map.html")},XF_MAP.prototype.getmaptype=function(){return this.xf_prop.map_type},XF_MAP.prototype.setmaptype=function(a){var b,c,d;if(this.xf_prop.map_type=_xfu["int"](a),!(this.map_type<0||2<this.map_type))switch(this.xf_prop.map_type=a,this.xf_prop.map_kind){case this.MAP_GOOGLE:switch(b=google.maps.MapTypeId.ROADMAP,a){case 0:b=google.maps.MapTypeId.ROADMAP;break;case 1:b=google.maps.MapTypeId.SATELLITE;break;case 2:b=google.maps.MapTypeId.HYBRID;break;case 3:b=google.maps.MapTypeId.TERRAIN}this.map.setMapTypeId(b);break;case this.MAP_NAVER:switch(c=0,a){case 0:c=0;break;case 1:c=2;break;case 2:c=1;break;case 3:c=3}this.map.setMapMode(c);break;case 2:switch(d=daum.maps.MapTypeId.ROADMAP,a){case 0:d=daum.maps.MapTypeId.ROADMAP;break;case 1:d=daum.maps.MapTypeId.SKYVIEW;break;case 2:d=daum.maps.MapTypeId.HYBRID;break;case 3:d=daum.maps.MapTypeId.ROADMAP}this.map.setMapTypeId(d),3==a?(this.is_terrain_map||this.map.addOverlayMapTypeId(daum.maps.MapTypeId.TERRAIN),this.is_terrain_map=!0):(this.map.removeOverlayMapTypeId(daum.maps.MapTypeId.TERRAIN),this.is_terrain_map=!1)}},XF_MAP.prototype.getoption=function(a){return this.xf_inner_map.getoption(a)},XF_MAP.prototype.setoption=function(a,b){return this.xf_inner_map.setoption(a,b)},XF_MAP.prototype.getzoomlevel=function(){return this.xf_prop.zoom_level},XF_MAP.prototype.setzoomlevel=function(a){this.xf_prop.zoom_level=_xfu["int"](a);var b=this._get_level_from_percentage(a);switch(this.xf_prop.map_kind){case this.MAP_GOOGLE:this.map.setZoom(b);break;case this.MAP_NAVER:this.map.setLevel(b);break;case this.MAP_DAUM:this.map.setLevel(b)}};