/* 2020-10-30 18:04 */ function XF_HANGUL(a,b){this._init(a,b),1!=_xfx.islistviewtemplate(this,b)&&(this._prop(b),this._box(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this._create())}XF_HANGUL.prototype._init=function(a,b){_xfx.init(this,a,XFD_OBJKIND_CONTROL,XFD_CTRLKIND_FIELD,b),this.control_field_kind=XFD_CTRLKIND_FIELD_HANGUL,this.data_type=XFD_DATA_HANGUL,this.is_edit_cancel=!1,this.event_keydown=null,this.count_keydown=0,this.value="",this.value_on_focus="",this.cursor_on_blur=-1,this.focused_by=0,this.xf_selectbox=null,this.pattern_type=XFD_PATTERN_TYPE_NONE,this.xf_regexp=null,this.is_allow_hangul=!0,this.before_key_event={},this.is_validalertbox_show=!0},XF_HANGUL.prototype._prop=function(a){this.xf_prop={style:"",custom_input_attr:"",custom_input_class:"",font:["굴림체",9,0,0,0,0],fore_color:[0,0,0],back_color:[255,255,255],back_color_opacity:10,transparent:!1,border:1,border_radius:"0",border_color:[180,180,180],border_ex:"",disable_style_use:!1,fore_color_disable:[0,0,0],back_color_disable:[255,255,255],border_color_disable:[180,180,180],focus_style_use:!1,fore_color_focus:[0,0,0],back_color_focus:[255,255,255],border_color_focus:[180,180,180],back_image:"",back_imagesize:0,back_imagefillstyle:0,back_imagehorzalign:0,back_imagevertalign:0,apply_inputtypecolor:!0,image:"",mousehover:!1,mousehover_forecolor:[0,0,255],mousehover_backcolor:[255,255,255],mousehover_gradienteffect:0,mousehover_gradientstartcolor:[255,255,255],mousehover_gradientendcolor:[225,225,225],box_shadow_effect:!0,button_size:17,resize_dir:0,mouse_cursor:1,max_length:30,min_length:0,meta_maxlength:0,max_length_unit:0,horz_align:0,vert_align:1,text_margin:[1,1,1,1],dup_name:"",allow_dup:!1,auto_dup:!1,auto_complete:!1,auto_skip:!0,make_case:0,input_type:0,inputtype_optionkind:0,enable:!0,hidden:!1,full_shape:!1,imemode:1,default_value:"",default_value_usage:0,pattern:"",masking_length:0,pattern_mask:"",pattern_front_symbol:"",pattern_rear_symbol:"",enterstop:!0,tabstop:!0,popupmenu_show:!0,text_wordellipsis:!1,focus_select:0,tooltip:"",mobile_keyboard:0,hint_text:""},this.event_name_arr=["on_prekeydown","on_keydown","on_change","on_focusout","on_focusin","on_validation","on_click","on_dblclick","on_rclick","on_changed"],_xfx.propcommon(this,this.xf_prop),_xfx.propparam(this,this.xf_prop,a),_xfx.xdataset(this,!0),this._css(a),this._pattern(),this._patternmask(),0==this.xf_prop.focus_select&&(void 0===factory_xf_param.FOCUS_SELECT_FIELD?this.xf_prop.focus_select=1:this.xf_prop.focus_select=factory_xf_param.FOCUS_SELECT_FIELD)},XF_HANGUL.prototype._pattern=function(){this.pattern_type=XFD_PATTERN_TYPE_NONE,this.xf_regexp=null,this.is_allow_hangul=!0,this.xf_prop.pattern.length>0&&(this.pattern_type=XFD_PATTERN_TYPE_CUSTOM,this.xf_regexp=_xfp.regexp(this.xf_prop.pattern,XFD_DATA_HANGUL),this.xf_prop.pattern.indexOf("H")<0&&this.xf_prop.pattern.indexOf("h")<0&&(this.is_allow_hangul=!1))},XF_HANGUL.prototype._patternmask=function(){this.mask_range_arr=_xfp.mask_range(this.xf_prop.pattern_mask),this.mask_range_count=this.mask_range_arr.length},XF_HANGUL.prototype._box=function(){this._input_box("_xf_hangul")},XF_HANGUL.prototype._dom=function(){this.xf_selectbox=xf_screen._getfieldselectbox()},XF_HANGUL.prototype._offevent=function(){this._input_offevent("_xf_hangul"),_xfj.offevent(this.xf_object,["keypress, paste"]),this.xf_prop.xf_button&&_xfj.offevent(this.xf_prop.xf_button,["mousedown","click"])},XF_HANGUL.prototype._event=function(){this._input_event("_xf_hangul"),this.xf_object.on("paste",$.proxy(this.on_input_paste,this)),this.xf_prop.xf_button&&(this.xf_prop.xf_button.on("mousedown",$.proxy(this.on_button_mousedown,this)),this.xf_prop.xf_button.on("click",$.proxy(this.on_button_click,this)))},XF_HANGUL.prototype._create=function(){this._input_create()},XF_HANGUL.prototype._setvalue=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(void 0===b.is_fire_async&&(b.is_fire_async=!0),1==this.is_edit_cancel&&b.is_fire_editcomplete&&this.xf_prop.on_editcomplete)return this.xf_selectbox.hideselectbox(!1),void this.xf_prop.on_editcomplete(this,this.is_edit_cancel);if(b.is_close_selectbox&&this.xf_selectbox.hideselectbox(!1),n=factory_xf_param.MASK_FIT_PATTERN_LENGTH,b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(g=_xfj.position(this.xf_object.get(0)),l=_xfj.selectcount(this.xf_object.get(0)),n=!1),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),f=!1,c=this.xf_object.val(),a=_xfu.str(a),factory_xf_param.INVALID_VALUE_BY_API>0&&b.event_type==XFD_DATA_CHANGE_BY_API&&a.length>0&&(a.length>this.xf_prop.max_length?a=this._invalidvaluebyapi(!0,a):this._invalidvaluebyapi(!1,a)),0==a.length?(d="",e="",this.mask_range_count>0&&(d=_xfp.masks(d,this.mask_range_count,this.mask_range_arr,n,this.xf_prop.pattern_mask))):(factory_xf_param.INVALID_VALUE_BY_API>0&&b.event_type==XFD_DATA_CHANGE_BY_API&&(k=0==this.xf_prop.max_length_unit?_xfu.bytelen(a,0):_xfu.bytelen(a,0,1),k<this.xf_prop.min_length||k>this.xf_prop.max_length?a=this._invalidvaluebyapi(!0,a):this._invalidvaluebyapi(!1,a)),e=this._unfmt(a,b.event_type),0!=this.xf_prop.make_case&&(e=_xfx.makecase(this.xf_prop.make_case,e)),d=this.pattern_type==XFD_PATTERN_TYPE_CUSTOM&&b.event_type!=XFD_DATA_CHANGE_BY_KEYUP?_xfp.exp(e,this.xf_regexp):e,this.xf_prop.masking_length>0&&b.event_type!=XFD_DATA_CHANGE_BY_KEYUP&&b.event_type!=XFD_DATA_CHANGE_BY_UNMASK?d=_xfp.masklength(d,this.xf_prop.masking_length,this.xf_prop.max_length_unit,this.xf_prop.max_length):this.mask_range_count>0&&b.event_type!=XFD_DATA_CHANGE_BY_KEYUP&&(d=_xfp.hangulmasks(d,this.mask_range_count,this.mask_range_arr,n,this.xf_prop.pattern_mask,this.xf_prop.max_length_unit,this.xf_prop.max_length))),e=0==this.xf_prop.max_length_unit?_xfu.trimlength(e,this.xf_prop.max_length):_xfu.trimlength(e,this.xf_prop.max_length,!0,1),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET&&b.event_type!=XFD_DATA_CHANGE_BY_BLUR&&b.event_type!=XFD_DATA_CHANGE_BY_GRID||d.length>0&&(this.xf_prop.pattern_front_symbol.length>0||this.xf_prop.pattern_rear_symbol.length>0)&&(d=this.xf_prop.pattern_front_symbol+d+this.xf_prop.pattern_rear_symbol),c!=d&&(f=!0,this.xf_object.val(d)),e!=this.value&&(this.value=e,1==b.is_set_xdataset&&this._setxdatasetvalue(this.value),b.is_fire_event&&(factory._fireevent({xf_component:this,event_name:"on_change"},this),this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchange(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value,!0),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:b.is_fire_async},this,this.value_on_focus,this.value),this.xf_prop.xf_grid&&this.xf_prop.xf_grid.on_item_editchanged(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value_on_focus,this.value,!0))),b.event_type!=XFD_DATA_CHANGE_BY_API&&b.event_type!=XFD_DATA_CHANGE_BY_XDATASET||(this.value_on_focus=this.value),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&(this.xf_selectbox.isshowselectbox()?this.xf_selectbox.refreshselectbox(!0):1!=b.is_close_selectbox&&this.value.length>0&&this.xf_selectbox.showselectbox(this))),b.event_type==XFD_DATA_CHANGE_BY_KEYUP&&1==f&&(void 0!==b.cursor_pos?g=b.cursor_pos:c.length>=d.length?l>0&&(g+=1,this.paste_value_length>0&&(g+=this.paste_value_length-1)):g+=d.length-c.length,_xfj.position(this.xf_object.get(0),g)),b.is_set_focus&&(0==this.is_has_focus?this.setfocus():b.event_type==XFD_DATA_CHANGE_BY_API&&2!=this.xf_prop.focus_select&&this.setsel(0,-1)),m=!0,this.is_validalertbox_show=!0,b.event_type==XFD_DATA_CHANGE_BY_BLUR){if(0==this.value.length?(1==this.xf_prop.input_type||3==this.xf_prop.input_type||void 0!==this.xf_prop.data_inputtype&&"1"==this.xf_prop.data_inputtype)&&(m=!1,this.xf_prop.create_mode===_XFD_CREATEMODE_GRID&&(this.is_edit_cancel=!0,this.xf_prop.on_editcomplete(this,this.is_edit_cancel)),this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:"",alert_title:factory._userlang("검증","Validation"),alert_message:factory._userlang("필수 항목입니다!","Required Value!"),valid_type:"required",event_type:XFD_DATA_CHANGE_BY_BLUR,use_alertbox:!0})):this.value.length>0&&(this.value.length<this.xf_prop.min_length||this.value.length>this.xf_prop.max_length)&&(m=!1,this.xf_prop.create_mode===_XFD_CREATEMODE_GRID&&(this.is_edit_cancel=!0,this.xf_prop.on_editcomplete(this,this.is_edit_cancel)),h=[],"ko"==factory_xf_param.USER_LANGUAGE?(h.push("유효하지 않은 값입니다!"),h.push("유효 길이 범위: "+this.xf_prop.min_length+" ~ "+this.xf_prop.max_length)):(h.push("Invalid value!"),h.push("Length Range: "+this.xf_prop.min_length+" ~ "+this.xf_prop.max_length)),this.is_validalertbox_show=factory._callbackvalidationalert(this.xf_prop.create_mode===_XFD_CREATEMODE_GRID?this.xf_prop.xf_grid:this,{xf_focus_component:this,component_value:this.value,alert_title:"검증",alert_message:h.join("\n"),valid_type:this.value.length<this.xf_prop.min_length?"length_min":"length_max",event_type:XFD_DATA_CHANGE_BY_BLUR,min_length:this.xf_prop.min_length,max_length:this.xf_prop.max_length,use_alertbox:!0})),1==m&&this.xf_prop.xf_grid&&(j=this.xf_prop.xf_grid.on_item_editvalidation(this.xf_prop.row_index,this.xf_prop.sub_row_index,this.xf_prop.column_index,this.value),0===j?(m=!1,this.is_validalertbox_show=!1):2===j&&(this.next_focus_dir=0)),0==m&&this.xf_prop.create_mode===_XFD_CREATEMODE_GRID)return 0==this.is_validalertbox_show&&(i=this,setTimeout(function(){i.xf_prop.xf_grid._setselectitem(i.xf_prop.row_index,i.xf_prop.sub_row_index,i.xf_prop.column_index,!0,!1,!1,!0),i.xf_object.css("color",_xfu.rgbfunc(i.xf_prop.fore_color)),i.setfocus()},0)),!1;1==m&&(j=factory._fireevent({xf_component:this,event_name:"on_validation"},this),0==j&&(m=!1)),1==m&&this.xf_prop.create_mode!=_XFD_CREATEMODE_GRID&&factory._setdupdata(this,this.value),b.is_fire_event&&this.value_on_focus!=this.value&&(o=this.value_on_focus,this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_changed",is_fire_async:!0},this,o,this.value)),this.value_on_focus=this.value,factory._fireevent({xf_component:this,event_name:"on_focusout",is_fire_async:!0},this,this.focusout_type)}b.is_fire_editcomplete&&this.xf_prop.on_editcomplete&&this.xf_prop.on_editcomplete(this,this.is_edit_cancel),this._autoskip(this,b.event_type)},XF_HANGUL.prototype._autoskip=function(a,b){var c,d,e,f;if(c=-1,b==XFD_DATA_CHANGE_BY_KEYUP||b==XFD_DATA_CHANGE_BY_API&&1==a.ishasfocus()){if(0==this.xf_prop.max_length_unit&&_xfu.bytelen(a.value,0)<a.xf_prop.max_length)return 0;if(1==this.xf_prop.max_length_unit&&a.value.length<a.xf_prop.max_length)return 0;if(e=a.value.length,f=a.value.charCodeAt(e-1),!factory.key_print_arr[f])return 0;if(1==a.xf_prop.auto_skip){if(a.xf_prop.create_mode==_XFD_CREATEMODE_GRID)return a.next_focus_dir=1,a.xf_prop.xf_grid.setfocus(),0;a.event_keydown&&b==XFD_DATA_CHANGE_BY_KEYUP&&factory._firekeyevent(a,a.event_keydown),void 0!==a.value&&void 0!==a.value_on_focus&&a.value_on_focus!==a.value&&(d=a.value_on_focus,a.value_on_focus=a.value,factory._fireevent({xf_component:a,event_name:"on_changed",is_fire_async:!0},a,d,a.value)),a.focusout_type=2,c=_xfx.focusmove(a,!0)}else c=!1,void 0!==a.value&&void 0!==a.value_on_focus&&a.value_on_focus!==a.value&&(d=a.value_on_focus,a.value_on_focus=a.value,factory._fireevent({xf_component:a,event_name:"on_changed",is_fire_async:!0},a,d,a.value));return c===!1?0:1}return c},XF_HANGUL.prototype._unfmt=function(a,b){var c;return c=a,c=_xfx.unpatternsymbol(this,c),this.pattern_type==XFD_PATTERN_TYPE_CUSTOM&&b!=XFD_DATA_CHANGE_BY_KEYUP&&(c=_xfp._exp(c,this.xf_regexp)),c=0==this.xf_prop.max_length_unit?_xfu.trimlength(c,this.xf_prop.max_length):_xfu.trimlength(c,this.xf_prop.max_length,!0,1)},XF_HANGUL.prototype._iskeyarrowupdown=function(a){return a.which==XFD_KEY_UPARROW?(1==this.xf_selectbox.isshowselectbox()&&this.xf_selectbox.movefocusitem(!0),!0):a.which==XFD_KEY_DOWNARROW?(0==this.xf_selectbox.isshowselectbox()?this.xf_selectbox.showselectbox(this):this.xf_selectbox.movefocusitem(!1),!0):!1},XF_HANGUL.prototype._iskeyselectboxselect=function(a){var b;return a.which==XFD_KEY_ENTER&&1==this.xf_selectbox.isshowselectbox()?(b=this.xf_selectbox.getselecteditemtext(),void 0!==b&&b.length>0&&this._setvalue(b,{is_fire_event:!0,is_set_xdataset:!0,is_close_selectbox:!0,is_set_focus:!0,is_fire_editcomplete:!0}),!0):!1},XF_HANGUL.prototype.on_input_paste=function(a){var b;if(this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type)return b=_xfj.eventpastevalue(a),this._on_input_paste(b),!1},XF_HANGUL.prototype._on_input_paste=function(a){var b,c,d,e,c;if(a=_xfj.pastevalue(a,!0),b=a.length,0!=b){if(d=this.xf_object.val().split(""),e=_xfj.select(this.xf_object.get(0)),c=e.end-e.start,c>0&&d.splice(e.start,c),this.cursor_pos_keydown=e.start,0==c&&this.value.length==this.xf_prop.max_length)return 0;d.splice(e.start,0,a),this.cursor_pos_setvalue=e.start+b,this._setvalue(d.join(""),{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP})}},XF_HANGUL.prototype.on_input_keyup=function(a){if(0!=this.xf_prop.enable&&2!=this.xf_prop.input_type&&3!=this.xf_prop.input_type){if(0==a.ctrlKey&&0==a.altKey&&factory.key_stopbubble_arr[a.which]&&a.stopPropagation(),0==this.count_keydown)return void a.preventDefault();factory.key_movecursor_arr[a.which]||this._setvalue(a.target.value,{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP}),(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE)&&a.which!=XFD_KEY_ENTER&&factory._firekeyevent(this,a),a.preventDefault(),this.before_key_event.type=a.type,this.before_key_event.which=a.which}},XF_HANGUL.prototype.on_input_keypress=function(a){a.which==XFD_KEY_ENTER&&factory._firekeyevent(this,a)},XF_HANGUL.prototype.on_input_keydown=function(a){var b,c,d;if(this.xf_prop.enable){if(this.count_keydown++,this.is_edit_cancel=!1,this.event_keydown=a,this._keyarrowingrid(a,this.xf_object))return!1;if(factory.key_hangul_arr[a.which]&&0==this.is_allow_hangul&&(0!=this.xf_prop.input_type&&1!=this.xf_prop.input_type||0==factory.is_ie&&0==factory.is_mobile&&(this.xf_object.prop("readOnly",!0),d=this,setTimeout(function(){d.xf_object.prop("readOnly",!1)},0))),0==this.is_allow_hangul&&factory.key_hangul_arr[this.before_key_event.which]&&"keydown"==this.before_key_event.type&&_xfj.positionevent(this.xf_object[0],a),this.before_key_event.type=a.type,this.before_key_event.which=a.which,a.which==XFD_KEY_ENTER&&(this.xf_selectbox.isshowselectbox()||this._setvalue(a.target.value,{is_fire_event:!0,is_set_xdataset:!0,is_fire_editcomplete:!1,is_set_focus:!1,event_type:XFD_DATA_CHANGE_BY_KEYUP})),b=factory._firekeyevent(this,a,!1,"on_prekeydown"),1==b)return a.preventDefault(),void(factory.key_hangul_arr[a.which]&&(0!=this.xf_prop.input_type&&1!=this.xf_prop.input_type||0==factory.is_mobile&&(this.xf_object.prop("readOnly",!0),d=this,setTimeout(function(){d.xf_object.prop("readOnly",!1)},0))));if(!a.ctrlKey){if(a.which==XFD_KEY_ENTER){if(!this.xf_selectbox.isshowselectbox()){if(0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_object.blur(),!1;factory._firekeyevent(this,a,!1,"on_keydown",!0)}}else if(0!=_xfx.iskeyfocus(a,this))return this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_object.blur(),!1;if(2==this.xf_prop.input_type||3==this.xf_prop.input_type)return void(a.which==XFD_KEY_BACKSPACE&&a.preventDefault());if(!this.xf_prop.xf_grid||a.which!=XFD_KEY_BACKSPACE&&a.which!=XFD_KEY_DELETE||factory._firekeyevent(this,a,!1,"on_keydown",!0),_xfx.iskeydupfield(a,this))return!1;if(this.xf_selectbox.isshowselectbox()&&a.which==XFD_KEY_ESC&&a.stopPropagation(),this._iskeyarrowupdown(a))return!1;if(this._iskeyselectboxselect(a))return!1;if((a.which==XFD_KEY_ENTER||a.which==XFD_KEY_ESC)&&(this.xf_selectbox.hideselectbox(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID))return a.which==XFD_KEY_ESC?this.is_edit_cancel=!0:a.which==XFD_KEY_ENTER&&(this.next_focus_dir=1),this.xf_object.blur(),!1;if(_xfx.iskeyinputblock(a,this))return void a.preventDefault();if(_xfx.iskeyfunction(a))return void a.preventDefault();(factory.key_print_arr[a.which]||a.which==XFD_KEY_HANGUL)&&0==_xfj.selectcount(this.xf_object.get(0))&&(c=0==this.xf_prop.max_length_unit?_xfu.bytelen(this.value,0):_xfu.bytelen(this.value,0,1),c>=this.xf_prop.max_length&&a.preventDefault()),a.stopPropagation()}}},XF_HANGUL.prototype.on_button_mousedown=function(a){a.preventDefault(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),0==this.is_has_focus&&(this.focused_by=1,this.xf_object.focus())},XF_HANGUL.prototype.on_button_click=function(a){this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&a.stopPropagation(),this.xf_prop.create_mode==_XFD_CREATEMODE_GRID&&this.xf_prop.on_popbtnclick?this.xf_prop.on_popbtnclick(this):factory._fireevent({xf_component:this,event_name:"on_buttonclick"},this)},XF_HANGUL.prototype.getmaskinglength=function(){return this.xf_prop.masking_length},XF_HANGUL.prototype.setmaskinglength=function(a){return a=_xfu.intval(a,0,XFD_MAX_VALUE),a===!1?!1:(this.xf_prop.masking_length=a,this.settext(this.gettext()),!0)};